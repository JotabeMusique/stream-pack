function h(n){return function(e,r){Object.defineProperty(e,r,{get:function(){},set:function(s){Object.defineProperty(this,r,{value:s,writable:!0,enumerable:n})},enumerable:n})}}var Ss=function(n,e){return Ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},Ss(n,e)};function Xa(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ss(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function i(n,e,r,s){var a=arguments.length,u=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,e,r,s);else for(var g=n.length-1;g>=0;g--)(_=n[g])&&(u=(a<3?_(u):a>3?_(e,r,u):_(e,r))||u);return a>3&&u&&Object.defineProperty(e,r,u),u}function Co(n,e){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,a,u,_=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return _.next=g(0),_.throw=g(1),_.return=g(2),typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function g(m){return function(v){return p([m,v])}}function p(m){if(s)throw new TypeError("Generator is already executing.");for(;_&&(_=0,m[0]&&(r=0)),r;)try{if(s=1,a&&(u=m[0]&2?a.return:m[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,m[1])).done)return u;switch(a=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){r.label=m[1];break}if(m[0]===6&&r.label<u[1]){r.label=u[1],u=m;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(m);break}u[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(n,r)}catch(v){m=[6,v],a=0}finally{s=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function Io(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],s=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function va(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var s=r.call(n),a,u=[],_;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)u.push(a.value)}catch(g){_={error:g}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(_)throw _.error}}return u}function Za(n,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,u;s<a;s++)(u||!(s in e))&&(u||(u=Array.prototype.slice.call(e,0,s)),u[s]=e[s]);return n.concat(u||Array.prototype.slice.call(e))}function Ea(n){var e;return(e=[]).concat.apply(e,Za([],va(n),!1))}function fo(n){return typeof n=="function"?n():n}function Eo(n){var e,r,s;return Co(this,function(a){switch(a.label){case 0:e=0,r=1,a.label=1;case 1:return e<n?[4,e]:[3,3];case 2:return a.sent(),s=va([r,e+r],2),e=s[0],r=s[1],[3,1];case 3:return[4,n];case 4:return a.sent(),[3,3];case 5:return[2]}})}function xo(n,e){return Object.assign.apply(Object,Za([{}],va(n.map(e)),!1))}function eo(n,e){var r,s,a;if(typeof e!="function"){var u=e;e=(function(T){return T[u].toString()})}var _={};try{for(var g=Io(n),p=g.next();!p.done;p=g.next()){var m=p.value,v=e(m);((a=_[v])!==null&&a!==void 0?a:_[v]=[]).push(m)}}catch(T){r={error:T}}finally{try{p&&!p.done&&(s=g.return)&&s.call(g)}finally{if(r)throw r.error}}return _}function to(n,e){if(typeof e!="function"){var r=e;e=(function(s){return s[r].toString()})}return xo(n,function(s){var a;return a={},a[e(s)]=s,a})}function ro(n){return n==null}function B(n,e){return ro(n)?null:e(n)}function O(n,e){return ro(n)?void 0:e(n)}function so(){var n,e,r=new Promise(function(s,a){n=s,e=a});return{promise:r,resolve:n,reject:e}}const Uo=6e4;function Bo(n){return B(n.expiresIn,e=>n.obtainmentTimestamp+e*1e3-Uo)}function xa(n){return B(Bo(n),e=>Date.now()>e)??!1}const t=Symbol("twurpleRawData");class l{[t];constructor(e){this[t]=e}}var To={};function no(){try{return To.TWURPLE_MOCK_API_PORT??null}catch{try{return null}catch{return null}}}function io(n){if(!n)return"";const e=new URLSearchParams;for(const[s,a]of Object.entries(n))if(a===null)e.append(s,"");else if(Array.isArray(a))for(const u of a)e.append(s,u.toString());else a!==void 0&&e.append(s,a.toString());const r=e.toString();return r?`?${r}`:""}let de=class extends Error{constructor(e,r){super(e,r),Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace?.(this,new.target.constructor)}get name(){return this.constructor.name}};class No extends de{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}}function d(n){if(n==null)throw new No;return n}function o(n,e,r){return s=>{const a=r?function(){return`[${e}#${this[r]} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`}:function(){return`[${e} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`};Object.defineProperty(s.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:a,enumerable:!1})}}let Cs=class extends l{get authorName(){return this[t].author_name}get bitsEnabled(){return this[t].bits_enabled}get installable(){return this[t].can_install}get configurationLocation(){return this[t].configuration_location}get description(){return this[t].description}get tosUrl(){return this[t].eula_tos_url}get hasChatSupport(){return this[t].has_chat_support}get iconUrl(){return this[t].icon_url}getIconUrl(e){return this[t].icon_urls[e]}get id(){return this[t].id}get name(){return this[t].name}get privacyPolicyUrl(){return this[t].privacy_policy_url}get requestsIdentityLink(){return this[t].request_identity_link}get screenshotUrls(){return this[t].screenshot_urls}get state(){return this[t].state}get subscriptionsSupportLevel(){return this[t].subscriptions_support_level}get summary(){return this[t].summary}get supportEmail(){return this[t].support_email}get version(){return this[t].version}get viewerSummary(){return this[t].viewer_summary}get viewerSummery(){return this[t].viewer_summary}get allowedConfigUrls(){return this[t].allowlisted_config_urls}get allowedPanelUrls(){return this[t].allowlisted_panel_urls}get mobileViewerUrl(){return this[t].views.mobile?.viewer_url??null}get panelViewerUrl(){return this[t].views.panel?.viewer_url??null}get panelHeight(){return this[t].views.panel?.height??null}get panelCanLinkExternalContent(){return this[t].views.panel?.can_link_external_content??null}get overlayViewerUrl(){return this[t].views.video_overlay?.viewer_url??null}get overlayCanLinkExternalContent(){return this[t].views.video_overlay?.can_link_external_content??null}get componentViewerUrl(){return this[t].views.component?.viewer_url??null}get componentAspectWidth(){return this[t].views.component?.aspect_width??null}get componentAspectHeight(){return this[t].views.component?.aspect_height??null}get componentAspectRatioX(){return this[t].views.component?.aspect_ratio_x??null}get componentAspectRatioY(){return this[t].views.component?.aspect_ratio_y??null}get componentAutoScales(){return this[t].views.component?.autoscale??null}get componentScalePixels(){return this[t].views.component?.scale_pixels??null}get componentTargetHeight(){return this[t].views.component?.target_height??null}get componentSize(){return this[t].views.component?.size??null}get componentZoom(){return this[t].views.component?.zoom??null}get componentZoomPixels(){return this[t].views.component?.zoom_pixels??null}get componentCanLinkExternalContent(){return this[t].views.component?.can_link_external_content??null}get configViewerUrl(){return this[t].views.config?.viewer_url??null}get configCanLinkExternalContent(){return this[t].views.config?.can_link_external_content??null}};Cs=i([o("api","HelixExtension","id")],Cs);class P extends de{constructor(e){super(`${e} - this should never happen, please file a bug in the GitHub issue tracker`)}}function c(n){return typeof n=="string"?n:typeof n=="number"?n.toString(10):n.id}function Ce(n){return typeof n=="string"?n:n.name}class oe extends de{_statusCode;_url;_method;_body;constructor(e,r,s,a,u,_){super(`Encountered HTTP status code ${e}: ${r}

URL: ${s}
Method: ${a}
Body:
${!_&&u.length>150?`${u.slice(0,147)}...`:u}`),this._statusCode=e,this._url=s,this._method=a,this._body=u}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}}async function Is(n,e){if(!n.ok){const r=n.headers.get("Content-Type")==="application/json",s=r?JSON.stringify(await n.json(),null,2):await n.text(),a=io(e.query),u=`${e.url}${a}`;throw new oe(n.status,n.statusText,u,e.method??"GET",s,r)}}async function ao(n){if(n.status===204)return;const e=await n.text();if(e)return JSON.parse(e)}function Do(n,e){const r=no();switch(e){case"helix":{const s=n.replace(/^\//,"");return r?s==="eventsub/subscriptions"?`http://localhost:${r}/${s}`:`http://localhost:${r}/mock/${s}`:`https://api.twitch.tv/helix/${s}`}case"auth":{const s=n.replace(/^\//,"");return r?`http://localhost:${r}/auth/${s}`:`https://id.twitch.tv/oauth2/${s}`}case"custom":return n;default:return n}}async function os(n,e,r,s,a={}){const u=n.type??"helix",_=Do(n.url,u),g=io(n.query),p=new Headers({Accept:"application/json"});let m;n.jsonBody&&(m=JSON.stringify(n.jsonBody),p.append("Content-Type","application/json")),e&&u!=="auth"&&p.append("Client-ID",e),r&&p.append("Authorization",`${u==="helix"?s??"Bearer":"OAuth"} ${r}`);const v={...a,method:n.method??"GET",headers:p,body:m};return await fetch(`${_}${g}`,v)}async function oo(n,e,r,s,a={}){const u=await os(n,e,r,s,a);return await Is(u,n),await ao(u)}function I(n){return{broadcaster_id:c(n)}}class uo extends de{constructor(e){super("Invalid token supplied",e)}}let et=class extends l{_obtainmentDate;constructor(e){super(e),this._obtainmentDate=new Date}get clientId(){return this[t].client_id}get userId(){return this[t].user_id??null}get userName(){return this[t].login??null}get scopes(){return this[t].scopes}get expiryDate(){return B(this[t].expires_in,e=>new Date(this._obtainmentDate.getTime()+e*1e3))}};et=i([o("auth","TokenInfo","clientId")],et);async function Ao(n,e){try{const r=await oo({type:"auth",url:"validate"},e,n);return new et(r)}catch(r){throw r instanceof oe&&r.statusCode===401?new uo({cause:r}):r}}const Mo=new Map([["channel_commercial",["channel:edit:commercial"]],["channel_editor",["channel:manage:broadcast"]],["channel_read",["channel:read:stream_key"]],["channel_subscriptions",["channel:read:subscriptions"]],["user_blocks_read",["user:read:blocked_users"]],["user_blocks_edit",["user:manage:blocked_users"]],["user_follows_edit",["user:edit:follows"]],["user_read",["user:read:email"]],["user_subscriptions",["user:read:subscriptions"]],["user:edit:broadcast",["channel:manage:broadcast","channel:manage:extensions"]]]);function Ro(n,e){if(e?.length){const r=new Set(n.flatMap(s=>[s,...Mo.get(s)??[]]));if(e.every(s=>!r.has(s))){const s=e.join(", ");throw new Error(`This token does not have any of the requested scopes (${s}) and can not be upgraded.
If you need dynamically upgrading scopes, please implement the AuthProvider interface accordingly:

	https://twurple.js.org/reference/auth/interfaces/AuthProvider.html`)}}}function Po(n,e){for(const r of e)Ro(n,r)}async function Ho(n,e,r,s,a){if(a?.length||!r){const u=await Ao(e,n);if(!u.userId)throw new Error("Trying to use an app access token as a user access token");const _=s??u.scopes;return a&&Po(_,a.filter(g=>!!g)),[_,u.userId]}return[s,r]}class ko{constructor(e,r,s,a=!1){this.owner=e,this.event=r,this.listener=s,this._internal=a}unbind(){this.owner.removeListener(this)}}class us{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(e,r){return this._addListener(!1,e,r)}addListener(e,r){return this._addListener(!1,e,r)}removeListener(e,r){this._removeListener(!1,e,r)}registerEvent(){const e=r=>this.addListener(e,r);return e}emit(e,...r){if(this._eventListeners.has(e))for(const s of this._eventListeners.get(e))s(...r);if(this._internalEventListeners.has(e))for(const s of this._internalEventListeners.get(e))s(...r)}registerInternalEvent(){const e=r=>this.addInternalListener(e,r);return e}addInternalListener(e,r){return this._addListener(!0,e,r)}removeInternalListener(e,r){this._removeListener(!0,e,r)}_addListener(e,r,s){const a=e?this._eventListeners:this._internalEventListeners;return a.has(r)?a.get(r).push(s):a.set(r,[s]),new ko(this,r,s,e)}_removeListener(e,r,s){const a=e?this._eventListeners:this._internalEventListeners;if(!r)a.clear();else if(typeof r=="object"){const u=r;this._removeListener(u._internal,u.event,u.listener)}else{const u=r;if(a.has(u))if(s){const _=a.get(u);let g=0;for(;(g=_.indexOf(s))!==-1;)_.splice(g,1)}else a.delete(u)}}}let tt=class{_clientId;_accessToken;_userId;_scopes;constructor(e,r,s){this._clientId=e||"",this._accessToken=typeof r=="string"?{accessToken:r,refreshToken:null,scope:s??[],expiresIn:null,obtainmentTimestamp:Date.now()}:r,this._scopes=s}get clientId(){return this._clientId}async getAccessTokenForUser(e,...r){return await this._getAccessToken(r)}async getAccessTokenForIntent(e,...r){return await this._getAccessToken(r)}async getAnyAccessToken(){return await this._getAccessToken()}getCurrentScopesForUser(){return this._scopes??[]}async _getAccessToken(e){const[r,s]=await Ho(this._clientId,this._accessToken.accessToken,this._userId,this._scopes,e);return this._scopes=r,this._userId=s,{...this._accessToken,userId:s}}};i([h(!1)],tt.prototype,"_clientId",void 0);i([h(!1)],tt.prototype,"_accessToken",void 0);tt=i([o("auth","StaticAuthProvider","clientId")],tt);const cs=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";var V,y;(function(n){n[n.CRITICAL=0]="CRITICAL",n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n[n.INFO=3]="INFO",n[n.DEBUG=4]="DEBUG",n[n.TRACE=7]="TRACE"})(y||(y={}));function wa(n){if(typeof n=="number"){if(Object.prototype.hasOwnProperty.call(y,n))return n;var e=Object.keys(y).map(function(s){return parseInt(s,10)}).filter(function(s){return!isNaN(s)&&s<n});return e.length?Math.max.apply(Math,e):y.WARNING}var r=n.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(y,r))throw new Error("Unknown log level string: ".concat(n));return y[r]}var qo=cs?console.log.bind(console):console.debug.bind(console),co=(V={},V[y.CRITICAL]=console.error.bind(console),V[y.ERROR]=console.error.bind(console),V[y.WARNING]=console.warn.bind(console),V[y.INFO]=console.info.bind(console),V[y.DEBUG]=qo.bind(console),V[y.TRACE]=console.trace.bind(console),V),Wo={},_s,gs,rt=typeof process>"u"?[]:(gs=(_s=Wo.LOGGING)===null||_s===void 0?void 0:_s.split(";").map(function(n){var e=n.split("=",2),r=e[0],s=e[1];return s?[r==="default"?void 0:r.split(":"),wa(s)]:null}).filter(function(n){return!!n}).sort(function(n,e){var r,s,a=n[0],u=e[0];return((r=u?.length)!==null&&r!==void 0?r:0)-((s=a?.length)!==null&&s!==void 0?s:0)}))!==null&&gs!==void 0?gs:[],ps=rt.findIndex(function(n){var e=n[0];return!e}),lo=void 0;ps!==-1&&(lo=rt[ps][1],rt.splice(ps));function Oo(n,e){return e.length<=n.length&&e.every(function(r,s){return r===n[s]})}function ho(n){for(var e=n.split(":"),r=0,s=rt;r<s.length;r++){var a=s[r],u=a[0],_=a[1];if(Oo(e,u))return _}return lo}var _o=(function(){function n(e){var r=e.name,s=e.minLevel,a=e.emoji,u=a===void 0?!1:a,_=e.colors,g=e.timestamps,p=g===void 0?cs:g,m,v;this._name=r,this._minLevel=(v=(m=O(s,function(T){return wa(T)}))!==null&&m!==void 0?m:ho(r))!==null&&v!==void 0?v:y.WARNING,this._emoji=u,this._colors=_,this._timestamps=p}return n.prototype.crit=function(e){this.log(y.CRITICAL,e)},n.prototype.error=function(e){this.log(y.ERROR,e)},n.prototype.warn=function(e){this.log(y.WARNING,e)},n.prototype.info=function(e){this.log(y.INFO,e)},n.prototype.debug=function(e){this.log(y.DEBUG,e)},n.prototype.trace=function(e){this.log(y.TRACE,e)},n})(),$o=(function(n){Xa(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(r,s){if(!(r>this._minLevel)){var a=co[r],u="[".concat(this._name,"] ").concat(s);this._timestamps&&(u="[".concat(new Date().toISOString(),"] ").concat(s)),a(u)}},e})(_o),Go=(function(){function n(e){var r=e.name,s=e.minLevel,a=e.custom,u;this._minLevel=(u=O(s,function(_){return wa(_)}))!==null&&u!==void 0?u:ho(r),this._override=typeof a=="function"?{log:a}:a}return n.prototype.log=function(e,r){this._shouldLog(e)&&this._override.log(e,r)},n.prototype.crit=function(e){this._override.crit?this._shouldLog(y.CRITICAL)&&this._override.crit(e):this.log(y.CRITICAL,e)},n.prototype.error=function(e){this._override.error?this._shouldLog(y.ERROR)&&this._override.error(e):this.log(y.ERROR,e)},n.prototype.warn=function(e){this._override.warn?this._shouldLog(y.WARNING)&&this._override.warn(e):this.log(y.WARNING,e)},n.prototype.info=function(e){this._override.info?this._shouldLog(y.INFO)&&this._override.info(e):this.log(y.INFO,e)},n.prototype.debug=function(e){this._override.debug?this._shouldLog(y.DEBUG)&&this._override.debug(e):this.log(y.DEBUG,e)},n.prototype.trace=function(e){this._override.trace?this._shouldLog(y.TRACE)&&this._override.trace(e):this.log(y.TRACE,e)},n.prototype._shouldLog=function(e){return this._minLevel===void 0||this._minLevel>=e},n})(),j,Q,z,Fo=(j={},j[y.CRITICAL]="ðŸ›‘",j[y.ERROR]="âŒ",j[y.WARNING]="âš ï¸ ",j[y.INFO]="â„¹ï¸ ",j[y.DEBUG]="ðŸž",j[y.TRACE]="ðŸ¾",j),Lo={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},Vo={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function ds(n,e,r){return function(s){return"\x1B[".concat(n,"m").concat(r?r(s):s,"\x1B[").concat(e,"m")}}function W(n){return ds(Lo[n],39)}function Se(n,e){return ds(Vo[n],49,e)}var jo=(Q={},Q[y.CRITICAL]=W("red"),Q[y.ERROR]=W("redBright"),Q[y.WARNING]=W("yellow"),Q[y.INFO]=W("blue"),Q[y.DEBUG]=W("magenta"),Q[y.TRACE]=ds(0,0),Q),Ua=(z={},z[y.CRITICAL]=Se("bgRed",W("white")),z[y.ERROR]=Se("bgRedBright",W("white")),z[y.WARNING]=Se("bgYellow",W("black")),z[y.INFO]=Se("bgBlue",W("white")),z[y.DEBUG]=Se("bgMagenta",W("black")),z[y.TRACE]=ds(7,27),z),Qo=(function(n){Xa(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(r,s){var a,u,_;if(!(r>this._minLevel)){var g=co[r],p="";if(this._timestamps&&(p+="[".concat(new Date().toISOString(),"] ")),this._emoji){var m=Fo[r];p+="".concat(m," ")}var v=(_=(a=this._colors)!==null&&a!==void 0?a:(u=process.stdout)===null||u===void 0?void 0:u.isTTY)!==null&&_!==void 0?_:!0;v?p+="".concat(Ua[r](this._name)," ").concat(Ua[r](y[r])," ").concat(jo[r](s)):p+="[".concat(this._name,":").concat(y[r].toLowerCase(),"] ").concat(s),g(p)}},e})(_o);function Je(n){return n.custom?new Go(n):cs?new Qo(n):new $o(n)}class Sa extends Error{constructor(...e){var r;super(...e),Object.setPrototypeOf(this,new.target.prototype),(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}class Ba extends Sa{}class go extends Sa{}class Ta extends Sa{constructor(e){super(`Need to retry after ${e} ms`),this._retryAt=Date.now()+e}get retryAt(){return this._retryAt}}class Ca{constructor({logger:e}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=Je({name:"rate-limiter",emoji:!0,...e})}async request(e,r){return this._logger.trace("request start"),await new Promise((s,a)=>{var u;const _={req:e,resolve:s,reject:a,limitReachedBehavior:(u=r?.limitReachedBehavior)!==null&&u!==void 0?u:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(_)):this._runRequestBatch([_])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var e,r,s,a,u;return{lastKnownLimit:(r=(e=this._parameters)===null||e===void 0?void 0:e.limit)!==null&&r!==void 0?r:null,lastKnownRemainingRequests:(a=(s=this._parameters)===null||s===void 0?void 0:s.remaining)!==null&&a!==void 0?a:null,lastKnownResetDate:B((u=this._parameters)===null||u===void 0?void 0:u.resetsAt,_=>new Date(_))}}async _runRequestBatch(e){this._logger.trace(`runRequestBatch start specs:${e.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${e.length} requests, new queue length is ${this._queue.length}`);const r=e.map(async _=>{const{req:g,resolve:p,reject:m}=_;try{const v=await this.doRequest(g),T=this.needsToRetryAfter(v);if(T!==null)throw this._queue.unshift(_),this._logger.info(`Retrying after ${T} ms`),new Ta(T);const M=this.getParametersFromResponse(v);return p(v),M}catch(v){if(v instanceof Ta)throw v;m(v);return}}),s=await Promise.allSettled(r),a=s.filter(_=>_.status==="rejected"),u=Date.now();if(a.length){this._logger.trace("runRequestBatch some rejected");const g=Math.max(u,...a.map(p=>p.reason.retryAt))-u;this._logger.warn(`Waiting for ${g} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},g)}else{this._logger.trace("runRequestBatch none rejected");const _=s.filter(g=>g.status==="fulfilled"&&g.value!==void 0).map(g=>g.value).reduce((g,p)=>g?p.remaining<g.remaining?p:g:p,void 0);if(this._batchRunning=!1,_)if(this._parameters=_,_.resetsAt<u||_.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{const g=_.resetsAt-u;this._logger.trace(`runRequestBatch delay:${g}`),this._logger.warn(`Waiting for ${g} ms because the rate limit was reached`),this._queue=this._queue.filter(p=>{switch(p.limitReachedBehavior){case"enqueue":return!0;case"null":return p.resolve(null),!1;case"throw":return p.reject(new go("Request removed from queue because the rate limit was reached")),!1;default:throw new Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},g)}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);const e=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,r=this._queue.splice(0,e);r.length&&this._runRequestBatch(r),this._logger.trace("runNextBatch end")}}class zo{constructor(e){this._children=new Map,this._paused=!1,this._partitionKeyCallback=e.getPartitionKey,this._createChildCallback=e.createChild}async request(e,r){const s=this._partitionKeyCallback(e);return await this._getChild(s).request(e,r)}clear(){for(const e of this._children.values())e.clear()}pause(){this._paused=!0;for(const e of this._children.values())e.pause()}resume(){this._paused=!1;for(const e of this._children.values())e.resume()}getChildStats(e){if(!this._children.has(e))return null;const r=this._children.get(e);return r instanceof Ca?r.stats:null}_getChild(e){if(this._children.has(e))return this._children.get(e);const r=this._createChildCallback(e);return this._paused&&r.pause(),this._children.set(e,r),r}}class Ko{constructor({logger:e,bucketSize:r,timeFrame:s,doRequest:a,getPartitionKey:u}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._counterTimers=new Set,this._paused=!1,this._destroyed=!1,this._logger=Je({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=r,this._timeFrame=s,this._callback=a,this._partitionKeyCallback=u}async request(e,r){return await new Promise((s,a)=>{var u,_;if(this._destroyed){a(new Ba("Rate limiter was destroyed"));return}const g={req:e,resolve:s,reject:a,limitReachedBehavior:(u=r?.limitReachedBehavior)!==null&&u!==void 0?u:"enqueue"},p=this._partitionKeyCallback(e),m=(_=this._usedFromBucket.get(p))!==null&&_!==void 0?_:0;if(m>=this._bucketSize||this._paused)switch(g.limitReachedBehavior){case"enqueue":{const v=this._getPartitionedQueue(p);v.push(g),m+v.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${p?`partition ${p}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${v.length}`):this._logger.info(`Enqueueing request for ${p?`partition ${p}`:"default partition"} because the rate limiter is paused; queue size is ${v.length}`);break}case"null":{g.resolve(null),this._paused?this._logger.info(`Returning null for request for ${p?`partition ${p}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${p?`partition ${p}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{g.reject(new go(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${p?`partition ${p}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(g,p)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const e of this._partitionedQueue.keys())this._runNextRequest(e)}destroy(){this._paused=!1,this._destroyed=!0,this._counterTimers.forEach(e=>{clearTimeout(e)});for(const e of this._partitionedQueue.values())for(const r of e)r.reject(new Ba("Rate limiter was destroyed"));this._partitionedQueue.clear()}_getPartitionedQueue(e){if(this._partitionedQueue.has(e))return this._partitionedQueue.get(e);const r=[];return this._partitionedQueue.set(e,r),r}async _runRequest(e,r){var s;const a=this._getPartitionedQueue(r);this._logger.debug(`doing a request for ${r?`partition ${r}`:"default partition"}, new queue length is ${a.length}`),this._usedFromBucket.set(r,((s=this._usedFromBucket.get(r))!==null&&s!==void 0?s:0)+1);const{req:u,resolve:_,reject:g}=e;try{_(await this._callback(u))}catch(p){g(p)}finally{const p=setTimeout(()=>{this._counterTimers.delete(p);const m=this._usedFromBucket.get(r)-1;this._usedFromBucket.set(r,m),a.length&&m<this._bucketSize&&this._runNextRequest(r)},this._timeFrame);this._counterTimers.add(p)}}_runNextRequest(e){if(this._paused)return;const s=this._getPartitionedQueue(e).shift();s&&this._runRequest(s,e)}}class Yo extends de{}class Jo extends Ca{async doRequest({options:e,clientId:r,accessToken:s,authorizationType:a,fetchOptions:u}){return await os(e,r,s,a,u)}needsToRetryAfter(e){return e.status===429&&(!e.headers.has("ratelimit-remaining")||Number(e.headers.get("ratelimit-remaining"))===0)?+e.headers.get("ratelimit-reset")*1e3-Date.now():null}getParametersFromResponse(e){const{headers:r}=e;return{limit:+r.get("ratelimit-limit"),remaining:+r.get("ratelimit-remaining"),resetsAt:+r.get("ratelimit-reset")*1e3}}}function Xo(n){switch(typeof n){case"undefined":return"";case"object":{if(n===null)return"";if("cacheKey"in n)return n.cacheKey;const e=JSON.stringify(n);if(e!=="{}")return e}default:return n.toString()}}function po(n,e,r){return[n,...e.map(Xo)].join("/")+(r?"/":"")}const G=Symbol("cache");function ls(n){var e,r;return r=class extends n{constructor(){super(...arguments),this[e]=new Map}getFromCache(s){if(this._cleanCache(),this[G].has(s)){const a=this[G].get(s);if(a)return a.value}}setCache(s,a,u){this[G].set(s,{value:a,expires:Date.now()+u*1e3})}removeFromCache(s,a){const u=this._getInternalCacheKey(s,a);a?this[G].forEach((_,g)=>{g.startsWith(u)&&this[G].delete(g)}):this[G].delete(u)}_cleanCache(){const s=Date.now();this[G].forEach((a,u)=>{a.expires<s&&this[G].delete(u)})}_getInternalCacheKey(s,a){if(typeof s=="string"){let u=s;return u.endsWith("/")||(u+="/"),u}else{const u=s.shift();return po(u,s,a)}}},e=G,r}function U(n=1/0){return function(e,r,s){if(s.get){const a=s.get;s.get=function(){const u=po(r,[]),_=this.getFromCache(u);if(_)return _;const g=a.call(this);return this.setCache(u,g,n),g}}return s}}var bs={},ms,Na;function Zo(){if(Na)return ms;Na=1;function n(e,r){typeof r=="boolean"&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return ms=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var r=new Date().getTime();if(e&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var s=this._timeouts.shift();if(s===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),s=this._cachedTimeouts.slice(-1);else return!1;var a=this;return this._timer=setTimeout(function(){a._attempts++,a._operationTimeoutCb&&(a._timeout=setTimeout(function(){a._operationTimeoutCb(a._attempts)},a._operationTimeout),a._options.unref&&a._timeout.unref()),a._fn(a._attempts)},s),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,r){this._fn=e,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var s=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){s._operationTimeoutCb()},s._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},r=null,s=0,a=0;a<this._errors.length;a++){var u=this._errors[a],_=u.message,g=(e[_]||0)+1;e[_]=g,g>=s&&(r=u,s=g)}return r},ms}var Da;function eu(){return Da||(Da=1,(function(n){var e=Zo();n.operation=function(r){var s=n.timeouts(r);return new e(s,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},n.timeouts=function(r){if(r instanceof Array)return[].concat(r);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var a in r)s[a]=r[a];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var u=[],_=0;_<s.retries;_++)u.push(this.createTimeout(_,s));return r&&r.forever&&!u.length&&u.push(this.createTimeout(_,s)),u.sort(function(g,p){return g-p}),u},n.createTimeout=function(r,s){var a=s.randomize?Math.random()+1:1,u=Math.round(a*Math.max(s.minTimeout,1)*Math.pow(s.factor,r));return u=Math.min(u,s.maxTimeout),u},n.wrap=function(r,s,a){if(s instanceof Array&&(a=s,s=null),!a){a=[];for(var u in r)typeof r[u]=="function"&&a.push(u)}for(var _=0;_<a.length;_++){var g=a[_],p=r[g];r[g]=(function(v){var T=n.operation(s),M=Array.prototype.slice.call(arguments,1),So=M.pop();M.push(function(fa){T.retry(fa)||(fa&&(arguments[0]=T.mainError()),So.apply(this,arguments))}),T.attempt(function(){v.apply(r,M)})}).bind(r,p),r[g].options=s}}})(bs)),bs}var ys,Aa;function tu(){return Aa||(Aa=1,ys=eu()),ys}var ru=tu();function su(n={}){const{count:e=10,period:r="all",startDate:s,contextUserId:a}=n;return{count:e.toString(),period:r,started_at:s?.toISOString(),user_id:a}}class N{_client;constructor(e){this._client=e}_getUserContextIdWithDefault(e){return this._client._getUserIdFromRequestContext(e)??e}}i([h(!1)],N.prototype,"_client",void 0);let st=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}get rank(){return this[t].rank}get amount(){return this[t].score}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],st.prototype,"_client",void 0);st=i([o("api","HelixBitsLeaderboardEntry","userId")],st);let Ee=class extends l{_client;constructor(e,r){super(e),this._client=r}get entries(){return this[t].data.map(e=>new st(e,this._client))}get totalCount(){return this[t].total}};i([h(!1)],Ee.prototype,"_client",void 0);i([U()],Ee.prototype,"entries",null);Ee=i([ls,o("api","HelixBitsLeaderboard")],Ee);let fs=class extends l{constructor(e){super(to(e,r=>r.prefix.toLowerCase()))}getCheermoteDisplayInfo(e,r,s){e=e.toLowerCase();const{background:a,state:u,scale:_}=s,{tiers:g}=this[t][e],p=g.sort((m,v)=>v.min_bits-m.min_bits).find(m=>m.min_bits<=r);if(!p)throw new P(`Cheermote "${e}" does not have an applicable tier for ${r} bits`);return{url:p.images[a][u][_],color:p.color}}getPossibleNames(){return Object.keys(this[t])}};fs=i([o("api","HelixCheermoteList")],fs);let Es=class extends N{async getLeaderboard(e,r={}){const s=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:c(e),scopes:["bits:read"],query:su(r)});return new Ee(s,this._client)}async getCheermotes(e){const r=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:O(e,c),query:O(e,I)});return new fs(r.data)}};Es=i([o("api","HelixBitsApi")],Es);function nu(n){return{game_id:n.gameId,broadcaster_language:n.language,title:n.title,delay:n.delay?.toString(),tags:n.tags,content_classification_labels:n.contentClassificationLabels,is_branded_content:n.isBrandedContent}}function iu(n,e){return{broadcaster_id:c(n),length:e}}function Ma(n,e){return{broadcaster_id:c(n),user_id:c(e)}}function vs(n,e){return{broadcaster_id:c(n),user_id:O(e,c)}}function Ra(n,e){return{broadcaster_id:O(e,c),user_id:c(n)}}function f(n,e){return{[n]:e}}function Pa(n){return{user_id:c(n)}}function bo(n,e){return{broadcaster_id:n,moderator_id:e}}function hs(n,e){return{broadcaster_id:c(n),id:e}}function mo(n,e){return{broadcaster_id:c(n),user_id:e.map(c)}}let ie=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].user_id}get name(){return this[t].user_login}get displayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],ie.prototype,"_client",void 0);ie=i([o("api","HelixUserRelation","id")],ie);class H{_callOptions;_queryParamName;_matchKey;_mapper;_limitPerRequest;_client;_requestedIds=[];_requestResolversById=new Map;_delay;_waitTimer=null;constructor(e,r,s,a,u,_=100){this._callOptions=e,this._queryParamName=r,this._matchKey=s,this._mapper=u,this._limitPerRequest=_,this._client=a,this._delay=a._batchDelay}async request(e){const{promise:r,resolve:s,reject:a}=so();return this._requestedIds.includes(e)||this._requestedIds.push(e),this._requestResolversById.has(e)?this._requestResolversById.get(e).push({resolve:s,reject:a}):this._requestResolversById.set(e,[{resolve:s,reject:a}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await r}async _handleBatch(e){try{const{data:r}=await this._doRequest(e),s=to(r,this._matchKey);for(const a of e){for(const u of this._requestResolversById.get(a)??[])Object.prototype.hasOwnProperty.call(s,a)?u.resolve(this._mapper(s[a])):u.resolve(null);this._requestResolversById.delete(a)}}catch{await Promise.all(e.map(async s=>{try{const a=await this._doRequest([s]);for(const u of this._requestResolversById.get(s)??[])u.resolve(a.data.length?this._mapper(a.data[0]):null)}catch(a){for(const u of this._requestResolversById.get(s)??[])u.reject(a)}this._requestResolversById.delete(s)}))}}async _doRequest(e){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:e}})}}i([h(!1)],H.prototype,"_client",void 0);Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator??Symbol.for("Symbol.asyncIterator"));let x=class{_callOptions;_mapper;_limitPerPage;_client;_currentCursor;_isFinished=!1;_currentData;constructor(e,r,s,a=100){this._callOptions=e,this._mapper=s,this._limitPerPage=a,this._client=r}get current(){return this._currentData?.data}async getNext(){if(this._isFinished)return[];const e=await this._fetchData();return e.data?.length?this._processResult(e):(this._isFinished=!0,[])}async getAll(){this.reset();const e=[];do{const r=await this.getNext();if(!r.length)break;e.push(...r)}while(this._currentCursor);return this.reset(),e}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async*[Symbol.asyncIterator](){for(this.reset();;){const e=await this.getNext();if(!e.length)break;yield*e[Symbol.iterator]()}}async _fetchData(e={}){return await this._client.callApi({type:"helix",...this._callOptions,...e,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...e.query}})}_processResult(e){return this._currentCursor=typeof e.pagination=="string"?e.pagination:e.pagination?.cursor,this._currentCursor===void 0&&(this._isFinished=!0),this._currentData=e,e.data.reduce((r,s)=>{const a=this._mapper(s);return Array.isArray(a)?[...r,...a]:[...r,a]},[])}};i([h(!1)],x.prototype,"_client",void 0);x=i([o("api","HelixPaginatedRequest")],x);let ue=class extends x{async getTotalCount(){return(this._currentData??await this._fetchData({query:{after:void 0}})).total}};ue=i([o("api","HelixPaginatedRequestWithTotal")],ue);function A(n,e,r){let s;return{get data(){return s??=n.data?.map(a=>new e(a,r))??[]},cursor:typeof n.pagination=="string"?n.pagination:n.pagination?.cursor}}function X(n,e,r){let s;return{get data(){return s??=n.data?.map(a=>new e(a,r))??[]},cursor:n.pagination.cursor,total:n.total}}function S({after:n,before:e,limit:r}={}){return{after:n,before:e,first:r?.toString()}}let ge=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].broadcaster_id}get name(){return this[t].broadcaster_login}get displayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get language(){return this[t].broadcaster_language}get gameId(){return this[t].game_id}get gameName(){return this[t].game_name}async getGame(){return this[t].game_id?d(await this._client.games.getGameById(this[t].game_id)):null}get title(){return this[t].title}get delay(){return this[t].delay}get tags(){return this[t].tags}get contentClassificationLabels(){return this[t].content_classification_labels}get isBrandedContent(){return this[t].is_branded_content}};i([h(!1)],ge.prototype,"_client",void 0);ge=i([o("api","HelixChannel","id")],ge);let nt=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get creationDate(){return new Date(this[t].created_at)}};i([h(!1)],nt.prototype,"_client",void 0);nt=i([o("api","HelixChannelEditor","userId")],nt);let xe=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get followDate(){return new Date(this[t].followed_at)}};i([h(!1)],xe.prototype,"_client",void 0);xe=i([o("api","HelixChannelFollower","userId")],xe);let Ue=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get followDate(){return new Date(this[t].followed_at)}};i([h(!1)],Ue.prototype,"_client",void 0);Ue=i([o("api","HelixFollowedChannel","broadcasterId")],Ue);let xs=class extends l{get snoozeCount(){return this[t].snooze_count}get snoozeRefreshDate(){return this[t].snooze_refresh_at?new Date(this[t].snooze_refresh_at*1e3):null}get nextAdDate(){return this[t].next_ad_at?new Date(this[t].next_ad_at*1e3):null}get duration(){return this[t].duration}get lastAdDate(){return this[t].last_ad_at?new Date(this[t].last_ad_at*1e3):null}get prerollFreeTime(){return this[t].preroll_free_time}};xs=i([o("api","HelixAdSchedule")],xs);let Us=class extends l{get snoozeCount(){return this[t].snooze_count}get snoozeRefreshDate(){return new Date(this[t].snooze_refresh_at*1e3)}get nextAdDate(){return new Date(this[t].next_ad_at*1e3)}};Us=i([o("api","HelixSnoozeNextAdResult")],Us);let it=class extends N{_getChannelByIdBatcher=new H({url:"channels"},"broadcaster_id","broadcaster_id",this._client,e=>new ge(e,this._client));async getChannelInfoById(e){const r=c(e),s=await this._client.callApi({type:"helix",url:"channels",userId:r,query:I(r)});return B(s.data[0],a=>new ge(a,this._client))}async getChannelInfoByIdBatched(e){return await this._getChannelByIdBatcher.request(c(e))}async getChannelInfoByIds(e){const r=e.map(c);return(await this._client.callApi({type:"helix",url:"channels",query:f("broadcaster_id",r)})).data.map(a=>new ge(a,this._client))}async updateChannelInfo(e,r){await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:c(e),scopes:["channel:manage:broadcast"],query:I(e),jsonBody:nu(r)})}async startChannelCommercial(e,r){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:c(e),scopes:["channel:edit:commercial"],jsonBody:iu(e,r)})}async getChannelEditors(e){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:c(e),scopes:["channel:read:editors"],query:I(e)})).data.map(s=>new nt(s,this._client))}async getVips(e,r){const s=await this._client.callApi({type:"helix",url:"channels/vips",userId:c(e),scopes:["channel:read:vips","channel:manage:vips"],query:{...I(e),...S(r)}});return A(s,ie,this._client)}getVipsPaginated(e){return new x({url:"channels/vips",userId:c(e),scopes:["channel:read:vips","channel:manage:vips"],query:I(e)},this._client,r=>new ie(r,this._client))}async checkVipForUsers(e,r){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:c(e),scopes:["channel:read:vips","channel:manage:vips"],query:mo(e,r)})).data.map(a=>new ie(a,this._client))}async checkVipForUser(e,r){const s=c(r);return(await this.checkVipForUsers(e,[s])).some(u=>u.id===s)}async addVip(e,r){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:c(e),scopes:["channel:manage:vips"],query:Ma(e,r)})}async removeVip(e,r){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:c(e),scopes:["channel:manage:vips"],query:Ma(e,r)})}async getChannelFollowerCount(e){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:c(e),query:{...vs(e),...S({limit:1})}})).total}async getChannelFollowers(e,r,s){const a=await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:c(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...vs(e,r),...S(s)}});return X(a,xe,this._client)}getChannelFollowersPaginated(e){return new ue({url:"channels/followers",method:"GET",userId:c(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:vs(e)},this._client,r=>new xe(r,this._client))}async getFollowedChannels(e,r,s){const a=await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:c(e),scopes:["user:read:follows"],query:{...Ra(e,r),...S(s)}});return X(a,Ue,this._client)}getFollowedChannelsPaginated(e,r){return new ue({url:"channels/followed",method:"GET",userId:c(e),scopes:["user:read:follows"],query:Ra(e,r)},this._client,s=>new Ue(s,this._client))}async getAdSchedule(e){const r=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:c(e),scopes:["channel:read:ads"],query:I(e)});return new xs(r.data[0])}async snoozeNextAd(e){const r=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:c(e),scopes:["channel:manage:ads"],query:I(e)});return new Us(r.data[0])}};i([h(!1)],it.prototype,"_getChannelByIdBatcher",void 0);it=i([o("api","HelixChannelApi")],it);function au(n,e){return{broadcaster_id:c(n),only_manageable_rewards:e?.toString()}}function Ha(n,e){return{broadcaster_id:c(n),id:e}}function ka(n){const e={title:n.title,cost:n.cost,prompt:n.prompt,background_color:n.backgroundColor,is_enabled:n.isEnabled,is_user_input_required:n.userInputRequired,should_redemptions_skip_request_queue:n.autoFulfill};return n.maxRedemptionsPerStream!==void 0&&(e.is_max_per_stream_enabled=!!n.maxRedemptionsPerStream,e.max_per_stream=n.maxRedemptionsPerStream??0),n.maxRedemptionsPerUserPerStream!==void 0&&(e.is_max_per_user_per_stream_enabled=!!n.maxRedemptionsPerUserPerStream,e.max_per_user_per_stream=n.maxRedemptionsPerUserPerStream??0),n.globalCooldown!==void 0&&(e.is_global_cooldown_enabled=!!n.globalCooldown,e.global_cooldown_seconds=n.globalCooldown??0),"isPaused"in n&&(e.is_paused=n.isPaused),e}function qa(n,e,r){return{broadcaster_id:c(n),reward_id:e,id:r}}function Wa(n,e,r,s){return{broadcaster_id:c(n),reward_id:e,status:r,sort:s.newestFirst?"NEWEST":"OLDEST"}}let re=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}getImageUrl(e){const r=`url_${e}x`;return this[t].image?.[r]??this[t].default_image[r]}get backgroundColor(){return this[t].background_color}get isEnabled(){return this[t].is_enabled}get cost(){return this[t].cost}get title(){return this[t].title}get prompt(){return this[t].prompt}get userInputRequired(){return this[t].is_user_input_required}get maxRedemptionsPerStream(){return this[t].max_per_stream_setting.is_enabled?this[t].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[t].max_per_user_per_stream_setting.is_enabled?this[t].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[t].global_cooldown_setting.is_enabled?this[t].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[t].is_paused}get isInStock(){return this[t].is_in_stock}get redemptionsThisStream(){return this[t].redemptions_redeemed_current_stream}get autoFulfill(){return this[t].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[t].cooldown_expires_at?new Date(this[t].cooldown_expires_at):null}};i([h(!1)],re.prototype,"_client",void 0);re=i([o("api","HelixCustomReward","id")],re);let se=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get userInput(){return this[t].user_input}get isFulfilled(){return this[t].status==="FULFILLED"}get isCanceled(){return this[t].status==="CANCELED"}get redemptionDate(){return new Date(this[t].redeemed_at)}get rewardId(){return this[t].reward.id}get rewardTitle(){return this[t].reward.title}get rewardPrompt(){return this[t].reward.prompt}get rewardCost(){return this[t].reward.cost}async getReward(){return d(await this._client.channelPoints.getCustomRewardById(this[t].broadcaster_id,this[t].reward.id))}async updateStatus(e){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[t].broadcaster_id,this[t].reward.id,[this[t].id],e))[0]}};i([h(!1)],se.prototype,"_client",void 0);se=i([o("api","HelixCustomRewardRedemption","id")],se);let Bs=class extends N{async getCustomRewards(e,r){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:c(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:au(e,r)})).data.map(a=>new re(a,this._client))}async getCustomRewardsByIds(e,r){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:c(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:hs(e,r)})).data.map(a=>new re(a,this._client)):[]}async getCustomRewardById(e,r){const s=await this.getCustomRewardsByIds(e,[r]);return s.length?s[0]:null}async createCustomReward(e,r){const s=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:c(e),scopes:["channel:manage:redemptions"],query:I(e),jsonBody:ka(r)});return new re(s.data[0],this._client)}async updateCustomReward(e,r,s){const a=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:c(e),scopes:["channel:manage:redemptions"],query:Ha(e,r),jsonBody:ka(s)});return new re(a.data[0],this._client)}async deleteCustomReward(e,r){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:c(e),scopes:["channel:manage:redemptions"],query:Ha(e,r)})}async getRedemptionsByIds(e,r,s){return s.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:c(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:qa(e,r,s)})).data.map(u=>new se(u,this._client)):[]}async getRedemptionById(e,r,s){const a=await this.getRedemptionsByIds(e,r,[s]);return a.length?a[0]:null}async getRedemptionsForBroadcaster(e,r,s,a){const u=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:c(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...Wa(e,r,s,a),...S(a)}});return A(u,se,this._client)}getRedemptionsForBroadcasterPaginated(e,r,s,a){return new x({url:"channel_points/custom_rewards/redemptions",userId:c(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:Wa(e,r,s,a)},this._client,u=>new se(u,this._client),50)}async updateRedemptionStatusByIds(e,r,s,a){return s.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:c(e),scopes:["channel:manage:redemptions"],query:qa(e,r,s),jsonBody:{status:a}})).data.map(_=>new se(_,this._client)):[]}};Bs=i([o("api","HelixChannelPointsApi")],Bs);let Be=class extends l{get value(){return this[t].value}get decimalPlaces(){return this[t].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[t].currency}};Be=i([o("api","HelixCharityCampaignAmount")],Be);let at=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get charityName(){return this[t].charity_name}get charityDescription(){return this[t].charity_description}get charityLogo(){return this[t].charity_logo}get charityWebsite(){return this[t].charity_website}get currentAmount(){return new Be(this[t].current_amount)}get targetAmount(){return new Be(this[t].target_amount)}};i([h(!1)],at.prototype,"_client",void 0);at=i([o("api","HelixCharityCampaign","id")],at);let ot=class extends l{_client;constructor(e,r){super(e),this._client=r}get campaignId(){return this[t].campaign_id}get donorId(){return this[t].user_id}get donorName(){return this[t].user_login}get donorDisplayName(){return this[t].user_name}async getDonor(){return d(await this._client.users.getUserById(this[t].user_id))}get amount(){return new Be(this[t].amount)}};i([h(!1)],ot.prototype,"_client",void 0);ot=i([o("api","HelixCharityCampaignDonation")],ot);let Ts=class extends N{async getCharityCampaign(e){const r=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:c(e),scopes:["channel:read:charity"],query:I(e)});return new at(r.data[0],this._client)}async getCharityCampaignDonations(e,r){const s=await this._client.callApi({type:"helix",url:"charity/donations",userId:c(e),scopes:["channel:read:charity"],query:{...I(e),...S(r)}});return A(s,ot,this._client)}};Ts=i([o("api","HelixCharityApi")],Ts);class ou extends de{_code;constructor(e,r,s){super(`Chat message to channel ${e} dropped: ${r??"unknown reason"}`),this._code=s}get code(){return this._code}}function uu(n){return{slow_mode:n.slowModeEnabled,slow_mode_wait_time:n.slowModeDelay,follower_mode:n.followerOnlyModeEnabled,follower_mode_duration:n.followerOnlyModeDelay,subscriber_mode:n.subscriberOnlyModeEnabled,emote_mode:n.emoteOnlyModeEnabled,unique_chat_mode:n.uniqueChatModeEnabled,non_moderator_chat_delay:n.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:n.nonModeratorChatDelay}}function cu(n,e){return{user_id:c(n),color:e}}function du(n,e,r){return{from_broadcaster_id:c(n),to_broadcaster_id:c(e),moderator_id:r}}function Oa(n,e){return{broadcaster_id:n,sender_id:e}}function lu(n,e){return{message:n,reply_parent_message_id:e?.replyParentMessageId}}function hu(n,e){return{message:n,reply_parent_message_id:e?.replyParentMessageId,for_source_only:e?.forSourceOnly}}function _u(n){return{broadcaster_id:c(n)}}class yo extends l{get id(){return this[t].id}get name(){return this[t].name}get formats(){return this[t].format}get scales(){return this[t].scale}get themeModes(){return this[t].theme_mode}getStaticImageUrl(e="1.0",r="light"){return this[t].format.includes("static")&&this[t].scale.includes(e)?this.getFormattedImageUrl(e,"static",r):null}getAnimatedImageUrl(e="1.0",r="light"){return this[t].format.includes("animated")&&this[t].scale.includes(e)?this.getFormattedImageUrl(e,"animated",r):null}getFormattedImageUrl(e="1.0",r="static",s="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[t].id}/${r}/${s}/${e}`}}let Te=class extends yo{getImageUrl(e){return this[t].images[`url_${e}x`]}};Te=i([o("api","HelixEmote","id")],Te);let ut=class extends Te{_client;constructor(e,r){super(e),this._client=r}get tier(){return this[t].tier||null}get type(){return this[t].emote_type}get emoteSetId(){return this[t].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[t].emote_set_id])}};i([h(!1)],ut.prototype,"_client",void 0);ut=i([o("api","HelixChannelEmote","id")],ut);let Ns=class extends l{get id(){return this[t].id}getImageUrl(e){return this[t][`image_url_${e}x`]}get title(){return this[t].title}get description(){return this[t].description}get clickAction(){return this[t].click_action}get clickUrl(){return this[t].click_url}};Ns=i([o("api","HelixChatBadgeVersion","id")],Ns);let Ne=class extends l{get id(){return this[t].set_id}get versions(){return this[t].versions.map(e=>new Ns(e))}getVersion(e){return this.versions.find(r=>r.id===e)??null}};i([U()],Ne.prototype,"versions",null);Ne=i([ls,o("api","HelixChatBadgeSet","id")],Ne);let De=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],De.prototype,"_client",void 0);De=i([o("api","HelixChatChatter")],De);let ct=class extends l{get broadcasterId(){return this[t].broadcaster_id}get slowModeEnabled(){return this[t].slow_mode}get slowModeDelay(){return this[t].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[t].follower_mode}get followerOnlyModeDelay(){return this[t].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[t].subscriber_mode}get emoteOnlyModeEnabled(){return this[t].emote_mode}get uniqueChatModeEnabled(){return this[t].unique_chat_mode}};ct=i([o("api","HelixChatSettings","broadcasterId")],ct);let dt=class extends Te{_client;constructor(e,r){super(e),this._client=r}get type(){return this[t].emote_type}get emoteSetId(){return this[t].emote_set_id}get ownerId(){switch(this[t].owner_id){case"0":case"twitch":return null;default:return this[t].owner_id}}async getOwner(){switch(this[t].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[t].owner_id)}}};i([h(!1)],dt.prototype,"_client",void 0);dt=i([o("api","HelixEmoteFromSet","id")],dt);let lt=class extends ct{get nonModeratorChatDelayEnabled(){return this[t].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[t].non_moderator_chat_delay_duration}};lt=i([o("api","HelixPrivilegedChatSettings","broadcasterId")],lt);let ht=class extends l{get id(){return this[t].message_id}get isSent(){return this[t].is_sent}get dropReasonCode(){return this[t].drop_reason?.code}get dropReasonMessage(){return this[t].drop_reason?.message}};ht=i([o("api","HelixSentChatMessage","id")],ht);let _t=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_id}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}};i([h(!1)],_t.prototype,"_client",void 0);_t=i([o("api","HelixSharedChatSessionParticipant","broadcasterId")],_t);let gt=class extends l{_client;constructor(e,r){super(e),this._client=r}get sessionId(){return this[t].session_id}get hostBroadcasterId(){return this[t].host_broadcaster_id}async getHostBroadcaster(){return d(await this._client.users.getUserById(this[t].host_broadcaster_id))}get participants(){return this[t].participants.map(e=>new _t(e,this._client))}get createdDate(){return new Date(this[t].created_at)}get updatedDate(){return new Date(this[t].updated_at)}};i([h(!1)],gt.prototype,"_client",void 0);gt=i([o("api","HelixSharedChatSession","sessionId")],gt);let Ae=class extends yo{_client;constructor(e,r){super(e),this._client=r}get type(){return this[t].emote_type}get emoteSetId(){return this[t].emote_set_id||null}get ownerId(){return this[t].owner_id||null}async getAllEmotesFromSet(){return this[t].emote_set_id?await this._client.chat.getEmotesFromSets([this[t].emote_set_id]):null}async getOwner(){return this[t].owner_id?await this._client.users.getUserById(this[t].owner_id):null}};i([h(!1)],Ae.prototype,"_client",void 0);Ae=i([o("api","HelixUserEmote","id")],Ae);let Ds=class extends N{async getChatters(e,r){const s=c(e),a=await this._client.callApi({type:"helix",url:"chat/chatters",userId:s,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(s),...S(r)}});return X(a,De,this._client)}getChattersPaginated(e){const r=c(e);return new ue({url:"chat/chatters",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(r)},this._client,s=>new De(s,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(r=>new Ne(r))}async getChannelBadges(e){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:c(e),query:I(e)})).data.map(s=>new Ne(s))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(r=>new Te(r))}async getChannelEmotes(e){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:c(e),query:I(e)})).data.map(s=>new ut(s,this._client))}async getEmotesFromSets(e){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:f("emote_set_id",e)})).data.map(s=>new dt(s,this._client))}async getUserEmotes(e,r){const s=c(e),a=await this._client.callApi({type:"helix",url:"chat/emotes/user",userId:c(e),scopes:["user:read:emotes"],query:{...f("user_id",s),...f("broadcasterId",r?.broadcaster?c(r.broadcaster):void 0),...S(r)}});return A(a,Ae,this._client)}getUserEmotesPaginated(e,r){const s=c(e);return new x({url:"chat/emotes/user",userId:s,scopes:["user:read:emotes"],query:{...f("user_id",s),...f("broadcasterId",r?c(r):void 0)}},this._client,a=>new Ae(a,this._client))}async getSettings(e){const r=await this._client.callApi({type:"helix",url:"chat/settings",userId:c(e),query:I(e)});return new ct(r.data[0])}async getSettingsPrivileged(e){const r=c(e),s=await this._client.callApi({type:"helix",url:"chat/settings",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(r)});return new lt(s.data[0])}async updateSettings(e,r){const s=c(e),a=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:s,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(s),jsonBody:uu(r)});return new lt(a.data[0])}async sendChatMessage(e,r,s){const a=c(e),u=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:a,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:Oa(a,this._getUserContextIdWithDefault(a)),jsonBody:lu(r,s)}),_=new ht(u.data[0]);return this._handleUnsentChatMessage(a,_),_}async sendChatMessageAsApp(e,r,s,a){const u=c(e),_=c(r),g=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:Oa(_,u),jsonBody:hu(s,a)}),p=new ht(g.data[0]);return this._handleUnsentChatMessage(_,p),p}async sendAnnouncement(e,r){const s=c(e);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:s,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(s),jsonBody:{message:r.message,color:r.color}})}async getColorsForUsers(e){const r=await this._client.callApi({type:"helix",url:"chat/color",query:f("user_id",e.map(c))});return new Map(r.data.map(s=>[s.user_id,s.color||null]))}async getColorForUser(e){const r=await this._client.callApi({type:"helix",url:"chat/color",userId:c(e),query:f("user_id",c(e))});if(r.data.length)return r.data[0].color||null}async setColorForUser(e,r){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:c(e),scopes:["user:manage:chat_color"],query:cu(e,r)})}async shoutoutUser(e,r){const s=c(e);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:s,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:du(e,r,this._getUserContextIdWithDefault(s))})}async getSharedChatSession(e){const r=c(e),s=await this._client.callApi({type:"helix",url:"shared_chat/session",userId:r,query:_u(r)});return s.data.length===0?null:new gt(s.data[0],this._client)}_createModeratorActionQuery(e){return bo(e,this._getUserContextIdWithDefault(e))}_handleUnsentChatMessage(e,r){if(!r.isSent)throw new ou(e,r.dropReasonMessage,r.dropReasonCode)}};Ds=i([o("api","HelixChatApi")],Ds);function gu(n,e){return{broadcaster_id:c(n),has_delay:e.toString()}}function $a(n){const{filterType:e,ids:r,startDate:s,endDate:a,isFeatured:u}=n;return{[e]:r,started_at:s,ended_at:a,is_featured:u?.toString()}}let pe=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get url(){return this[t].url}get embedUrl(){return this[t].embed_url}get broadcasterId(){return this[t].broadcaster_id}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get creatorId(){return this[t].creator_id}get creatorDisplayName(){return this[t].creator_name}async getCreator(){return d(await this._client.users.getUserById(this[t].creator_id))}get videoId(){return this[t].video_id}async getVideo(){return d(await this._client.videos.getVideoById(this[t].video_id))}get gameId(){return this[t].game_id}async getGame(){return this[t].game_id?d(await this._client.games.getGameById(this[t].game_id)):null}get language(){return this[t].language}get title(){return this[t].title}get views(){return this[t].view_count}get creationDate(){return new Date(this[t].created_at)}get thumbnailUrl(){return this[t].thumbnail_url}get duration(){return this[t].duration}get vodOffset(){return this[t].vod_offset}get isFeatured(){return this[t].is_featured}};i([h(!1)],pe.prototype,"_client",void 0);pe=i([o("api","HelixClip","id")],pe);let pt=class extends N{_getClipByIdBatcher=new H({url:"clips"},"id","id",this._client,e=>new pe(e,this._client));async getClipsForBroadcaster(e,r={}){return await this._getClips({...r,filterType:"broadcaster_id",ids:c(e),userId:c(e)})}getClipsForBroadcasterPaginated(e,r={}){return this._getClipsPaginated({...r,filterType:"broadcaster_id",ids:c(e),userId:c(e)})}async getClipsForGame(e,r={}){return await this._getClips({...r,filterType:"game_id",ids:e})}getClipsForGamePaginated(e,r={}){return this._getClipsPaginated({...r,filterType:"game_id",ids:e})}async getClipsByIds(e){return(await this._getClips({filterType:"id",ids:e})).data}async getClipById(e){const r=await this.getClipsByIds([e]);return r.length?r[0]:null}async getClipByIdBatched(e){return await this._getClipByIdBatcher.request(e)}async createClip(e){const{channel:r,createAfterDelay:s=!1}=e;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:c(r),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:gu(r,s)})).data[0].id}async _getClips(e){if(!e.ids.length)return{data:[]};const r=await this._client.callApi({type:"helix",url:"clips",userId:e.userId,query:{...$a(e),...S(e)}});return A(r,pe,this._client)}_getClipsPaginated(e){return new x({url:"clips",userId:e.userId,query:$a(e)},this._client,r=>new pe(r,this._client))}};i([h(!1)],pt.prototype,"_getClipByIdBatcher",void 0);pt=i([o("api","HelixClipApi")],pt);class pu extends l{get id(){return this[t].id}get name(){return this[t].name}get description(){return this[t].description}}let As=class extends N{async getAll(e){return(await this._client.callApi({url:"content_classification_labels",query:{locale:e}})).data.map(s=>new pu(s))}};As=i([o("api","HelixContentClassificationLabelApi")],As);function Ga(n,e){return{user_id:e?O(n.user,c):void 0,game_id:n.gameId,fulfillment_status:n.fulfillmentStatus}}function bu(n,e){return{fulfillment_status:e,entitlement_ids:n}}let ne=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get rewardId(){return this[t].benefit_id}get grantDate(){return new Date(this[t].timestamp)}get userId(){return this[t].user_id}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get gameId(){return this[t].game_id}async getGame(){return d(await this._client.games.getGameById(this[t].game_id))}get fulfillmentStatus(){return this[t].fulfillment_status}get updateDate(){return new Date(this[t].last_updated)}};i([h(!1)],ne.prototype,"_client",void 0);ne=i([o("api","HelixDropsEntitlement")],ne);let bt=class extends N{_getDropsEntitlementByIdBatcher=new H({url:"entitlements/drops"},"id","id",this._client,e=>new ne(e,this._client));async getDropsEntitlements(e,r=!1){const s=await this._client.callApi({type:"helix",url:"entitlements/drops",userId:O(e.user,c),forceType:e.user&&r?"app":void 0,query:{...Ga(e,r),...S(e)}});return A(s,ne,this._client)}getDropsEntitlementsPaginated(e,r=!1){return new x({url:"entitlements/drops",userId:O(e.user,c),forceType:e.user&&r?"app":void 0,query:Ga(e,r)},this._client,s=>new ne(s,this._client))}async getDropsEntitlementsByIds(e){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:e}})).data.map(s=>new ne(s,this._client))}async getDropsEntitlementById(e){return(await this.getDropsEntitlementsByIds([e]))[0]??null}async getDropsEntitlementByIdBatched(e){return await this._getDropsEntitlementByIdBatcher.request(e)}async updateDropsEntitlements(e,r){const s=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:bu(e,r)});return new Map(s.data.flatMap(a=>a.ids.map(u=>[u,a.status])))}};i([h(!1)],bt.prototype,"_getDropsEntitlementByIdBatcher",void 0);bt=i([o("api","HelixEntitlementApi")],bt);function w(n){return{broadcaster_user_id:c(n)}}function Xe(n,e){return{broadcaster_user_id:c(n),reward_id:e}}function R(n,e){return{broadcaster_user_id:n,moderator_user_id:e}}function K(n,e){return{broadcaster_user_id:n,user_id:e}}function mu(n){return{organization_id:n.organizationId,category_id:n.categoryId,campaign_id:n.campaignId}}function Fa(n,e){return{conduit_id:n,status:e}}function yu(n,e){return{id:n,shard_count:e.toString()}}function vu(n,e){return{conduit_id:n,shards:e}}let F=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get status(){return this[t].status}get type(){return this[t].type}get cost(){return this[t].cost}get condition(){return this[t].condition}get creationDate(){return new Date(this[t].created_at)}get transportMethod(){return this[t].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[t].id)}get _transport(){return this[t].transport}set _status(e){this[t].status=e}};i([h(!1)],F.prototype,"_client",void 0);F=i([o("api","HelixEventSubSubscription","id")],F);let _e=class extends ue{constructor(e,r,s){super({url:"eventsub/subscriptions",userId:r,query:e},s,a=>new F(a,s))}async getTotalCost(){return(this._currentData??await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){return(this._currentData??await this._fetchData({query:{after:void 0}})).max_total_cost}};_e=i([o("api","HelixPaginatedEventSubSubscriptionsRequest")],_e);let be=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get shardCount(){return this[t].shard_count}async update(e){return await this._client.eventSub.updateConduit(this[t].id,e)}async delete(){await this._client.eventSub.deleteConduit(this[t].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[t].id)}};i([h(!1)],be.prototype,"_client",void 0);be=i([o("api","HelixEventSubConduit")],be);let Ie=class extends l{get id(){return this[t].id}get status(){return this[t].status}get transportMethod(){return this[t].transport.method}};Ie=i([o("api","HelixEventSubConduitShard")],Ie);let Ms=class extends N{async getSubscriptions(e){const r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:S(e)});return{...X(r,F,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsPaginated(){return new _e({},void 0,this._client)}async getSubscriptionsForStatus(e,r){const s=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...S(r),status:e}});return{...X(s,F,this._client),totalCost:s.total_cost,maxTotalCost:s.max_total_cost}}getSubscriptionsForStatusPaginated(e){return new _e({status:e},void 0,this._client)}async getSubscriptionsForType(e,r){const s=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...S(r),type:e}});return{...X(s,F,this._client),totalCost:s.total_cost,maxTotalCost:s.max_total_cost}}getSubscriptionsForTypePaginated(e){return new _e({type:e},void 0,this._client)}async getSubscriptionsForUser(e,r){const s=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:c(e),query:{...f("user_id",c(e)),...S(r)}});return{...X(s,F,this._client),totalCost:s.total_cost,maxTotalCost:s.max_total_cost}}getSubscriptionsForUserPaginated(e){const r=c(e);return new _e(f("user_id",r),r,this._client)}async createSubscription(e,r,s,a,u,_,g,p){const m=a.method==="webhook"||a.method==="conduit",v=m?void 0:_;if(!m&&!u)throw new Error(`Transport ${a.method} can only handle subscriptions with user context`);const T={type:e,version:r,condition:s,transport:a};p&&(T.is_batching_enabled=!0);const M=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:v,userId:O(u,c),canOverrideScopedUserContext:g,forceType:m?"app":"user",jsonBody:T});return new F(M.data[0],this._client)}async deleteSubscription(e){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:e}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(e=>e.status!=="enabled"&&e.status!=="webhook_callback_verification_pending")}async subscribeToStreamOnlineEvents(e,r){return await this.createSubscription("stream.online","1",w(e),r,e)}async subscribeToStreamOfflineEvents(e,r){return await this.createSubscription("stream.offline","1",w(e),r,e)}async subscribeToChannelUpdateEvents(e,r){return await this.createSubscription("channel.update","2",w(e),r,e)}async subscribeToChannelFollowEvents(e,r){const s=c(e);return await this.createSubscription("channel.follow","2",R(s,this._getUserContextIdWithDefault(s)),r,s,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(e,r){return await this.createSubscription("channel.subscribe","1",w(e),r,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(e,r){return await this.createSubscription("channel.subscription.gift","1",w(e),r,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(e,r){return await this.createSubscription("channel.subscription.message","1",w(e),r,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(e,r){return await this.createSubscription("channel.subscription.end","1",w(e),r,e,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(e,r){return await this.createSubscription("channel.cheer","1",w(e),r,e,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(e,r){return await this.createSubscription("channel.charity_campaign.start","1",w(e),r,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(e,r){return await this.createSubscription("channel.charity_campaign.stop","1",w(e),r,e,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(e,r){return await this.createSubscription("channel.charity_campaign.donate","1",w(e),r,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(e,r){return await this.createSubscription("channel.charity_campaign.progress","1",w(e),r,e,["channel:read:charity"])}async subscribeToChannelBanEvents(e,r){return await this.createSubscription("channel.ban","1",w(e),r,e,["channel:moderate"])}async subscribeToChannelUnbanEvents(e,r){return await this.createSubscription("channel.unban","1",w(e),r,e,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(e,r){const s=c(e);return await this.createSubscription("channel.shield_mode.begin","1",R(s,this._getUserContextIdWithDefault(s)),r,s,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(e,r){const s=c(e);return await this.createSubscription("channel.shield_mode.end","1",R(s,this._getUserContextIdWithDefault(s)),r,s,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(e,r){return await this.createSubscription("channel.moderator.add","1",w(e),r,e,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(e,r){return await this.createSubscription("channel.moderator.remove","1",w(e),r,e,["moderation:read"])}async subscribeToChannelRaidEventsFrom(e,r){return await this.createSubscription("channel.raid","1",f("from_broadcaster_user_id",c(e)),r,e)}async subscribeToChannelRaidEventsTo(e,r){return await this.createSubscription("channel.raid","1",f("to_broadcaster_user_id",c(e)),r,e)}async subscribeToChannelRewardAddEvents(e,r){return await this.createSubscription("channel.channel_points_custom_reward.add","1",w(e),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(e,r){return await this.createSubscription("channel.channel_points_custom_reward.update","1",w(e),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(e,r,s){return await this.createSubscription("channel.channel_points_custom_reward.update","1",Xe(e,r),s,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(e,r){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",w(e),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(e,r,s){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",Xe(e,r),s,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(e,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",w(e),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(e,r,s){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",Xe(e,r),s,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(e,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",w(e),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(e,r,s){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",Xe(e,r),s,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddEvents(e,r){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","1",w(e),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelAutomaticRewardRedemptionAddV2Events(e,r){return await this.createSubscription("channel.channel_points_automatic_reward_redemption.add","2",w(e),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(e,r){return await this.createSubscription("channel.poll.begin","1",w(e),r,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(e,r){return await this.createSubscription("channel.poll.progress","1",w(e),r,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(e,r){return await this.createSubscription("channel.poll.end","1",w(e),r,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(e,r){return await this.createSubscription("channel.prediction.begin","1",w(e),r,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(e,r){return await this.createSubscription("channel.prediction.progress","1",w(e),r,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(e,r){return await this.createSubscription("channel.prediction.lock","1",w(e),r,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(e,r){return await this.createSubscription("channel.prediction.end","1",w(e),r,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(e,r){return await this.createSubscription("channel.goal.begin","1",w(e),r,e,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(e,r){return await this.createSubscription("channel.goal.progress","1",w(e),r,e,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(e,r){return await this.createSubscription("channel.goal.end","1",w(e),r,e,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(e,r){return await this.createSubscription("channel.hype_train.begin","1",w(e),r,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(e,r){return await this.createSubscription("channel.hype_train.progress","1",w(e),r,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(e,r){return await this.createSubscription("channel.hype_train.end","1",w(e),r,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainBeginV2Events(e,r){return await this.createSubscription("channel.hype_train.begin","2",w(e),r,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressV2Events(e,r){return await this.createSubscription("channel.hype_train.progress","2",w(e),r,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndV2Events(e,r){return await this.createSubscription("channel.hype_train.end","2",w(e),r,e,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(e,r){const s=c(e);return await this.createSubscription("channel.shoutout.create","1",R(s,this._getUserContextIdWithDefault(s)),r,s,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(e,r){const s=c(e);return await this.createSubscription("channel.shoutout.receive","1",R(s,this._getUserContextIdWithDefault(s)),r,s,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(e,r){return await this.createSubscription("channel.ad_break.begin","1",w(e),r,e,["channel:read:ads"])}async subscribeToChannelChatClearEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat.clear","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat.clear_user_messages","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat.message_delete","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat.notification","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat.message","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat_settings.update","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelUnbanRequestCreateEvents(e,r){const s=c(e);return await this.createSubscription("channel.unban_request.create","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelUnbanRequestResolveEvents(e,r){const s=c(e);return await this.createSubscription("channel.unban_request.resolve","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:read:unban_requests","moderator:manage:unban_requests"],!0)}async subscribeToChannelModerateEvents(e,r){const s=c(e);return await this.createSubscription("channel.moderate","2",R(s,this._getUserContextIdWithDefault(s)),r,e,[],!0)}async subscribeToChannelWarningAcknowledgeEvents(e,r){const s=c(e);return await this.createSubscription("channel.warning.acknowledge","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelWarningSendEvents(e,r){const s=c(e);return await this.createSubscription("channel.warning.send","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:read:warnings","moderator:manage:warnings"],!0)}async subscribeToChannelVipAddEvents(e,r){return await this.createSubscription("channel.vip.add","1",w(e),r,e,["channel:read:vips","channel:manage:vips"])}async subscribeToChannelVipRemoveEvents(e,r){return await this.createSubscription("channel.vip.remove","1",w(e),r,e,["channel:read:vips","channel:manage:vips"])}async subscribeToExtensionBitsTransactionCreateEvents(e,r){return await this.createSubscription("extension.bits_transaction.create","1",f("extension_client_id",e),r)}async subscribeToUserAuthorizationGrantEvents(e,r){return await this.createSubscription("user.authorization.grant","1",f("client_id",e),r)}async subscribeToUserAuthorizationRevokeEvents(e,r){return await this.createSubscription("user.authorization.revoke","1",f("client_id",e),r)}async subscribeToUserUpdateEvents(e,r,s){return await this.createSubscription("user.update","1",f("user_id",c(e)),r,e,s?["user:read:email"]:void 0)}async subscribeToUserWhisperMessageEvents(e,r){return await this.createSubscription("user.whisper.message","1",f("user_id",c(e)),r,e,["user:read:whispers","user:manage:whispers"])}async subscribeToDropEntitlementGrantEvents(e,r){return await this.createSubscription("drop.entitlement.grant","1",mu(e),r,void 0,void 0,!1,!0)}async subscribeToAutoModMessageHoldEvents(e,r){const s=c(e);return await this.createSubscription("automod.message.hold","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateEvents(e,r){const s=c(e);return await this.createSubscription("automod.message.update","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageHoldV2Events(e,r){const s=c(e);return await this.createSubscription("automod.message.hold","2",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:manage:automod"],!0)}async subscribeToAutoModMessageUpdateV2Events(e,r){const s=c(e);return await this.createSubscription("automod.message.update","2",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:manage:automod"],!0)}async subscribeToAutoModSettingsUpdateEvents(e,r){const s=c(e);return await this.createSubscription("automod.settings.update","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:read:automod_settings"],!0)}async subscribeToAutoModTermsUpdateEvents(e,r){const s=c(e);return await this.createSubscription("automod.terms.update","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:manage:automod"],!0)}async subscribeToChannelChatUserMessageHoldEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat.user_message_hold","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelChatUserMessageUpdateEvents(e,r){const s=c(e);return await this.createSubscription("channel.chat.user_message_update","1",K(s,this._getUserContextIdWithDefault(s)),r,e,["user:read:chat"],!0)}async subscribeToChannelSuspiciousUserUpdateEvents(e,r){const s=c(e);return await this.createSubscription("channel.suspicious_user.update","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSuspiciousUserMessageEvents(e,r){const s=c(e);return await this.createSubscription("channel.suspicious_user.message","1",R(s,this._getUserContextIdWithDefault(s)),r,e,["moderator:read:suspicious_users"],!0)}async subscribeToChannelSharedChatSessionBeginEvents(e,r){const s=c(e);return await this.createSubscription("channel.shared_chat.begin","1",w(s),r,s)}async subscribeToChannelSharedChatSessionUpdateEvents(e,r){const s=c(e);return await this.createSubscription("channel.shared_chat.update","1",w(s),r,s)}async subscribeToChannelSharedChatSessionEndEvents(e,r){const s=c(e);return await this.createSubscription("channel.shared_chat.end","1",w(s),r,s)}async subscribeToChannelBitsUseEvents(e,r){const s=c(e);return await this.createSubscription("channel.bits.use","1",w(s),r,s,["bits:read"])}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(r=>new be(r,this._client))}async createConduit(e){const r=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...f("shard_count",e.toString())}});return new be(r.data[0],this._client)}async updateConduit(e,r){const s=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:yu(e,r)});return new be(s.data[0],this._client)}async deleteConduit(e){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...f("id",e)}})}async getConduitShards(e,r,s){const a=await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...Fa(e,r),...S(s)}});return{...A(a,Ie,this._client)}}getConduitShardsPaginated(e,r){return new x({url:"eventsub/conduits/shards",query:Fa(e,r)},this._client,s=>new Ie(s))}async updateConduitShards(e,r){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:vu(e,r)})).data.map(a=>new Ie(a))}async _deleteSubscriptionsWithCondition(e){const r=this.getSubscriptionsPaginated();for await(const s of r)(!e||e(s))&&await s.unsubscribe()}};Ms=i([o("api","HelixEventSubApi")],Ms);function wu(n,e){return{extension_id:n,extension_version:e}}function Su(n){return{sku:n.sku,cost:{amount:n.cost,type:"bits"},display_name:n.displayName,in_development:n.inDevelopment,expiration:n.expirationDate,is_broadcast:n.broadcast}}function La(n,e){return{extension_id:n,id:e.transactionIds}}let Me=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].broadcaster_id}get displayName(){return this[t].broadcaster_name}async getChannel(){return d(await this._client.channels.getChannelInfoById(this[t].broadcaster_id))}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get gameId(){return this[t].game_id}get gameName(){return this[t].game_name}async getGame(){return this[t].game_id?d(await this._client.games.getGameById(this[t].game_id)):null}get title(){return this[t].title}};i([h(!1)],Me.prototype,"_client",void 0);Me=i([o("api","HelixChannelReference","id")],Me);let mt=class extends l{get sku(){return this[t].sku}get cost(){return this[t].cost.amount}get displayName(){return this[t].display_name}get inDevelopment(){return this[t].in_development}get isBroadcast(){return this[t].is_broadcast}get expirationDate(){return B(this[t].expiration,e=>new Date(e))}};mt=i([o("api","HelixExtensionBitsProduct","sku")],mt);let Re=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get transactionDate(){return new Date(this[t].timestamp)}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_name}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get productType(){return this[t].product_type}get productSku(){return this[t].product_data.sku}get productCost(){return this[t].product_data.cost.amount}get productDisplayName(){return this[t].product_data.displayName}get productInDevelopment(){return this[t].product_data.inDevelopment}};i([h(!1)],Re.prototype,"_client",void 0);Re=i([o("api","HelixExtensionTransaction","id")],Re);let Rs=class extends N{async getReleasedExtension(e,r){const s=await this._client.callApi({type:"helix",url:"extensions/released",query:wu(e,r)});return new Cs(s.data[0])}async getLiveChannelsWithExtension(e,r){const s=await this._client.callApi({type:"helix",url:"extensions/live",query:{...f("extension_id",e),...S(r)}});return A(s,Me,this._client)}getLiveChannelsWithExtensionPaginated(e){return new x({url:"extensions/live",query:f("extension_id",e)},this._client,r=>new Me(r,this._client))}async getExtensionBitsProducts(e){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:f("should_include_all",e?.toString())})).data.map(s=>new mt(s))}async putExtensionBitsProduct(e){const r=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:Su(e)});return new mt(r.data[0])}async getExtensionTransactions(e,r={}){const s=await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...La(e,r),...S(r)}});return A(s,Re,this._client)}getExtensionTransactionsPaginated(e,r={}){return new x({url:"extensions/transactions",forceType:"app",query:La(e,r)},this._client,s=>new Re(s,this._client))}};Rs=i([o("api","HelixExtensionsApi")],Rs);let k=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get name(){return this[t].name}get boxArtUrl(){return this[t].box_art_url}get igdbId(){return this[t].igdb_id||null}getBoxArtUrl(e,r){return this[t].box_art_url.replace("{width}",e.toString()).replace("{height}",r.toString())}async getStreams(e){return await this._client.streams.getStreams({...e,game:this[t].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[t].id})}};i([h(!1)],k.prototype,"_client",void 0);k=i([o("api","HelixGame","id")],k);let ye=class extends N{_getGameByIdBatcher=new H({url:"games"},"id","id",this._client,e=>new k(e,this._client));_getGameByNameBatcher=new H({url:"games"},"name","name",this._client,e=>new k(e,this._client));_getGameByIgdbIdBatcher=new H({url:"games"},"igdb_id","igdb_id",this._client,e=>new k(e,this._client));async getGamesByIds(e){return await this._getGames("id",e)}async getGamesByNames(e){return await this._getGames("name",e)}async getGamesByIgdbIds(e){return await this._getGames("igdb_id",e)}async getGameById(e){return(await this._getGames("id",[e]))[0]??null}async getGameByName(e){return(await this._getGames("name",[e]))[0]??null}async getGameByIgdbId(e){return(await this._getGames("igdb_id",[e]))[0]??null}async getGameByIdBatched(e){return await this._getGameByIdBatcher.request(e)}async getGameByNameBatched(e){return await this._getGameByNameBatcher.request(e)}async getGameByIgdbIdBatched(e){return await this._getGameByIgdbIdBatcher.request(e)}async getTopGames(e){const r=await this._client.callApi({type:"helix",url:"games/top",query:S(e)});return A(r,k,this._client)}getTopGamesPaginated(){return new x({url:"games/top"},this._client,e=>new k(e,this._client))}async _getGames(e,r){return r.length?(await this._client.callApi({type:"helix",url:"games",query:{[e]:r}})).data.map(a=>new k(a,this._client)):[]}};i([h(!1)],ye.prototype,"_getGameByIdBatcher",void 0);i([h(!1)],ye.prototype,"_getGameByNameBatcher",void 0);i([h(!1)],ye.prototype,"_getGameByIgdbIdBatcher",void 0);ye=i([o("api","HelixGameApi")],ye);let yt=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterDisplayName(){return this[t].broadcaster_name}get broadcasterName(){return this[t].broadcaster_login}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get type(){return this[t].type}get description(){return this[t].description}get currentAmount(){return this[t].current_amount}get targetAmount(){return this[t].target_amount}get creationDate(){return this[t].created_at}};i([h(!1)],yt.prototype,"_client",void 0);yt=i([o("api","HelixGoal","id")],yt);let Ps=class extends N{async getGoals(e){return(await this._client.callApi({type:"helix",url:"goals",userId:c(e),scopes:["channel:read:goals"],query:I(e)})).data.map(s=>new yt(s,this._client))}};Ps=i([o("api","HelixGoalApi")],Ps);let vt=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get type(){return this[t].type}get total(){return this[t].total}};i([h(!1)],vt.prototype,"_client",void 0);vt=i([o("api","HelixHypeTrainContribution","userId")],vt);let wt=class extends l{_client;constructor(e,r){super(e),this._client=r}get eventId(){return this[t].id}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get level(){return this[t].level}get total(){return this[t].total}get progress(){return this[t].progress}get goal(){return this[t].goal}get topContributions(){return this[t].top_contributions.map(e=>new vt(e,this._client))}get startDate(){return new Date(this[t].started_at)}get expiryDate(){return new Date(this[t].expires_at)}get type(){return this[t].type}get isSharedTrain(){return this[t].is_shared_train}};i([h(!1)],wt.prototype,"_client",void 0);wt=i([o("api","HelixHypeTrain","id")],wt);let St=class extends l{get level(){return this[t].level}get total(){return this[t].total}get achievementDate(){return new Date(this[t].achieved_at)}};St=i([o("api","HelixHypeTrainAllTimeHigh")],St);let Ct=class extends l{_client;constructor(e,r){super(e),this._client=r}get current(){return B(this[t].current,e=>new wt(e,this._client))}get allTimeHigh(){return B(this[t].all_time_high,e=>new St(e))}get sharedAllTimeHigh(){return B(this[t].shared_all_time_high,e=>new St(e))}};i([h(!1)],Ct.prototype,"_client",void 0);Ct=i([o("api","HelixHypeTrainStatus")],Ct);class Cu extends N{async getHypeTrainStatusForBroadcaster(e){const r=await this._client.callApi({type:"helix",url:"hypetrain/status",userId:c(e),scopes:["channel:read:hype_train"],query:{...I(e)}});return new Ct(r.data[0],this._client)}}function Va(n,e){return{broadcaster_id:c(n),user_id:e?.userId}}function ja(n,e){return{broadcaster_id:c(n),user_id:c(e)}}function Iu(n,e,r,s,a){return{unban_request_id:r,broadcaster_id:c(n),moderator_id:c(e),status:s?"approved":"denied",resolution_text:a}}function fu(n,e,r){return{user_id:c(n),msg_id:e,action:r?"ALLOW":"DENY"}}function Eu(n){return{overall_level:n.overallLevel,aggression:n.aggression,bullying:n.bullying,disability:n.disability,misogyny:n.misogyny,race_ethnicity_or_religion:n.raceEthnicityOrReligion,sex_based_terms:n.sexBasedTerms,sexuality_sex_or_gender:n.sexualitySexOrGender,swearing:n.swearing}}function xu(n){return{data:{duration:n.duration,reason:n.reason,user_id:c(n.user)}}}function Uu(n){return{is_active:n}}function Bu(n){return{data:n.map(e=>({msg_id:e.messageId,msg_text:e.messageText}))}}function Tu(n,e){return{data:{user_id:c(n),reason:e}}}let It=class extends l{get broadcasterId(){return this[t].broadcaster_id}get moderatorId(){return this[t].moderator_id}get overallLevel(){return this[t].overall_level?this[t].overall_level:null}get disability(){return this[t].disability}get aggression(){return this[t].aggression}get sexualitySexOrGender(){return this[t].sexuality_sex_or_gender}get misogyny(){return this[t].misogyny}get bullying(){return this[t].bullying}get swearing(){return this[t].swearing}get raceEthnicityOrReligion(){return this[t].race_ethnicity_or_religion}get sexBasedTerms(){return this[t].sex_based_terms}};It=i([o("api","HelixAutoModSettings","broadcasterId")],It);let Hs=class extends l{get messageId(){return this[t].msg_id}get isPermitted(){return this[t].is_permitted}};Hs=i([o("api","HelixAutoModStatus","messageId")],Hs);let ve=class extends l{_client;_expiryTimestamp;constructor(e,r,s){super(e),this._expiryTimestamp=r,this._client=s}get creationDate(){return new Date(this[t].created_at)}get expiryDate(){return B(this._expiryTimestamp,e=>new Date(e))}get moderatorId(){return this[t].moderator_id}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_id))}get userId(){return this[t].user_id}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],ve.prototype,"_client",void 0);i([h(!1)],ve.prototype,"_expiryTimestamp",void 0);ve=i([o("api","HelixBanUser","userId")],ve);let ft=class extends ve{constructor(e,r){super(e,e.expires_at||null,r)}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}get moderatorName(){return this[t].moderator_login}get moderatorDisplayName(){return this[t].moderator_name}get reason(){return this[t].reason||null}};ft=i([o("api","HelixBan","userId")],ft);let Et=class extends l{get broadcasterId(){return this[t].broadcaster_id}get creationDate(){return new Date(this[t].created_at)}get expirationDate(){return this[t].expires_at?new Date(this[t].expires_at):null}get id(){return this[t].id}get moderatorId(){return this[t].moderator_id}get text(){return this[t].text}get updatedDate(){return new Date(this[t].updated_at)}};Et=i([o("api","HelixBlockedTerm","id")],Et);let Pe=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].broadcaster_id}get name(){return this[t].broadcaster_login}get displayName(){return this[t].broadcaster_name}async getChannel(){return d(await this._client.channels.getChannelInfoById(this[t].broadcaster_id))}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}};i([h(!1)],Pe.prototype,"_client",void 0);Pe=i([o("api","HelixModeratedChannel","id")],Pe);let He=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],He.prototype,"_client",void 0);He=i([o("api","HelixModerator","userId")],He);let ke=class extends l{_client;constructor(e,r){super(e),this._client=r}get isActive(){return this[t].is_active}get moderatorId(){return this[t].moderator_id}get moderatorName(){return this[t].moderator_login}get moderatorDisplayName(){return this[t].moderator_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_id))}get lastActivationDate(){return this[t].last_activated_at===""?null:new Date(this[t].last_activated_at)}};i([h(!1)],ke.prototype,"_client",void 0);ke=i([o("api","HelixShieldModeStatus")],ke);let me=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_id}get broadcasterDisplayName(){return this[t].broadcaster_id}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get moderatorId(){return this[t].moderator_id}get moderatorName(){return this[t].moderator_login}get moderatorDisplayName(){return this[t].moderator_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get message(){return this[t].text}get creationDate(){return new Date(this[t].created_at)}get resolutionMessage(){return this[t].resolution_text||null}get resolutionDate(){return B(this[t].resolved_at,e=>new Date(e))}};i([h(!1)],me.prototype,"_client",void 0);me=i([o("api","HelixUnbanRequest","id")],me);let xt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].user_id}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get moderatorId(){return this[t].moderator_id}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_id))}get userId(){return this[t].user_id}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get reason(){return this[t].reason}};i([h(!1)],xt.prototype,"_client",void 0);xt=i([o("api","HelixWarning","userId")],xt);let ks=class extends N{async getBannedUsers(e,r){const s=await this._client.callApi({type:"helix",url:"moderation/banned",userId:c(e),scopes:["moderation:read"],query:{...Va(e,r),...S(r)}});return A(s,ft,this._client)}getBannedUsersPaginated(e){return new x({url:"moderation/banned",userId:c(e),scopes:["moderation:read"],query:I(e)},this._client,r=>new ft(r,this._client),50)}async checkUserBan(e,r){const s=c(r);return(await this.getBannedUsers(e,{userId:s})).data.some(u=>u.userId===s)}async getModerators(e,r){const s=await this._client.callApi({type:"helix",url:"moderation/moderators",userId:c(e),scopes:["moderation:read","channel:manage:moderators"],query:{...Va(e,r),...S(r)}});return A(s,He,this._client)}getModeratorsPaginated(e){return new x({url:"moderation/moderators",userId:c(e),scopes:["moderation:read","channel:manage:moderators"],query:I(e)},this._client,r=>new He(r,this._client))}async getModeratedChannels(e,r){const s=c(e),a=await this._client.callApi({type:"helix",url:"moderation/channels",userId:s,scopes:["user:read:moderated_channels"],query:{...f("user_id",s),...S(r)}});return A(a,Pe,this._client)}getModeratedChannelsPaginated(e){const r=c(e);return new x({url:"moderation/channels",userId:r,scopes:["user:read:moderated_channels"],query:f("user_id",r)},this._client,s=>new Pe(s,this._client))}async checkUserMod(e,r){const s=c(r);return(await this.getModerators(e,{userId:s})).data.some(u=>u.userId===s)}async addModerator(e,r){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:c(e),scopes:["channel:manage:moderators"],query:ja(e,r)})}async removeModerator(e,r){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:c(e),scopes:["channel:manage:moderators"],query:ja(e,r)})}async checkAutoModStatus(e,r){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:c(e),scopes:["moderation:read"],query:I(e),jsonBody:Bu(r)})).data.map(a=>new Hs(a))}async processHeldAutoModMessage(e,r,s){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:c(e),scopes:["moderator:manage:automod"],jsonBody:fu(e,r,s)})}async getAutoModSettings(e){const r=c(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:r,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r)})).data.map(a=>new It(a))}async updateAutoModSettings(e,r){const s=c(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:s,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(s),jsonBody:Eu(r)})).data.map(u=>new It(u))}async banUser(e,r){const s=c(e);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:s,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(s),jsonBody:xu(r)})).data.map(u=>new ve(u,u.end_time,this._client))}async unbanUser(e,r){const s=c(e);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:s,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(s),...f("user_id",c(r))}})}async getBlockedTerms(e,r){const s=c(e),a=await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:s,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(s),...S(r)}});return A(a,Et,this._client)}async addBlockedTerm(e,r){const s=c(e);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:s,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(s),jsonBody:{text:r}})).data.map(u=>new Et(u))}async removeBlockedTerm(e,r,s){const a=c(e);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:a,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(a),id:s}})}async deleteChatMessages(e,r){const s=c(e);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:s,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(s),...f("message_id",r)}})}async getShieldModeStatus(e){const r=c(e),s=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:r,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r)});return new ke(s.data[0],this._client)}async updateShieldModeStatus(e,r){const s=c(e),a=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:s,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(s),jsonBody:Uu(r)});return new ke(a.data[0],this._client)}async getUnbanRequests(e,r,s){const a=c(e),u=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"GET",userId:a,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(a),...f("status",r),...S(s)}});return A(u,me,this._client)}getUnbanRequestsPaginated(e,r){const s=c(e);return new x({url:"moderation/unban_requests",method:"GET",userId:s,scopes:["moderator:read:unban_requests","moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(s),...f("status",r)}},this._client,a=>new me(a,this._client))}async resolveUnbanRequest(e,r,s,a){const u=c(e),_=await this._client.callApi({type:"helix",url:"moderation/unban_requests",method:"PATCH",userId:u,scopes:["moderator:manage:unban_requests"],canOverrideScopedUserContext:!0,query:Iu(u,this._getUserContextIdWithDefault(u),r,s,a?.slice(0,500))});return new me(_.data[0],this._client)}async warnUser(e,r,s){const a=c(e),u=await this._client.callApi({type:"helix",url:"moderation/warnings",method:"POST",userId:a,scopes:["moderator:manage:warnings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(a),jsonBody:Tu(r,s.slice(0,500))});return new xt(u.data[0],this._client)}_createModeratorActionQuery(e){return bo(e,this._getUserContextIdWithDefault(e))}};ks=i([o("api","HelixModerationApi")],ks);function Nu(n,e){return{broadcaster_id:c(n),title:e.title,choices:e.choices.map(r=>({title:r})),duration:e.duration,channel_points_voting_enabled:e.channelPointsPerVote!=null,channel_points_per_vote:e.channelPointsPerVote??0}}function Du(n,e,r){return{broadcaster_id:c(n),id:e,status:r?"TERMINATED":"ARCHIVED"}}let qs=class extends l{get id(){return this[t].id}get title(){return this[t].title}get totalVotes(){return this[t].votes}get channelPointsVotes(){return this[t].channel_points_votes}};qs=i([o("api","HelixPollChoice","id")],qs);let Y=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get title(){return this[t].title}get isChannelPointsVotingEnabled(){return this[t].channel_points_voting_enabled}get channelPointsPerVote(){return this[t].channel_points_per_vote}get status(){return this[t].status}get durationInSeconds(){return this[t].duration}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this.startDate.getTime()+this[t].duration*1e3)}get choices(){return this[t].choices.map(e=>new qs(e))}};i([h(!1)],Y.prototype,"_client",void 0);Y=i([o("api","HelixPoll","id")],Y);let Ws=class extends N{async getPolls(e,r){const s=await this._client.callApi({type:"helix",url:"polls",userId:c(e),scopes:["channel:read:polls","channel:manage:polls"],query:{...I(e),...S(r)}});return A(s,Y,this._client)}getPollsPaginated(e){return new x({url:"polls",userId:c(e),scopes:["channel:read:polls","channel:manage:polls"],query:I(e)},this._client,r=>new Y(r,this._client),20)}async getPollsByIds(e,r){return r.length?(await this._client.callApi({type:"helix",url:"polls",userId:c(e),scopes:["channel:read:polls","channel:manage:polls"],query:hs(e,r)})).data.map(a=>new Y(a,this._client)):[]}async getPollById(e,r){const s=await this.getPollsByIds(e,[r]);return s.length?s[0]:null}async createPoll(e,r){const s=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:c(e),scopes:["channel:manage:polls"],jsonBody:Nu(e,r)});return new Y(s.data[0],this._client)}async endPoll(e,r,s=!0){const a=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:c(e),scopes:["channel:manage:polls"],jsonBody:Du(e,r,s)});return new Y(a.data[0],this._client)}};Ws=i([o("api","HelixPollApi")],Ws);function Au(n,e){return{broadcaster_id:c(n),title:e.title,outcomes:e.outcomes.map(r=>({title:r})),prediction_window:e.autoLockAfter}}function Mu(n,e,r,s){return{broadcaster_id:c(n),id:e,status:r,winning_outcome_id:s}}let Ut=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return await this._client.users.getUserById(this[t].user_id)}get channelPointsUsed(){return this[t].channel_points_used}get channelPointsWon(){return this[t].channel_points_won}};i([h(!1)],Ut.prototype,"_client",void 0);Ut=i([o("api","HelixPredictor","userId")],Ut);let qe=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get title(){return this[t].title}get users(){return this[t].users}get totalChannelPoints(){return this[t].channel_points}get color(){return this[t].color}get topPredictors(){return this[t].top_predictors?.map(e=>new Ut(e,this._client))??[]}};i([h(!1)],qe.prototype,"_client",void 0);qe=i([o("api","HelixPredictionOutcome","id")],qe);let J=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get title(){return this[t].title}get status(){return this[t].status}get autoLockAfter(){return this[t].prediction_window}get creationDate(){return new Date(this[t].created_at)}get endDate(){return this[t].ended_at?new Date(this[t].ended_at):null}get lockDate(){return this[t].locked_at?new Date(this[t].locked_at):null}get outcomes(){return this[t].outcomes.map(e=>new qe(e,this._client))}get winningOutcomeId(){return this[t].winning_outcome_id||null}get winningOutcome(){if(!this[t].winning_outcome_id)return null;const e=this[t].outcomes.find(r=>r.id===this[t].winning_outcome_id);if(!e)throw new P("Winning outcome not found in outcomes array");return new qe(e,this._client)}};i([h(!1)],J.prototype,"_client",void 0);J=i([o("api","HelixPrediction","id")],J);let Os=class extends N{async getPredictions(e,r){const s=await this._client.callApi({type:"helix",url:"predictions",userId:c(e),scopes:["channel:read:predictions"],query:{...I(e),...S(r)}});return A(s,J,this._client)}getPredictionsPaginated(e){return new x({url:"predictions",userId:c(e),scopes:["channel:read:predictions"],query:I(e)},this._client,r=>new J(r,this._client),20)}async getPredictionsByIds(e,r){return r.length?(await this._client.callApi({type:"helix",url:"predictions",userId:c(e),scopes:["channel:read:predictions"],query:hs(e,r)})).data.map(a=>new J(a,this._client)):[]}async getPredictionById(e,r){const s=await this.getPredictionsByIds(e,[r]);return s.length?s[0]:null}async createPrediction(e,r){const s=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:c(e),scopes:["channel:manage:predictions"],jsonBody:Au(e,r)});return new J(s.data[0],this._client)}async lockPrediction(e,r){return await this._endPrediction(e,r,"LOCKED")}async resolvePrediction(e,r,s){return await this._endPrediction(e,r,"RESOLVED",s)}async cancelPrediction(e,r){return await this._endPrediction(e,r,"CANCELED")}async _endPrediction(e,r,s,a){const u=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:c(e),scopes:["channel:manage:predictions"],jsonBody:Mu(e,r,s,a)});return new J(u.data[0],this._client)}};Os=i([o("api","HelixPredictionApi")],Os);function Ru(n,e){return{from_broadcaster_id:c(n),to_broadcaster_id:c(e)}}let $s=class extends l{get creationDate(){return new Date(this[t].created_at)}get targetIsMature(){return this[t].is_mature}};$s=i([o("api","HelixRaid")],$s);let Gs=class extends N{async startRaid(e,r){const s=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:c(e),scopes:["channel:manage:raids"],query:Ru(e,r)});return new $s(s.data[0])}async cancelRaid(e){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:c(e),scopes:["channel:manage:raids"],query:I(e)})}};Gs=i([o("api","HelixRaidApi")],Gs);function vo(n,e){return{broadcaster_id:c(n),start_time:e?.startDate,utc_offset:e?.utcOffset?.toString()}}function Pu(n,e){return e.vacation?{broadcaster_id:c(n),is_vacation_enabled:"true",vacation_start_time:e.vacation.startDate,vacation_end_time:e.vacation.endDate,timezone:e.vacation.timezone}:{broadcaster_id:c(n),is_vacation_enabled:"false"}}function Hu(n){return{start_time:n.startDate,timezone:n.timezone,is_recurring:n.isRecurring,duration:n.duration,category_id:n.categoryId,title:n.title}}function Qa(n,e){return{broadcaster_id:c(n),id:e}}function ku(n){return{start_time:n.startDate,timezone:n.timezone,is_canceled:n.isCanceled,duration:n.duration,category_id:n.categoryId,title:n.title}}let ee=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get startDate(){return new Date(this[t].start_time)}get endDate(){return new Date(this[t].end_time)}get title(){return this[t].title}get cancelEndDate(){return B(this[t].canceled_until,e=>new Date(e))}get categoryId(){return this[t].category?.id??null}get categoryName(){return this[t].category?.name??null}async getCategory(){const e=this[t].category?.id;return e?await this._client.games.getGameById(e):null}get isRecurring(){return this[t].is_recurring}};i([h(!1)],ee.prototype,"_client",void 0);ee=i([o("api","HelixScheduleSegment","id")],ee);let Fs=class extends x{constructor(e,r,s){super({url:"schedule",query:vo(e,s)},r,a=>new ee(a,r),25)}async _fetchData(e={}){const r=await super._fetchData(e);return{data:r.data.segments??[],pagination:r.pagination}}};Fs=i([o("api","HelixPaginatedScheduleSegmentRequest")],Fs);let Bt=class extends l{_client;constructor(e,r){super(e),this._client=r}get segments(){return this[t].segments?.map(e=>new ee(e,this._client))??[]}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get vacationStartDate(){const e=this[t].vacation?.start_time;return e?new Date(e):null}get vacationEndDate(){const e=this[t].vacation?.end_time;return e?new Date(e):null}};i([h(!1)],Bt.prototype,"_client",void 0);Bt=i([o("api","HelixSchedule","broadcasterId")],Bt);class qu extends N{async getSchedule(e,r){const s=await this._client.callApi({type:"helix",url:"schedule",userId:c(e),query:{...vo(e,r),...S(r)}});return{data:new Bt(s.data,this._client),cursor:s.pagination.cursor}}getScheduleSegmentsPaginated(e,r){return new Fs(e,this._client,r)}async getScheduleSegmentsByIds(e,r){return(await this._client.callApi({type:"helix",url:"schedule",userId:c(e),query:hs(e,r)})).data.segments?.map(a=>new ee(a,this._client))??[]}async getScheduleSegmentById(e,r){const s=await this.getScheduleSegmentsByIds(e,[r]);return s.length?s[0]:null}async getScheduleAsIcal(e){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:I(e)})}async updateScheduleSettings(e,r){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:c(e),scopes:["channel:manage:schedule"],query:Pu(e,r)})}async createScheduleSegment(e,r){const s=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:c(e),scopes:["channel:manage:schedule"],query:I(e),jsonBody:Hu(r)});return new ee(s.data.segments[0],this._client)}async updateScheduleSegment(e,r,s){const a=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:c(e),scopes:["channel:manage:schedule"],query:Qa(e,r),jsonBody:ku(s)});return new ee(a.data.segments[0],this._client)}async deleteScheduleSegment(e,r){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:c(e),scopes:["channel:manage:schedule"],query:Qa(e,r)})}}function za(n,e){return{query:n,live_only:e.liveOnly?.toString()}}let We=class extends l{_client;constructor(e,r){super(e),this._client=r}get language(){return this[t].broadcaster_language}get id(){return this[t].id}get name(){return this[t].broadcaster_login}get displayName(){return this[t].display_name}async getUser(){return d(await this._client.users.getUserById(this[t].id))}get gameId(){return this[t].game_id}get gameName(){return this[t].game_name}async getGame(){return this[t].game_id?d(await this._client.games.getGameById(this[t].game_id)):null}get isLive(){return this[t].is_live}get tags(){return this[t].tags}get thumbnailUrl(){return this[t].thumbnail_url}get startDate(){return this[t].is_live?new Date(this[t].started_at):null}};i([h(!1)],We.prototype,"_client",void 0);We=i([o("api","HelixChannelSearchResult","id")],We);let Ls=class extends N{async searchCategories(e,r){const s=await this._client.callApi({type:"helix",url:"search/categories",query:{query:e,...S(r)}});return A(s,k,this._client)}searchCategoriesPaginated(e){return new x({url:"search/categories",query:{query:e}},this._client,r=>new k(r,this._client))}async searchChannels(e,r={}){const s=await this._client.callApi({type:"helix",url:"search/channels",query:{...za(e,r),...S(r)}});return A(s,We,this._client)}searchChannelsPaginated(e,r={}){return new x({url:"search/channels",query:za(e,r)},this._client,s=>new We(s,this._client))}};Ls=i([o("api","HelixSearchApi")],Ls);class Wu extends de{constructor(e){super("Your stream needs to be live to do this",e)}}function ws(n){return{game_id:n.game,language:n.language,type:n.type,user_id:n.userId,user_login:n.userName}}function Ou(n,e){return{user_id:c(n),description:e}}function Ka(n){return{video_id:n}}let q=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get gameId(){return this[t].game_id}get gameName(){return this[t].game_name}async getGame(){return this[t].game_id?d(await this._client.games.getGameById(this[t].game_id)):null}get type(){return this[t].type}get title(){return this[t].title}get viewers(){return this[t].viewer_count}get startDate(){return new Date(this[t].started_at)}get language(){return this[t].language}get thumbnailUrl(){return this[t].thumbnail_url}getThumbnailUrl(e,r){return this[t].thumbnail_url.replace("{width}",e.toString()).replace("{height}",r.toString())}get tags(){return this[t].tags}get isMature(){return this[t].is_mature}};i([h(!1)],q.prototype,"_client",void 0);q=i([o("api","HelixStream","id")],q);let Oe=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get creationDate(){return new Date(this[t].created_at)}get description(){return this[t].description}get positionInSeconds(){return this[t].position_seconds}};i([h(!1)],Oe.prototype,"_client",void 0);Oe=i([o("api","HelixStreamMarker","id")],Oe);let Vs=class extends Oe{_videoId;constructor(e,r,s){super(e,s),this._videoId=r}get url(){return this[t].URL}get videoId(){return this._videoId}async getVideo(){return d(await this._client.videos.getVideoById(this._videoId))}};Vs=i([o("api","HelixStreamMarkerWithVideo","id")],Vs);var le;let $e=le=class extends N{_getStreamByUserIdBatcher=new H({url:"streams"},"user_id","user_id",this._client,e=>new q(e,this._client));_getStreamByUserNameBatcher=new H({url:"streams"},"user_login","user_login",this._client,e=>new q(e,this._client));async getStreams(e={}){const r=await this._client.callApi({url:"streams",type:"helix",query:{...ws(e),...S(e)}});return A(r,q,this._client)}getStreamsPaginated(e={}){return new x({url:"streams",query:ws(e)},this._client,r=>new q(r,this._client))}async getStreamsByUserNames(e){return(await this.getStreams({userName:e.map(Ce)})).data}async getStreamByUserName(e){return(await this.getStreamsByUserNames([e]))[0]??null}async getStreamByUserNameBatched(e){return await this._getStreamByUserNameBatcher.request(Ce(e))}async getStreamsByUserIds(e){return(await this.getStreams({userId:e.map(c)})).data}async getStreamByUserId(e){const r=c(e),s=await this._client.callApi({url:"streams",type:"helix",userId:r,query:ws({userId:r})});return B(s.data[0],a=>new q(a,this._client))}async getStreamByUserIdBatched(e){return await this._getStreamByUserIdBatcher.request(c(e))}async getStreamMarkersForUser(e,r){const s=await this._client.callApi({url:"streams/markers",type:"helix",query:{...Pa(e),...S(r)},userId:c(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:Ea(s.data.map(a=>le._mapGetStreamMarkersResult(a,this._client))),cursor:s.pagination?.cursor}}getStreamMarkersForUserPaginated(e){return new x({url:"streams/markers",query:Pa(e),userId:c(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,r=>le._mapGetStreamMarkersResult(r,this._client))}async getStreamMarkersForVideo(e,r,s){const a=await this._client.callApi({url:"streams/markers",type:"helix",query:{...Ka(r),...S(s)},userId:c(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:Ea(a.data.map(u=>le._mapGetStreamMarkersResult(u,this._client))),cursor:a.pagination?.cursor}}getStreamMarkersForVideoPaginated(e,r){return new x({url:"streams/markers",query:Ka(r),userId:c(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,s=>le._mapGetStreamMarkersResult(s,this._client))}async createStreamMarker(e,r){try{const s=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:c(e),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:Ou(e,r)});return new Oe(s.data[0],this._client)}catch(s){throw s instanceof oe&&s.statusCode===404?new Wu({cause:s}):s}}async getStreamKey(e){const r=c(e);return(await this._client.callApi({type:"helix",url:"streams/key",userId:r,scopes:["channel:read:stream_key"],query:I(e)})).data[0].stream_key}async getFollowedStreams(e,r){const s=c(e),a=await this._client.callApi({type:"helix",url:"streams/followed",userId:s,scopes:["user:read:follows"],query:{...f("user_id",s),...S(r)}});return A(a,q,this._client)}getFollowedStreamsPaginated(e){const r=c(e);return new x({url:"streams/followed",userId:r,scopes:["user:read:follows"],query:f("user_id",r)},this._client,s=>new q(s,this._client))}static _mapGetStreamMarkersResult(e,r){return e.videos.reduce((s,a)=>[...s,...a.markers.map(u=>new Vs(u,a.video_id,r))],[])}};i([h(!1)],$e.prototype,"_getStreamByUserIdBatcher",void 0);i([h(!1)],$e.prototype,"_getStreamByUserNameBatcher",void 0);$e=le=i([o("api","HelixStreamApi")],$e);function $u(n,e){return{broadcaster_id:c(n),user_id:c(e)}}let Ge=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[t].broadcaster_id)}get isGift(){return this[t].is_gift}get tier(){return this[t].tier}};i([h(!1)],Ge.prototype,"_client",void 0);Ge=i([o("api","HelixUserSubscription","broadcasterId")],Ge);let Fe=class extends Ge{get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get gifterId(){return this[t].is_gift?this[t].gifter_id:null}get gifterName(){return this[t].is_gift?this[t].gifter_login:null}get gifterDisplayName(){return this[t].is_gift?this[t].gifter_name:null}async getGifter(){return this[t].is_gift?d(await this._client.users.getUserById(this[t].gifter_id)):null}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};Fe=i([o("api","HelixSubscription","userId")],Fe);let js=class extends ue{constructor(e,r){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:c(e),query:I(e)},r,s=>new Fe(s,r))}async getPoints(){return(this._currentData??await this._fetchData({query:{after:void 0}})).points}};js=i([o("api","HelixPaginatedSubscriptionsRequest")],js);let Qs=class extends N{async getSubscriptions(e,r){const s=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:c(e),query:{...I(e),...S(r)}});return{...X(s,Fe,this._client),points:s.points}}getSubscriptionsPaginated(e){return new js(e,this._client)}async getSubscriptionsForUsers(e,r){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:c(e),scopes:["channel:read:subscriptions"],query:mo(e,r)})).data.map(a=>new Fe(a,this._client))}async getSubscriptionForUser(e,r){const s=await this.getSubscriptionsForUsers(e,[r]);return s.length?s[0]:null}async checkUserSubscription(e,r){try{const s=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:c(e),scopes:["user:read:subscriptions"],query:$u(r,e)});return new Ge(s.data[0],this._client)}catch(s){if(s instanceof oe&&s.statusCode===404)return null;throw s}}};Qs=i([o("api","HelixSubscriptionApi")],Qs);let Le=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get name(){return this[t].team_name}get displayName(){return this[t].team_display_name}get backgroundImageUrl(){return this[t].background_image_url}get bannerUrl(){return this[t].banner}get creationDate(){return new Date(this[t].created_at)}get updateDate(){return new Date(this[t].updated_at)}get info(){return this[t].info}get logoThumbnailUrl(){return this[t].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};i([h(!1)],Le.prototype,"_client",void 0);Le=i([o("api","HelixTeam","id")],Le);let Tt=class extends Le{get userRelations(){return this[t].users.map(e=>new ie(e,this._client))}};Tt=i([o("api","HelixTeamWithUsers","id")],Tt);let zs=class extends N{async getTeamsForBroadcaster(e){return(await this._client.callApi({type:"helix",url:"teams/channel",userId:c(e),query:I(e)})).data?.map(s=>new Le(s,this._client))??[]}async getTeamById(e){try{const r=await this._client.callApi({type:"helix",url:"teams",query:{id:e}});return new Tt(r.data[0],this._client)}catch(r){if(r instanceof oe&&r.statusCode===500)return null;throw r}}async getTeamByName(e){try{const r=await this._client.callApi({type:"helix",url:"teams",query:{name:e}});return new Tt(r.data[0],this._client)}catch(r){if(r instanceof oe&&r.statusCode===404)return null;throw r}}};zs=i([o("api","HelixTeamApi")],zs);function Gu(n,e){return{target_user_id:c(n),source_context:e.sourceContext,reason:e.reason}}function Fu(n){return{target_user_id:c(n)}}class wo extends l{get id(){return this[t].id}get version(){return this[t].version}get name(){return this[t].name}}let fe=class extends wo{_slotType;_slotId;constructor(e,r,s){super(s),this._slotType=e,this._slotId=r}get slotType(){return this._slotType}get slotId(){return this._slotId}};fe=i([o("api","HelixInstalledExtension","id")],fe);let Nt=class extends l{getExtensionAtSlot(e,r){const s=this[t][e][r];return s.active?new fe(e,r,s):null}getExtensionsForSlotType(e){return[...Object.entries(this[t][e])].filter(r=>r[1].active).map(([r,s])=>new fe(e,r,s))}getAllExtensions(){return[...Object.entries(this[t])].flatMap(([e,r])=>[...Object.entries(r)].filter(s=>s[1].active).map(([s,a])=>new fe(e,s,a)))}};Nt=i([o("api","HelixInstalledExtensionList")],Nt);let Ks=class extends wo{get canActivate(){return this[t].can_activate}get types(){return this[t].type}};Ks=i([o("api","HelixUserExtension","id")],Ks);let Z=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get name(){return this[t].login}get displayName(){return this[t].display_name}get description(){return this[t].description}get type(){return this[t].type}get broadcasterType(){return this[t].broadcaster_type}get profilePictureUrl(){return this[t].profile_image_url}get offlinePlaceholderUrl(){return this[t].offline_image_url}get creationDate(){return new Date(this[t].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(e){return(await this._client.channels.getFollowedChannels(this,e)).data[0]??null}async follows(e){return await this.getFollowedChannel(e)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(e){return(await this._client.channels.getChannelFollowers(this,e)).data[0]??null}async isFollowedBy(e){return await this.getChannelFollower(e)!==null}async getSubscriptionTo(e){return await this._client.subscriptions.checkUserSubscription(this,e)}async isSubscribedTo(e){return await this.getSubscriptionTo(e)!==null}async getSubscriber(e){return await this._client.subscriptions.getSubscriptionForUser(this,e)}async hasSubscriber(e){return await this.getSubscriber(e)!==null}};i([h(!1)],Z.prototype,"_client",void 0);Z=i([o("api","HelixUser","id")],Z);let Dt=class extends Z{get email(){return this[t].email}async setDescription(e){return await this._client.users.updateAuthenticatedUser(this,{description:e})}};Dt=i([o("api","HelixPrivilegedUser","id")],Dt);let Ve=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].display_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],Ve.prototype,"_client",void 0);Ve=i([o("api","HelixUserBlock","userId")],Ve);let je=class extends N{_getUserByIdBatcher=new H({url:"users"},"id","id",this._client,e=>new Z(e,this._client));_getUserByNameBatcher=new H({url:"users"},"login","login",this._client,e=>new Z(e,this._client));async getUsersByIds(e){return await this._getUsers("id",e.map(c))}async getUsersByNames(e){return await this._getUsers("login",e.map(Ce))}async getUserById(e){const r=c(e),s=await this._client.callApi({type:"helix",url:"users",userId:r,query:{id:r}});return B(s.data[0],a=>new Z(a,this._client))}async getUserByIdBatched(e){return await this._getUserByIdBatcher.request(c(e))}async getUserByName(e){const r=await this._getUsers("login",[Ce(e)]);return r.length?r[0]:null}async getUserByNameBatched(e){return await this._getUserByNameBatcher.request(Ce(e))}async getAuthenticatedUser(e,r=!1){const s=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:c(e),scopes:r?["user:read:email"]:void 0});if(!s.data?.length)throw new P("Could not get authenticated user");return new Dt(s.data[0],this._client)}async updateAuthenticatedUser(e,r){const s=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:c(e),scopes:["user:edit"],query:{description:r.description}});return new Dt(s.data[0],this._client)}async getBlocks(e,r){const s=await this._client.callApi({type:"helix",url:"users/blocks",userId:c(e),scopes:["user:read:blocked_users"],query:{...I(e),...S(r)}});return A(s,Ve,this._client)}getBlocksPaginated(e){return new x({url:"users/blocks",userId:c(e),scopes:["user:read:blocked_users"],query:I(e)},this._client,r=>new Ve(r,this._client))}async createBlock(e,r,s={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:c(e),scopes:["user:manage:blocked_users"],query:Gu(r,s)})}async deleteBlock(e,r){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:c(e),scopes:["user:manage:blocked_users"],query:Fu(r)})}async getExtensionsForAuthenticatedUser(e,r=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:c(e),scopes:r?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(a=>new Ks(a))}async getActiveExtensions(e,r=!1){const s=c(e),a=await this._client.callApi({type:"helix",url:"users/extensions",userId:s,scopes:r?["user:read:broadcast","channel:manage:extensions"]:void 0,query:f("user_id",s)});return new Nt(a.data)}async updateActiveExtensionsForAuthenticatedUser(e,r){const s=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:c(e),scopes:["channel:manage:extensions"],jsonBody:{data:r}});return new Nt(s.data)}async _getUsers(e,r){if(r.length===0)return[];const s={[e]:r};return(await this._client.callApi({type:"helix",url:"users",query:s})).data.map(u=>new Z(u,this._client))}};i([h(!1)],je.prototype,"_getUserByIdBatcher",void 0);i([h(!1)],je.prototype,"_getUserByNameBatcher",void 0);je=i([o("api","HelixUserApi")],je);let ae=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get title(){return this[t].title}get description(){return this[t].description}get creationDate(){return new Date(this[t].created_at)}get publishDate(){return new Date(this[t].published_at)}get url(){return this[t].url}get thumbnailUrl(){return this[t].thumbnail_url}getThumbnailUrl(e,r){return this[t].thumbnail_url.replace("%{width}",e.toString()).replace("%{height}",r.toString())}get isPublic(){return this[t].viewable==="public"}get views(){return this[t].view_count}get language(){return this[t].language}get type(){return this[t].type}get duration(){return this[t].duration}get durationInSeconds(){const e=this[t].duration.match(/\d+[hms]/g);if(!e)throw new P(`Could not parse duration string: ${this[t].duration}`);return e.map(r=>{const s=/(\d+)([hms])/.exec(r);if(!s)throw new P(`Could not parse partial duration string: ${r}`);const[,a,u]=s;return parseInt(a,10)*{h:3600,m:60,s:1}[u]}).reduce((r,s)=>r+s)}get streamId(){return this[t].stream_id}get mutedSegmentData(){return this[t].muted_segments?.slice()??[]}isMutedAt(e,r,s=!1){if(this[t].muted_segments===null)return!1;if(r==null)return this[t].muted_segments.some(u=>u.offset<=e&&e<=u.offset+u.duration);const a=e+r;return s?this[t].muted_segments.some(u=>{const _=u.offset+u.duration;return e<_&&u.offset<a}):this[t].muted_segments.some(u=>{const _=u.offset+u.duration;return u.offset<=e&&a<=_})}};i([h(!1)],ae.prototype,"_client",void 0);i([U()],ae.prototype,"durationInSeconds",null);ae=i([ls,o("api","HelixVideo","id")],ae);var Ze;let At=Ze=class extends N{_getVideoByIdBatcher=new H({url:"videos"},"id","id",this._client,e=>new ae(e,this._client));async getVideosByIds(e){return(await this._getVideos("id",e)).data}async getVideoById(e){const r=await this.getVideosByIds([e]);return r.length?r[0]:null}async getVideoByIdBatched(e){return await this._getVideoByIdBatcher.request(e)}async getVideosByUser(e,r={}){const s=c(e);return await this._getVideos("user_id",[s],r)}getVideosByUserPaginated(e,r={}){const s=c(e);return this._getVideosPaginated("user_id",[s],r)}async getVideosByGame(e,r={}){return await this._getVideos("game_id",[e],r)}getVideosByGamePaginated(e,r={}){return this._getVideosPaginated("game_id",[e],r)}async deleteVideosByIds(e,r){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:c(e),query:{id:r}})}async _getVideos(e,r,s={}){if(!r.length)return{data:[]};const a=await this._client.callApi({type:"helix",url:"videos",userId:e==="user_id"?r[0]:void 0,query:{...Ze._makeVideosQuery(e,r,s),...S(s)}});return A(a,ae,this._client)}_getVideosPaginated(e,r,s={}){return new x({url:"videos",userId:e==="user_id"?r[0]:void 0,query:Ze._makeVideosQuery(e,r,s)},this._client,a=>new ae(a,this._client))}static _makeVideosQuery(e,r,s={}){const{language:a,period:u,orderBy:_,type:g}=s;return{[e]:r,language:a,period:u,sort:_,type:g}}};i([h(!1)],At.prototype,"_getVideoByIdBatcher",void 0);At=Ze=i([o("api","HelixVideoApi")],At);function Lu(n,e){return{from_user_id:c(n),to_user_id:c(e)}}let Ys=class extends N{async sendWhisper(e,r,s){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:c(e),scopes:["user:manage:whispers"],query:Lu(e,r),jsonBody:{message:s}})}};Ys=i([o("api","HelixWhisperApi")],Ys);class Vu{_options;_httpStatus;_resolvedUserId;constructor(e,r,s){this._options=e,this._httpStatus=r,this._resolvedUserId=s}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}let E=class extends us{_config;_logger;_rateLimiter;onRequest=this.registerEvent();constructor(e,r,s){super(),this._config=e,this._logger=r,this._rateLimiter=s}async requestScopesForUser(e,r){await this._config.authProvider.getAccessTokenForUser(e,...r.map(s=>[s]))}async getTokenInfo(){try{const e=await this.callApi({type:"auth",url:"validate"});return new et(e)}catch(e){throw e instanceof oe&&e.statusCode===401?new uo({cause:e}):e}}async callApi(e){const{authProvider:r}=this._config;if(!(e.auth??!0))return await oo(e,r.clientId,void 0,void 0,this._config.fetchOptions);let a=!1;if(e.forceType)switch(e.forceType){case"app":{if(!r.getAppAccessToken)throw new Error("Tried to make an API call that requires an app access token but your auth provider does not support that");const g=await r.getAppAccessToken();return await this._callApiUsingInitialToken(e,g)}case"user":{a=!0;break}default:throw new P(`Unknown forced token type: ${e.forceType}`)}if(e.scopes&&(a=!0),a){const g=e.canOverrideScopedUserContext?this._getUserIdFromRequestContext(e.userId):e.userId;if(!g)throw new Error("Tried to make an API call with a user context but no context user ID");const p=await r.getAccessTokenForUser(g,e.scopes);if(!p)throw new Error(`Tried to make an API call with a user context for user ID ${g} but no token was found`);if(xa(p)&&r.refreshAccessTokenForUser){const m=await r.refreshAccessTokenForUser(g);return await this._callApiUsingInitialToken(e,m,!0)}return await this._callApiUsingInitialToken(e,p)}const u=this._getUserIdFromRequestContext(e.userId),_=u===null?await r.getAnyAccessToken():await r.getAnyAccessToken(u??e.userId);if(xa(_)&&_.userId&&r.refreshAccessTokenForUser){const g=await r.refreshAccessTokenForUser(_.userId);return await this._callApiUsingInitialToken(e,g,!0)}return await this._callApiUsingInitialToken(e,_)}get bits(){return new Es(this)}get channels(){return new it(this)}get channelPoints(){return new Bs(this)}get charity(){return new Ts(this)}get chat(){return new Ds(this)}get clips(){return new pt(this)}get contentClassificationLabels(){return new As(this)}get entitlements(){return new bt(this)}get eventSub(){return new Ms(this)}get extensions(){return new Rs(this)}get games(){return new ye(this)}get hypeTrain(){return new Cu(this)}get goals(){return new Ps(this)}get moderation(){return new ks(this)}get polls(){return new Ws(this)}get predictions(){return new Os(this)}get raids(){return new Gs(this)}get schedule(){return new qu(this)}get search(){return new Ls(this)}get streams(){return new $e(this)}get subscriptions(){return new Qs(this)}get teams(){return new zs(this)}get users(){return new je(this)}get videos(){return new At(this)}get whispers(){return new Ys(this)}get rateLimiterStats(){return this._rateLimiter instanceof Ca?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _batchDelay(){return this._config.batchDelay??0}_getUserIdFromRequestContext(e){return e}async _callApiUsingInitialToken(e,r,s=!1){const{authProvider:a}=this._config,{authorizationType:u}=a;let _=await this._callApiInternal(e,a.clientId,r.accessToken,u);if(_.status===401&&!s){if(r.userId){if(a.refreshAccessTokenForUser){const g=await a.refreshAccessTokenForUser(r.userId);_=await this._callApiInternal(e,a.clientId,g.accessToken,u)}}else if(a.getAppAccessToken){const g=await a.getAppAccessToken(!0);_=await this._callApiInternal(e,a.clientId,g.accessToken,u)}}return this.emit(this.onRequest,new Vu(e,_.status,r.userId??null)),await Is(_,e),await ao(_)}async _callApiInternal(e,r,s,a){const{fetchOptions:u}=this._config,_=e.type??"helix";this._logger.debug(`Calling ${_} API: ${e.method??"GET"} ${e.url}`),this._logger.trace(`Query: ${JSON.stringify(e.query)}`),e.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(e.jsonBody)}`);const g=ru.operation({retries:3,minTimeout:500,factor:2}),{promise:p,resolve:m,reject:v}=so();g.attempt(async()=>{try{const M=_==="helix"?await this._rateLimiter.request({options:e,clientId:r,accessToken:s,authorizationType:a,fetchOptions:u}):await os(e,r,s,a,u);!M.ok&&M.status>=500&&M.status<600&&await Is(M,e),m(M)}catch(M){if(g.retry(M))return;v(g.mainError())}});const T=await p;return this._logger.debug(`Called ${_} API: ${e.method??"GET"} ${e.url} - result: ${T.status}`),T}};i([U()],E.prototype,"bits",null);i([U()],E.prototype,"channels",null);i([U()],E.prototype,"channelPoints",null);i([U()],E.prototype,"charity",null);i([U()],E.prototype,"chat",null);i([U()],E.prototype,"clips",null);i([U()],E.prototype,"contentClassificationLabels",null);i([U()],E.prototype,"entitlements",null);i([U()],E.prototype,"eventSub",null);i([U()],E.prototype,"extensions",null);i([U()],E.prototype,"games",null);i([U()],E.prototype,"hypeTrain",null);i([U()],E.prototype,"goals",null);i([U()],E.prototype,"moderation",null);i([U()],E.prototype,"polls",null);i([U()],E.prototype,"predictions",null);i([U()],E.prototype,"raids",null);i([U()],E.prototype,"schedule",null);i([U()],E.prototype,"search",null);i([U()],E.prototype,"streams",null);i([U()],E.prototype,"subscriptions",null);i([U()],E.prototype,"teams",null);i([U()],E.prototype,"users",null);i([U()],E.prototype,"videos",null);i([U()],E.prototype,"whispers",null);E=i([ls,o("api","ApiClient")],E);let Js=class extends E{_getUserIdFromRequestContext(){return null}};Js=i([o("api","ApiClient")],Js);let Mt=class extends E{_userId;constructor(e,r,s,a){super(e,r,s),this._userId=a}_getUserIdFromRequestContext(){return this._userId}};Mt=i([o("api","ApiClient")],Mt);let Ya=class extends E{constructor(e){if(!e.authProvider)throw new Yo("No auth provider given. Please supply the `authProvider` option.");const r={name:"twurple:api:rate-limiter",...e.logger};super(e,Je({name:"twurple:api:client",...e.logger}),cs?new zo({getPartitionKey:s=>s.userId??null,createChild:()=>new Jo({logger:r})}):new Ko({logger:r,bucketSize:800,timeFrame:64e3,doRequest:async({options:s,clientId:a,accessToken:u,authorizationType:_,fetchOptions:g})=>await os(s,a,u,_,g),getPartitionKey:s=>s.userId??null}))}async asUser(e,r){const s=new Mt(this._config,this._logger,this._rateLimiter,c(e));return await r(s)}async asIntent(e,r){if(!this._authProvider.getAccessTokenForIntent)throw new Error("Trying to use intents with an auth provider that does not support them");for(const s of e){const a=await this._authProvider.getAccessTokenForIntent(s);if(a){const u=new Mt(this._config,this._logger,this._rateLimiter,a.userId);return await r(u)}}throw new Error(`Intents [${e.join(", ")}] not found in auth provider`)}async withoutUser(e){const r=new Js(this._config,this._logger,this._rateLimiter);return await e(r)}};Ya=i([o("api","ApiClient")],Ya);let b=class{_handler;_client;_verified=!1;_twitchSubscriptionData;constructor(e,r){this._handler=e,this._client=r}get verified(){return this._verified}get _twitchId(){return this._twitchSubscriptionData?.id}_verify(){this._verified=!0}async _handleData(e){await this._handler(this.transformData(e))}start(e){if(e){if(e.status==="enabled"||e.status==="webhook_callback_verification_pending"){this._twitchSubscriptionData=e,this._verified=!0,this._client._logger.debug(`Successfully resumed subscription for event: ${this.id}`);return}this._client._logger.info(`Cycling broken conflicting subscription for event: ${this.id}`),this._unsubscribe().then(()=>this._subscribeAndSave(),r=>this._client._notifySubscriptionDeleteError(this,r))}else this._subscribeAndSave()}suspend(){this._twitchSubscriptionData&&this._unsubscribe().then(()=>{this._verified=!1,this._twitchSubscriptionData=void 0},e=>this._client._notifySubscriptionDeleteError(this,e))}stop(){this.suspend(),this._client._dropSubscription(this.id)}async getCliTestCommand(){return await this._client._getCliTestCommandForSubscription(this)}_droppedByTwitch(){this._twitchSubscriptionData=void 0,this._verified=!1}async _getTransportOptions(){return await this._client._getTransportOptionsForSubscription(this)}_subscribeAndSave(){this._subscribe().then(e=>{this._twitchSubscriptionData=e,this._client._registerTwitchSubscription(this,e)},e=>{this._client._logger.error(`Subscription ${this.id} failed to subscribe: ${e.message??e}`),this._client._notifySubscriptionCreateError(this,e)})}async _unsubscribe(){if(this._twitchSubscriptionData){const e=this._twitchSubscriptionData.id;if(this._twitchSubscriptionData._transport.method==="websocket"){if(!this.authUserId)throw new P(`Trying to delete a websocket subscription that does not have user context (${this.id})`);await this._client._apiClient.asUser(this.authUserId,async r=>await r.eventSub.deleteSubscription(e))}else await this._client._apiClient.withoutUser(async r=>await r.eventSub.deleteSubscription(e))}this._client._dropTwitchSubscription(this.id),this._client._notifySubscriptionDeleteSuccess(this)}};b=i([o("eventsub-base","EventSubSubscription")],b);let Rt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}get category(){return this[t].category}get level(){return this[t].level}get holdDate(){return new Date(this[t].held_at)}};i([h(!1)],Rt.prototype,"_client",void 0);Rt=i([o("eventsub-base","EventSubAutoModMessageHoldEvent","messageId")],Rt);let Xs=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`automod.message.hold.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Rt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToAutoModMessageHoldEvents(this._broadcasterId,await this._getTransportOptions()))}};Xs=i([o("eventsub-base","EventSubSubscription")],Xs);let Pt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].user_id}get moderatorName(){return this[t].user_login}get moderatorDisplayName(){return this[t].user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}get category(){return this[t].category}get level(){return this[t].level}get status(){return this[t].status}get holdDate(){return new Date(this[t].held_at)}};i([h(!1)],Pt.prototype,"_client",void 0);Pt=i([o("eventsub-base","EventSubAutoModMessageUpdateEvent","messageId")],Pt);let Zs=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`automod.message.update.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Pt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToAutoModMessageUpdateEvents(this._broadcasterId,await this._getTransportOptions()))}};Zs=i([o("eventsub-base","EventSubSubscription")],Zs);let en=class extends l{_messageText;constructor(e,r){super(e),this._messageText=r}get start(){return this[t].start_pos}get end(){return this[t].end_pos}get text(){return this._messageText.substring(this.start,this.end+1)}};en=i([o("eventsub-base","EventSubAutoModMessageAutoModBoundary")],en);let Ht=class extends l{_messageText;constructor(e,r){super(e),this._messageText=r}get category(){return this[t].category}get level(){return this[t].level}get boundaries(){return this[t].boundaries.map(e=>new en(e,this._messageText))}};Ht=i([o("eventsub-base","EventSubAutoModMessageAutoMod")],Ht);let kt=class extends l{_messageText;constructor(e,r){super(e),this._messageText=r}get id(){return this[t].term_id}get start(){return this[t].boundary.start_pos}get end(){return this[t].boundary.end_pos}get text(){return this._messageText.substring(this.start,this.end+1)}get ownerBroadcasterId(){return this[t].owner_broadcaster_user_id}get ownerBroadcasterName(){return this[t].owner_broadcaster_user_login}get ownerBroadcasterDisplayName(){return this[t].owner_broadcaster_user_name}};kt=i([o("eventsub-base","EventSubAutoModMessageBlockedTerm")],kt);let qt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}get reason(){return this[t].reason}get autoMod(){return this[t].automod?new Ht(this[t].automod,this.messageText):null}get blockedTerms(){return this[t].blocked_term?this[t].blocked_term.terms_found.map(e=>new kt(e,this.messageText)):null}get holdDate(){return new Date(this[t].held_at)}};i([h(!1)],qt.prototype,"_client",void 0);qt=i([o("eventsub-base","EventSubAutoModMessageHoldV2Event","messageId")],qt);let tn=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`automod.message.hold.v2.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new qt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToAutoModMessageHoldV2Events(this._broadcasterId,await this._getTransportOptions()))}};tn=i([o("eventsub-base","EventSubSubscription")],tn);let Wt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].user_id}get moderatorName(){return this[t].user_login}get moderatorDisplayName(){return this[t].user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}get reason(){return this[t].reason}get autoMod(){return this[t].automod?new Ht(this[t].automod,this.messageText):null}get blockedTerms(){return this[t].blocked_term?this[t].blocked_term.terms_found.map(e=>new kt(e,this.messageText)):null}get status(){return this[t].status}get holdDate(){return new Date(this[t].held_at)}};i([h(!1)],Wt.prototype,"_client",void 0);Wt=i([o("eventsub-base","EventSubAutoModMessageUpdateV2Event","messageId")],Wt);let rn=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`automod.message.update.v2.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Wt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToAutoModMessageUpdateV2Events(this._broadcasterId,await this._getTransportOptions()))}};rn=i([o("eventsub-base","EventSubSubscription")],rn);let Ot=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get overallLevel(){return this[t].overall_level}get aggression(){return this[t].aggression}get bullying(){return this[t].bullying}get disability(){return this[t].disability}get misogyny(){return this[t].misogyny}get raceEthnicityOrReligion(){return this[t].race_ethnicity_or_religion}get sexBasedTerms(){return this[t].sex_based_terms}get sexualitySexOrGender(){return this[t].sexuality_sex_or_gender}get swearing(){return this[t].swearing}};i([h(!1)],Ot.prototype,"_client",void 0);Ot=i([o("eventsub-base","EventSubAutoModSettingsUpdateEvent","broadcasterId")],Ot);let sn=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`automod.settings.update.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Ot(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToAutoModSettingsUpdateEvents(this._broadcasterId,await this._getTransportOptions()))}};sn=i([o("eventsub-base","EventSubSubscription")],sn);let $t=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get action(){return this[t].action}get fromAutoMod(){return this[t].from_automod}get terms(){return this[t].terms}};i([h(!1)],$t.prototype,"_client",void 0);$t=i([o("eventsub-base","EventSubAutoModTermsUpdateEvent","broadcasterId")],$t);let nn=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`automod.terms.update.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new $t(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToAutoModTermsUpdateEvents(this._broadcasterId,await this._getTransportOptions()))}};nn=i([o("eventsub-base","EventSubSubscription")],nn);let Gt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}};i([h(!1)],Gt.prototype,"_client",void 0);Gt=i([o("eventsub-base","EventSubChannelChatUserMessageHoldEvent","messageId")],Gt);let an=class extends b{_broadcasterId;_userId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat.user_message_hold.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Gt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatUserMessageHoldEvents(this._broadcasterId,await this._getTransportOptions()))}};an=i([o("eventsub-base","EventSubSubscription")],an);let Ft=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}get status(){return this[t].status}};i([h(!1)],Ft.prototype,"_client",void 0);Ft=i([o("eventsub-base","EventSubChannelChatUserMessageUpdateEvent","messageId")],Ft);let on=class extends b{_broadcasterId;_userId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat.user_message_update.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Ft(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatUserMessageUpdateEvents(this._broadcasterId,await this._getTransportOptions()))}};on=i([o("eventsub-base","EventSubSubscription")],on);let Lt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get requesterId(){return this[t].requester_user_id}get requesterName(){return this[t].requester_user_login}get requesterDisplayName(){return this[t].requester_user_name}async getRequester(){return d(await this._client.users.getUserById(this[t].requester_user_id))}get durationSeconds(){return this[t].duration_seconds}get startDate(){return new Date(this[t].started_at)}get isAutomatic(){return this[t].is_automatic}};i([h(!1)],Lt.prototype,"_client",void 0);Lt=i([o("eventsub-base","EventSubChannelAdBreakBeginEvent","broadcasterId")],Lt);let un=class extends b{_userId;_cliName="ad-break-begin";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.ad_break.begin.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Lt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelAdBreakBeginEvents(this._userId,await this._getTransportOptions())}};un=i([o("eventsub-base","EventSubSubscription")],un);let Vt=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get reason(){return this[t].reason}get startDate(){return new Date(this[t].banned_at)}get endDate(){return B(this[t].ends_at,e=>new Date(e))}get isPermanent(){return this[t].is_permanent}};i([h(!1)],Vt.prototype,"_client",void 0);Vt=i([o("eventsub-base","EventSubChannelBanEvent","userId")],Vt);let cn=class extends b{_userId;_cliName="ban";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.ban.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Vt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelBanEvents(this._userId,await this._getTransportOptions())}};cn=i([o("eventsub-base","EventSubSubscription")],cn);let dn=class extends l{get type(){return this[t].type}get emote(){return this[t].emote}get messageEffectId(){return this[t].message_effect_id}};dn=i([o("eventsub-base","EventSubChannelBitsUsePowerUp")],dn);let jt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get type(){return this[t].type}get bits(){return this[t].bits}get messageText(){return this[t].message?.text??null}get messageParts(){return this[t].message?.fragments??null}get powerUp(){return B(this[t].power_up,e=>new dn(e))}};i([h(!1)],jt.prototype,"_client",void 0);jt=i([o("eventsub-base","EventSubChannelBitsUserEvent","userId")],jt);let ln=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.bits.use.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new jt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelBitsUseEvents(this._userId,await this._getTransportOptions())}};ln=i([o("eventsub-base","EventSubSubscription")],ln);let $=class extends l{get value(){return this[t].value}get decimalPlaces(){return this[t].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[t].currency}};$=i([o("eventsub-base","EventSubChannelCharityAmount")],$);let Qt=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get charityName(){return this[t].charity_name}get charityDescription(){return this[t].charity_description}get charityLogo(){return this[t].charity_logo}get charityWebsite(){return this[t].charity_website}get currentAmount(){return new $(this[t].current_amount)}get targetAmount(){return new $(this[t].target_amount)}};i([h(!1)],Qt.prototype,"_client",void 0);Qt=i([o("eventsub-base","EventSubChannelCharityCampaignProgressEvent","id")],Qt);let hn=class extends b{_userId;_cliName="charity-progress";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.charity_campaign.progress.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Qt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelCharityCampaignProgressEvents(this._userId,await this._getTransportOptions())}};hn=i([o("eventsub-base","EventSubSubscription")],hn);let zt=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get charityName(){return this[t].charity_name}get charityDescription(){return this[t].charity_description}get charityLogo(){return this[t].charity_logo}get charityWebsite(){return this[t].charity_website}get currentAmount(){return new $(this[t].current_amount)}get targetAmount(){return new $(this[t].target_amount)}get startDate(){return new Date(this[t].started_at)}};i([h(!1)],zt.prototype,"_client",void 0);zt=i([o("eventsub-base","EventSubChannelCharityCampaignStartEvent","id")],zt);let _n=class extends b{_userId;_cliName="charity-start";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.charity_campaign.start.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new zt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelCharityCampaignStartEvents(this._userId,await this._getTransportOptions())}};_n=i([o("eventsub-base","EventSubSubscription")],_n);let Kt=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get charityName(){return this[t].charity_name}get charityDescription(){return this[t].charity_description}get charityLogo(){return this[t].charity_logo}get charityWebsite(){return this[t].charity_website}get currentAmount(){return new $(this[t].current_amount)}get targetAmount(){return new $(this[t].target_amount)}get endDate(){return new Date(this[t].stopped_at)}};i([h(!1)],Kt.prototype,"_client",void 0);Kt=i([o("eventsub-base","EventSubChannelCharityCampaignStopEvent","id")],Kt);let gn=class extends b{_userId;_cliName="charity-stop";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.charity_campaign.stop.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Kt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelCharityCampaignStopEvents(this._userId,await this._getTransportOptions())}};gn=i([o("eventsub-base","EventSubSubscription")],gn);let Yt=class extends l{_client;constructor(e,r){super(e),this._client=r}get campaignId(){return this[t].campaign_id}get broadcasterId(){return this[t].broadcaster_id}get broadcasterName(){return this[t].broadcaster_login}get broadcasterDisplayName(){return this[t].broadcaster_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_id))}get donorId(){return this[t].user_id}get donorName(){return this[t].user_login}get donorDisplayName(){return this[t].user_name}async getDonor(){return d(await this._client.users.getUserById(this[t].user_id))}get charityName(){return this[t].charity_name}get charityDescription(){return this[t].charity_description}get charityLogo(){return this[t].charity_logo}get charityWebsite(){return this[t].charity_website}get amount(){return new $(this[t].amount)}};i([h(!1)],Yt.prototype,"_client",void 0);Yt=i([o("eventsub-base","EventSubChannelCharityDonationEvent","broadcasterId")],Yt);let pn=class extends b{_userId;_cliName="charity-donation";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.charity_campaign.donate.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Yt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelCharityDonationEvents(this._userId,await this._getTransportOptions())}};pn=i([o("eventsub-base","EventSubSubscription")],pn);let Jt=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}};i([h(!1)],Jt.prototype,"_client",void 0);Jt=i([o("eventsub-base","EventSubChannelChatClearEvent","broadcasterId")],Jt);let bn=class extends b{_broadcasterId;_userId;_cliName="chat-clear";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat.clear.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Jt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatClearEvents(this._broadcasterId,await this._getTransportOptions()))}};bn=i([o("eventsub-base","EventSubSubscription")],bn);let Xt=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].target_user_id}get userName(){return this[t].target_user_login}get userDisplayName(){return this[t].target_user_name}async getUser(){return d(await this._client.users.getUserById(this[t].target_user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}};i([h(!1)],Xt.prototype,"_client",void 0);Xt=i([o("eventsub-base","EventSubChannelChatClearUserMessagesEvent","broadcasterId")],Xt);let mn=class extends b{_broadcasterId;_userId;_cliName="chat-clear-user-messages";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat.clear_user_messages.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Xt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatClearUserMessagesEvents(this._broadcasterId,await this._getTransportOptions()))}};mn=i([o("eventsub-base","EventSubSubscription")],mn);let Zt=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].target_user_id}get userName(){return this[t].target_user_login}get userDisplayName(){return this[t].target_user_name}async getUser(){return d(await this._client.users.getUserById(this[t].target_user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get messageId(){return this[t].message_id}};i([h(!1)],Zt.prototype,"_client",void 0);Zt=i([o("eventsub-base","EventSubChannelChatMessageDeleteEvent","broadcasterId")],Zt);let yn=class extends b{_broadcasterId;_userId;_cliName="chat-message-delete";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat.message_delete.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Zt(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatMessageDeleteEvents(this._broadcasterId,await this._getTransportOptions()))}};yn=i([o("eventsub-base","EventSubSubscription")],yn);let er=class extends l{_client;constructor(e,r){super(e),this._client=r}get messageType(){return this[t].message_type}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get chatterId(){return this[t].chatter_user_id}get chatterName(){return this[t].chatter_user_login}get chatterDisplayName(){return this[t].chatter_user_name}async getChatter(){return d(await this._client.users.getUserById(this[t].chatter_user_id))}get color(){return this[t].color||null}get badges(){return Object.fromEntries(this[t].badges.map(e=>[e.set_id,e.id]))}hasBadge(e){return this[t].badges.some(r=>r.set_id===e)}getBadgeInfo(e){return this[t].badges.find(r=>r.set_id===e)?.info??null}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}get parentMessageId(){return this[t].reply?.parent_message_id??null}get parentMessageText(){return this[t].reply?.parent_message_body??null}get parentMessageUserId(){return this[t].reply?.parent_user_id??null}get parentMessageUserName(){return this[t].reply?.parent_user_login??null}get parentMessageUserDisplayName(){return this[t].reply?.parent_user_name??null}get threadMessageId(){return this[t].reply?.thread_message_id??null}get threadMessageUserId(){return this[t].reply?.thread_user_id??null}get threadMessageUserName(){return this[t].reply?.thread_user_login??null}get threadMessageUserDisplayName(){return this[t].reply?.thread_user_name??null}get isCheer(){return!!this[t].cheer}get bits(){return this[t].cheer?.bits??0}get isRedemption(){return!!this[t].channel_points_custom_reward_id}get rewardId(){return this[t].channel_points_custom_reward_id??null}get sourceBroadcasterId(){return this[t].source_broadcaster_user_id}get sourceBroadcasterName(){return this[t].source_broadcaster_user_login}get sourceBroadcasterDisplayName(){return this[t].source_broadcaster_user_name}get sourceMessageId(){return this[t].source_message_id}get sourceBadges(){return this[t].source_badges?Object.fromEntries(this[t].source_badges.map(e=>[e.set_id,e.id])):null}hasSourceBadge(e){return this[t].source_badges?this[t].source_badges.some(r=>r.set_id===e):null}getSourceBadgeInfo(e){return this[t].source_badges?.find(r=>r.set_id===e)?.info??null}get isSourceOnly(){return this[t].is_source_only}};i([h(!1)],er.prototype,"_client",void 0);er=i([o("eventsub-base","EventSubChannelChatMessageEvent","broadcasterId")],er);let vn=class extends b{_broadcasterId;_userId;_cliName="chat-notification";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat.message.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new er(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatMessageEvents(this._broadcasterId,await this._getTransportOptions()))}};vn=i([o("eventsub-base","EventSubSubscription")],vn);let D=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get chatterIsAnonymous(){return this[t].chatter_is_anonymous}get chatterId(){return this[t].chatter_user_id}get chatterName(){return this[t].chatter_user_login}get chatterDisplayName(){return this[t].chatter_user_name}async getChatter(){return d(await this._client.users.getUserById(this[t].chatter_user_id))}get color(){return this[t].color||null}get badges(){return Object.fromEntries(this[t].badges.map(e=>[e.set_id,e.id]))}hasBadge(e){return this[t].badges.some(r=>r.set_id===e)}getBadgeInfo(e){return this[t].badges.find(r=>r.set_id===e)?.info??null}get messageId(){return this[t].message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}get sourceBroadcasterId(){return this[t].source_broadcaster_user_id}get sourceBroadcasterName(){return this[t].source_broadcaster_user_login}get sourceBroadcasterDisplayName(){return this[t].source_broadcaster_user_name}get sourceMessageId(){return this[t].source_message_id}get sourceBadges(){return this[t].source_badges?Object.fromEntries(this[t].source_badges.map(e=>[e.set_id,e.id])):null}hasSourceBadge(e){return this[t].source_badges?this[t].source_badges.some(r=>r.set_id===e):null}getSourceBadgeInfo(e){return this[t].source_badges?.find(r=>r.set_id===e)?.info??null}};i([h(!1)],D.prototype,"_client",void 0);D=i([o("eventsub-base","EventSubChannelChatBaseNotificationEvent","broadcasterId")],D);let wn=class extends D{type="announcement";get announcementColor(){return this[t].announcement.color}};wn=i([o("eventsub-base","EventSubChannelChatAnnouncementNotificationEvent","broadcasterId")],wn);let Sn=class extends D{type="bits_badge_tier";get newTier(){return this[t].bits_badge_tier.tier}};Sn=i([o("eventsub-base","EventSubChannelChatBitsBadgeTierNotificationEvent","broadcasterId")],Sn);let Cn=class extends D{type="charity_donation";get charityName(){return this[t].charity_donation.charity_name}get amount(){return new $(this[t].charity_donation.amount)}};Cn=i([o("eventsub-base","EventSubChannelChatCharityDonationNotificationEvent","broadcasterId")],Cn);let In=class extends D{type="community_sub_gift";get id(){return this[t].community_sub_gift.id}get tier(){return this[t].community_sub_gift.sub_tier}get amount(){return this[t].community_sub_gift.total}get cumulativeAmount(){return this[t].community_sub_gift.cumulative_total}};In=i([o("eventsub-base","EventSubChannelChatCommunitySubGiftNotificationEvent","broadcasterId")],In);let fn=class extends D{type="gift_paid_upgrade";get isGifterAnonymous(){return this[t].gift_paid_upgrade.gifter_is_anonymous}get gifterId(){return this[t].gift_paid_upgrade.gifter_user_id}get gifterName(){return this[t].gift_paid_upgrade.gifter_user_login}get gifterDisplayName(){return this[t].gift_paid_upgrade.gifter_user_name}async getGifter(){return await B(this[t].gift_paid_upgrade.gifter_user_id,async e=>await this._client.users.getUserById(e))}};fn=i([o("eventsub-base","EventSubChannelChatGiftPaidUpgradeNotificationEvent","broadcasterId")],fn);let En=class extends D{type="pay_it_forward";get isGifterAnonymous(){return this[t].pay_it_forward.gifter_is_anonymous}get gifterId(){return this[t].pay_it_forward.gifter_user_id}get gifterName(){return this[t].pay_it_forward.gifter_user_login}get gifterDisplayName(){return this[t].pay_it_forward.gifter_user_name}async getGifter(){return await B(this[t].pay_it_forward.gifter_user_id,async e=>await this._client.users.getUserById(e))}};En=i([o("eventsub-base","EventSubChannelChatPayItForwardNotificationEvent","broadcasterId")],En);let xn=class extends D{type="prime_paid_upgrade";get tier(){return this[t].prime_paid_upgrade.sub_tier}};xn=i([o("eventsub-base","EventSubChannelChatPrimePaidUpgradeNotificationEvent","broadcasterId")],xn);let Un=class extends D{type="raid";get raiderId(){return this[t].raid.user_id}get raiderName(){return this[t].raid.user_login}get raiderDisplayName(){return this[t].raid.user_name}async getRaider(){return d(await this._client.users.getUserById(this[t].raid.user_id))}get viewerCount(){return this[t].raid.viewer_count}get raiderProfileImageUrl(){return this[t].raid.profile_image_url}};Un=i([o("eventsub-base","EventSubChannelChatRaidNotificationEvent","broadcasterId")],Un);let Bn=class extends D{type="resub";get tier(){return this[t].resub.sub_tier}get isPrime(){return this[t].resub.is_prime}get durationMonths(){return this[t].resub.duration_months||1}get cumulativeMonths(){return this[t].resub.cumulative_months}get streakMonths(){return this[t].resub.streak_months??null}get isGift(){return this[t].resub.is_gift}get isGifterAnonymous(){return this[t].resub.gifter_is_anonymous??null}get gifterId(){return this[t].resub.gifter_user_id}get gifterName(){return this[t].resub.gifter_user_login}get gifterDisplayName(){return this[t].resub.gifter_user_name}async getGifter(){return await B(this[t].resub.gifter_user_id,async e=>await this._client.users.getUserById(e))}};Bn=i([o("eventsub-base","EventSubChannelChatSubNotificationEvent","broadcasterId")],Bn);let Tn=class extends D{type="sub_gift";get tier(){return this[t].sub_gift.sub_tier}get durationMonths(){return this[t].sub_gift.duration_months||1}get cumulativeAmount(){return this[t].sub_gift.cumulative_total}get recipientId(){return this[t].sub_gift.recipient_user_id}get recipientName(){return this[t].sub_gift.recipient_user_login}get recipientDisplayName(){return this[t].sub_gift.recipient_user_name}async getRecipient(){return d(await this._client.users.getUserById(this[t].sub_gift.recipient_user_id))}get communityGiftId(){return this[t].sub_gift.community_gift_id}};Tn=i([o("eventsub-base","EventSubChannelChatSubGiftNotificationEvent","broadcasterId")],Tn);let Nn=class extends D{type="sub";get tier(){return this[t].sub.sub_tier}get isPrime(){return this[t].sub.is_prime}get durationMonths(){return this[t].sub.duration_months}};Nn=i([o("eventsub-base","EventSubChannelChatResubNotificationEvent","broadcasterId")],Nn);let Dn=class extends D{type="unraid"};Dn=i([o("eventsub-base","EventSubChannelChatUnraidNotificationEvent","broadcasterId")],Dn);let An=class extends D{type="shared_chat_sub";get tier(){return this[t].shared_chat_sub.sub_tier}get isPrime(){return this[t].shared_chat_sub.is_prime}get durationMonths(){return this[t].shared_chat_sub.duration_months}};An=i([o("eventsub-base","EventSubChannelChatSharedChatSubNotificationEvent","broadcasterId")],An);let Mn=class extends D{type="shared_chat_resub";get tier(){return this[t].shared_chat_resub.sub_tier}get isPrime(){return this[t].shared_chat_resub.is_prime}get durationMonths(){return this[t].shared_chat_resub.duration_months||1}get cumulativeMonths(){return this[t].shared_chat_resub.cumulative_months}get streakMonths(){return this[t].shared_chat_resub.streak_months??null}get isGift(){return this[t].shared_chat_resub.is_gift}get isGifterAnonymous(){return this[t].shared_chat_resub.gifter_is_anonymous??null}get gifterId(){return this[t].shared_chat_resub.gifter_user_id}get gifterName(){return this[t].shared_chat_resub.gifter_user_login}get gifterDisplayName(){return this[t].shared_chat_resub.gifter_user_name}async getGifter(){return await B(this[t].shared_chat_resub.gifter_user_id,async e=>await this._client.users.getUserById(e))}};Mn=i([o("eventsub-base","EventSubChannelChatSharedChatResubNotificationEvent","broadcasterId")],Mn);let Rn=class extends D{type="shared_chat_sub_gift";get tier(){return this[t].shared_chat_sub_gift.sub_tier}get durationMonths(){return this[t].shared_chat_sub_gift.duration_months||1}get cumulativeAmount(){return this[t].shared_chat_sub_gift.cumulative_total}get recipientId(){return this[t].shared_chat_sub_gift.recipient_user_id}get recipientName(){return this[t].shared_chat_sub_gift.recipient_user_login}get recipientDisplayName(){return this[t].shared_chat_sub_gift.recipient_user_name}async getRecipient(){return d(await this._client.users.getUserById(this[t].shared_chat_sub_gift.recipient_user_id))}get communityGiftId(){return this[t].shared_chat_sub_gift.community_gift_id}};Rn=i([o("eventsub-base","EventSubChannelChatSharedChatSubGiftNotificationEvent","broadcasterId")],Rn);let Pn=class extends D{type="shared_chat_community_sub_gift";get id(){return this[t].shared_chat_community_sub_gift.id}get tier(){return this[t].shared_chat_community_sub_gift.sub_tier}get amount(){return this[t].shared_chat_community_sub_gift.total}get cumulativeAmount(){return this[t].shared_chat_community_sub_gift.cumulative_total}};Pn=i([o("eventsub-base","EventSubChannelChatSharedChatCommunitySubGiftNotificationEvent","broadcasterId")],Pn);let Hn=class extends D{type="shared_chat_gift_paid_upgrade";get isGifterAnonymous(){return this[t].shared_chat_gift_paid_upgrade.gifter_is_anonymous}get gifterId(){return this[t].shared_chat_gift_paid_upgrade.gifter_user_id}get gifterName(){return this[t].shared_chat_gift_paid_upgrade.gifter_user_login}get gifterDisplayName(){return this[t].shared_chat_gift_paid_upgrade.gifter_user_name}async getGifter(){return await B(this[t].shared_chat_gift_paid_upgrade.gifter_user_id,async e=>await this._client.users.getUserById(e))}};Hn=i([o("eventsub-base","EventSubChannelChatSharedChatGiftPaidUpgradeNotificationEvent","broadcasterId")],Hn);let kn=class extends D{type="shared_chat_prime_paid_upgrade";get tier(){return this[t].shared_chat_prime_paid_upgrade.sub_tier}};kn=i([o("eventsub-base","EventSubChannelChatSharedChatPrimePaidUpgradeNotificationEvent","broadcasterId")],kn);let qn=class extends D{type="shared_chat_pay_it_forward";get isGifterAnonymous(){return this[t].shared_chat_pay_it_forward.gifter_is_anonymous}get gifterId(){return this[t].shared_chat_pay_it_forward.gifter_user_id}get gifterName(){return this[t].shared_chat_pay_it_forward.gifter_user_login}get gifterDisplayName(){return this[t].shared_chat_pay_it_forward.gifter_user_name}async getGifter(){return await B(this[t].shared_chat_pay_it_forward.gifter_user_id,async e=>await this._client.users.getUserById(e))}};qn=i([o("eventsub-base","EventSubChannelChatSharedChatPayItForwardNotificationEvent","broadcasterId")],qn);let Wn=class extends D{type="shared_chat_announcement";get color(){return this[t].shared_chat_announcement.color}};Wn=i([o("eventsub-base","EventSubChannelChatSharedChatAnnouncementNotificationEvent","broadcasterId")],Wn);let On=class extends D{type="shared_chat_raid";get raiderId(){return this[t].shared_chat_raid.user_id}get raiderName(){return this[t].shared_chat_raid.user_login}get raiderDisplayName(){return this[t].shared_chat_raid.user_name}async getRaider(){return d(await this._client.users.getUserById(this[t].shared_chat_raid.user_id))}get viewerCount(){return this[t].shared_chat_raid.viewer_count}get raiderProfileImageUrl(){return this[t].shared_chat_raid.profile_image_url}};On=i([o("eventsub-base","EventSubChannelChatSharedChatRaidNotificationEvent","broadcasterId")],On);let $n=class extends b{_broadcasterId;_userId;_cliName="chat-notification";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat.notification.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){switch(e.notice_type){case"sub":return new Nn(e,this._client._apiClient);case"resub":return new Bn(e,this._client._apiClient);case"sub_gift":return new Tn(e,this._client._apiClient);case"community_sub_gift":return new In(e,this._client._apiClient);case"gift_paid_upgrade":return new fn(e,this._client._apiClient);case"prime_paid_upgrade":return new xn(e,this._client._apiClient);case"raid":return new Un(e,this._client._apiClient);case"unraid":return new Dn(e,this._client._apiClient);case"pay_it_forward":return new En(e,this._client._apiClient);case"announcement":return new wn(e,this._client._apiClient);case"charity_donation":return new Cn(e,this._client._apiClient);case"bits_badge_tier":return new Sn(e,this._client._apiClient);case"shared_chat_sub":return new An(e,this._client._apiClient);case"shared_chat_resub":return new Mn(e,this._client._apiClient);case"shared_chat_sub_gift":return new Rn(e,this._client._apiClient);case"shared_chat_community_sub_gift":return new Pn(e,this._client._apiClient);case"shared_chat_gift_paid_upgrade":return new Hn(e,this._client._apiClient);case"shared_chat_prime_paid_upgrade":return new kn(e,this._client._apiClient);case"shared_chat_pay_it_forward":return new qn(e,this._client._apiClient);case"shared_chat_raid":return new On(e,this._client._apiClient);case"shared_chat_announcement":return new Wn(e,this._client._apiClient);default:throw new Error(`Unknown chat notification type: ${e.notice_type}`)}}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatNotificationEvents(this._broadcasterId,await this._getTransportOptions()))}};$n=i([o("eventsub-base","EventSubSubscription")],$n);let tr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get emoteOnlyModeEnabled(){return this[t].emote_mode}get followerOnlyModeEnabled(){return this[t].follower_mode}get followerOnlyModeDelay(){return this[t].follower_mode_duration_minutes}get slowModeEnabled(){return this[t].slow_mode}get slowModeDelay(){return this[t].slow_mode_wait_time_seconds}get subscriberOnlyModeEnabled(){return this[t].subscriber_mode}get uniqueChatModeEnabled(){return this[t].unique_chat_mode}};i([h(!1)],tr.prototype,"_client",void 0);tr=i([o("eventsub-base","EventSubChannelChatSettingsUpdateEvent","broadcasterId")],tr);let Gn=class extends b{_broadcasterId;_userId;_cliName="chat-settings-update";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._userId=a}get id(){return`channel.chat_settings.update.${this._broadcasterId}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new tr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._userId,async e=>await e.eventSub.subscribeToChannelChatSettingsUpdateEvents(this._broadcasterId,await this._getTransportOptions()))}};Gn=i([o("eventsub-base","EventSubSubscription")],Gn);let rr=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return await B(this[t].user_id,async e=>await this._client.users.getUserById(e))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get isAnonymous(){return this[t].is_anonymous}get message(){return this[t].message}get bits(){return this[t].bits}};i([h(!1)],rr.prototype,"_client",void 0);rr=i([o("eventsub-base","EventSubChannelCheerEvent","userId")],rr);let Fn=class extends b{_userId;_cliName="cheer";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.cheer.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new rr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelCheerEvents(this._userId,await this._getTransportOptions())}};Fn=i([o("eventsub-base","EventSubSubscription")],Fn);let sr=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get followDate(){return new Date(this[t].followed_at)}};i([h(!1)],sr.prototype,"_client",void 0);sr=i([o("eventsub-base","EventSubChannelFollowEvent","userId")],sr);let Ln=class extends b{_userId;_moderatorId;_cliName="follow";constructor(e,r,s,a){super(e,r),this._userId=s,this._moderatorId=a}get id(){return`channel.follow.${this._userId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new sr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelFollowEvents(this._userId,await this._getTransportOptions()))}};Ln=i([o("eventsub-base","EventSubSubscription")],Ln);let nr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get type(){return this[t].type}get description(){return this[t].description}get currentAmount(){return this[t].current_amount}get targetAmount(){return this[t].target_amount}get startDate(){return new Date(this[t].started_at)}};i([h(!1)],nr.prototype,"_client",void 0);nr=i([o("eventsub-base","EventSubChannelGoalBeginEvent","broadcasterId")],nr);let Vn=class extends b{_userId;_cliName="goal-begin";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.goal.begin.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new nr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelGoalBeginEvents(this._userId,await this._getTransportOptions())}};Vn=i([o("eventsub-base","EventSubSubscription")],Vn);let ir=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get type(){return this[t].type}get description(){return this[t].description}get isAchieved(){return this[t].is_achieved}get currentAmount(){return this[t].current_amount}get targetAmount(){return this[t].target_amount}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this[t].ended_at)}};i([h(!1)],ir.prototype,"_client",void 0);ir=i([o("eventsub-base","EventSubChannelGoalEndEvent","broadcasterId")],ir);let jn=class extends b{_userId;_cliName="goal-end";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.goal.end.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new ir(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelGoalEndEvents(this._userId,await this._getTransportOptions())}};jn=i([o("eventsub-base","EventSubSubscription")],jn);let ar=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get type(){return this[t].type}get description(){return this[t].description}get currentAmount(){return this[t].current_amount}get targetAmount(){return this[t].target_amount}get startDate(){return new Date(this[t].started_at)}};i([h(!1)],ar.prototype,"_client",void 0);ar=i([o("eventsub-base","EventSubChannelGoalProgressEvent","broadcasterId")],ar);let Qn=class extends b{_userId;_cliName="goal-progress";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.goal.progress.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new ar(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelGoalProgressEvents(this._userId,await this._getTransportOptions())}};Qn=i([o("eventsub-base","EventSubSubscription")],Qn);class L extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get type(){return this[t].type}get total(){return this[t].total}}i([h(!1)],L.prototype,"_client",void 0);let or=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get level(){return this[t].level}get total(){return this[t].total}get progress(){return this[t].progress}get goal(){return this[t].goal}get topContributors(){return this[t].top_contributions?.map(e=>new L(e,this._client))??[]}get lastContribution(){return new L(this[t].last_contribution,this._client)}get startDate(){return new Date(this[t].started_at)}get expiryDate(){return new Date(this[t].expires_at)}get isGoldenKappaTrain(){return this[t].is_golden_kappa_train}};i([h(!1)],or.prototype,"_client",void 0);or=i([o("eventsub-base","EventSubChannelHypeTrainBeginEvent","broadcasterId")],or);let zn=class extends b{_userId;_cliName="hype-train-begin";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.hype_train.begin.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new or(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelHypeTrainBeginEvents(this._userId,await this._getTransportOptions())}};zn=i([o("eventsub-base","EventSubSubscription")],zn);let ur=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get level(){return this[t].level}get total(){return this[t].total}get topContributors(){return this[t].top_contributions?.map(e=>new L(e,this._client))??[]}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this[t].ended_at)}get cooldownEndDate(){return new Date(this[t].cooldown_ends_at)}get isGoldenKappaTrain(){return this[t].is_golden_kappa_train}};i([h(!1)],ur.prototype,"_client",void 0);ur=i([o("eventsub-base","EventSubChannelHypeTrainEndEvent","broadcasterId")],ur);let Kn=class extends b{_userId;_cliName="hype-train-end";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.hype_train.end.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new ur(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelHypeTrainEndEvents(this._userId,await this._getTransportOptions())}};Kn=i([o("eventsub-base","EventSubSubscription")],Kn);let cr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get level(){return this[t].level}get total(){return this[t].total}get progress(){return this[t].progress}get goal(){return this[t].goal}get topContributors(){return this[t].top_contributions?.map(e=>new L(e,this._client))??[]}get lastContribution(){return new L(this[t].last_contribution,this._client)}get startDate(){return new Date(this[t].started_at)}get expiryDate(){return new Date(this[t].expires_at)}get isGoldenKappaTrain(){return this[t].is_golden_kappa_train}};i([h(!1)],cr.prototype,"_client",void 0);cr=i([o("eventsub-base","EventSubChannelHypeTrainProgressEvent","broadcasterId")],cr);let Yn=class extends b{_userId;_cliName="hype-train-progress";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.hype_train.progress.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new cr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelHypeTrainProgressEvents(this._userId,await this._getTransportOptions())}};Yn=i([o("eventsub-base","EventSubSubscription")],Yn);let Qe=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}};Qe=i([o("eventsub-base","EventSubChannelHypeTrainSharedParticipant","broadcasterId")],Qe);let dr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get type(){return this[t].type}get level(){return this[t].level}get total(){return this[t].total}get progress(){return this[t].progress}get goal(){return this[t].goal}get topContributors(){return this[t].top_contributions.map(e=>new L(e,this._client))}get isSharedTrain(){return this[t].is_shared_train}get sharedTrainParticipants(){return B(this[t].shared_train_participants,e=>e.map(r=>new Qe(r,this._client)))??[]}get allTimeHighLevel(){return this[t].all_time_high_level}get allTimeHighTotal(){return this[t].all_time_high_total}get startDate(){return new Date(this[t].started_at)}get expiryDate(){return new Date(this[t].expires_at)}};i([h(!1)],dr.prototype,"_client",void 0);dr=i([o("eventsub-base","EventSubChannelHypeTrainBeginV2Event","broadcasterId")],dr);let Jn=class extends b{_userId;_cliName="hype-train-begin";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.hype_train.begin.v2.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new dr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelHypeTrainBeginV2Events(this._userId,await this._getTransportOptions())}};Jn=i([o("eventsub-base","EventSubSubscription")],Jn);let lr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get type(){return this[t].type}get level(){return this[t].level}get total(){return this[t].total}get progress(){return this[t].progress}get goal(){return this[t].goal}get topContributors(){return this[t].top_contributions.map(e=>new L(e,this._client))}get isSharedTrain(){return this[t].is_shared_train}get sharedTrainParticipants(){return B(this[t].shared_train_participants,e=>e.map(r=>new Qe(r,this._client)))??[]}get startDate(){return new Date(this[t].started_at)}get expiryDate(){return new Date(this[t].expires_at)}};i([h(!1)],lr.prototype,"_client",void 0);lr=i([o("eventsub-base","EventSubChannelHypeTrainProgressV2Event","broadcasterId")],lr);let Xn=class extends b{_userId;_cliName="hype-train-progress";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.hype_train.progress.v2.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new lr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelHypeTrainProgressEvents(this._userId,await this._getTransportOptions())}};Xn=i([o("eventsub-base","EventSubSubscription")],Xn);let hr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get type(){return this[t].type}get level(){return this[t].level}get total(){return this[t].total}get topContributors(){return this[t].top_contributions.map(e=>new L(e,this._client))}get isSharedTrain(){return this[t].is_shared_train}get sharedTrainParticipants(){return B(this[t].shared_train_participants,e=>e.map(r=>new Qe(r,this._client)))??[]}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this[t].ended_at)}get cooldownEndDate(){return new Date(this[t].cooldown_ends_at)}};i([h(!1)],hr.prototype,"_client",void 0);hr=i([o("eventsub-base","EventSubChannelHypeTrainEndV2Event","broadcasterId")],hr);let Zn=class extends b{_userId;_cliName="hype-train-end";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.hype_train.end.v2.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new hr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelHypeTrainEndEvents(this._userId,await this._getTransportOptions())}};Zn=i([o("eventsub-base","EventSubSubscription")],Zn);let C=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return await this._client.users.getUserById(this[t].broadcaster_user_id)}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return await this._client.users.getUserById(this[t].moderator_user_id)}};i([h(!1)],C.prototype,"_client",void 0);C=i([o("eventsub-base","EventSubChannelBaseModerationEvent","broadcasterId")],C);let ei=class extends C{moderationAction="ban";get userId(){return this[t].ban.user_id}get userName(){return this[t].ban.user_login}get userDisplayName(){return this[t].ban.user_name}async getUser(){return await this._client.users.getUserById(this[t].ban.user_id)}get reason(){return this[t].ban.reason}};ei=i([o("eventsub-base","EventSubChannelBanModerationEvent","broadcasterId")],ei);let ti=class extends C{moderationAction="delete";get userId(){return this[t].delete.user_id}get userName(){return this[t].delete.user_login}get userDisplayName(){return this[t].delete.user_name}async getUser(){return await this._client.users.getUserById(this[t].delete.user_id)}get messageId(){return this[t].delete.message_id}get messageText(){return this[t].delete.message_body}};ti=i([o("eventsub-base","EventSubChannelDeleteModerationEvent","broadcasterId")],ti);let ri=class extends C{moderationAction="timeout";get userId(){return this[t].timeout.user_id}get userName(){return this[t].timeout.user_login}get userDisplayName(){return this[t].timeout.user_name}async getUser(){return await this._client.users.getUserById(this[t].timeout.user_id)}get reason(){return this[t].timeout.reason}get expiryDate(){return new Date(this[t].timeout.expires_at)}};ri=i([o("eventsub-base","EventSubChannelTimeoutModerationEvent","broadcasterId")],ri);let si=class extends C{moderationAction="clear"};si=i([o("eventsub-base","EventSubChannelClearModerationEvent","broadcasterId")],si);let ni=class extends C{moderationAction;constructor(e,r,s){super(e,s),this.moderationAction=r}get action(){return this[t].automod_terms.action}get list(){return this[t].automod_terms.list}get terms(){return this[t].automod_terms.terms}get fromAutoMod(){return this[t].automod_terms.from_automod}};ni=i([o("eventsub-base","EventSubChannelAutoModTermsModerationEvent","broadcasterId")],ni);let ii=class extends C{moderationAction;constructor(e,r,s){super(e,s),this.moderationAction=r}get isApproved(){return this[t].unban_request.is_approved}get userId(){return this[t].unban_request.user_id}get userName(){return this[t].unban_request.user_login}get userDisplayName(){return this[t].unban_request.user_name}async getUser(){return await this._client.users.getUserById(this[t].unban_request.user_id)}get moderatorMessage(){return this[t].unban_request.moderator_message}};ii=i([o("eventsub-base","EventSubChannelUnbanRequestModerationEvent","broadcasterId")],ii);let ai=class extends C{moderationAction="unban";get userId(){return this[t].unban.user_id}get userName(){return this[t].unban.user_login}get userDisplayName(){return this[t].unban.user_name}async getUser(){return await this._client.users.getUserById(this[t].unban.user_id)}};ai=i([o("eventsub-base","EventSubChannelUnbanModerationEvent","broadcasterId")],ai);let oi=class extends C{moderationAction="untimeout";get userId(){return this[t].untimeout.user_id}get userName(){return this[t].untimeout.user_login}get userDisplayName(){return this[t].untimeout.user_name}async getUser(){return await this._client.users.getUserById(this[t].untimeout.user_id)}};oi=i([o("eventsub-base","EventSubChannelUntimeoutModerationEvent","broadcasterId")],oi);let ui=class extends C{moderationAction="emoteonly"};ui=i([o("eventsub-base","EventSubChannelEmoteOnlyModerationEvent","broadcasterId")],ui);let ci=class extends C{moderationAction="emoteonlyoff"};ci=i([o("eventsub-base","EventSubChannelEmoteOnlyOffModerationEvent","broadcasterId")],ci);let di=class extends C{moderationAction="followers";get followDurationMinutes(){return this[t].followers.follow_duration_minutes}};di=i([o("eventsub-base","EventSubChannelFollowersModerationEvent","broadcasterId")],di);let li=class extends C{moderationAction="followersoff"};li=i([o("eventsub-base","EventSubChannelFollowersOffModerationEvent","broadcasterId")],li);let hi=class extends C{moderationAction="uniquechat"};hi=i([o("eventsub-base","EventSubChannelUniqueChatModerationEvent","broadcasterId")],hi);let _i=class extends C{moderationAction="uniquechatoff"};_i=i([o("eventsub-base","EventSubChannelUniqueChatOffModerationEvent","broadcasterId")],_i);let gi=class extends C{moderationAction="slow";get waitTimeSeconds(){return this[t].slow.wait_time_seconds}};gi=i([o("eventsub-base","EventSubChannelSlowModerationEvent","broadcasterId")],gi);let pi=class extends C{moderationAction="slowoff"};pi=i([o("eventsub-base","EventSubChannelSlowOffModerationEvent","broadcasterId")],pi);let bi=class extends C{moderationAction="subscribers"};bi=i([o("eventsub-base","EventSubChannelSubscribersModerationEvent","broadcasterId")],bi);let mi=class extends C{moderationAction="subscribersoff"};mi=i([o("eventsub-base","EventSubChannelSubscribersOffModerationEvent","broadcasterId")],mi);let yi=class extends C{moderationAction="raid";get userId(){return this[t].raid.user_id}get userName(){return this[t].raid.user_login}get userDisplayName(){return this[t].raid.user_name}async getUser(){return await this._client.users.getUserById(this[t].raid.user_id)}get viewerCount(){return this[t].raid.viewer_count}};yi=i([o("eventsub-base","EventSubChannelRaidModerationEvent","broadcasterId")],yi);let vi=class extends C{moderationAction="unraid";get userId(){return this[t].unraid.user_id}get userName(){return this[t].unraid.user_login}get userDisplayName(){return this[t].unraid.user_name}async getUser(){return await this._client.users.getUserById(this[t].unraid.user_id)}};vi=i([o("eventsub-base","EventSubChannelUnraidModerationEvent","broadcasterId")],vi);let wi=class extends C{moderationAction="mod";get userId(){return this[t].mod.user_id}get userName(){return this[t].mod.user_login}get userDisplayName(){return this[t].mod.user_name}};wi=i([o("eventsub-base","EventSubChannelModModerationEvent","broadcasterId")],wi);let Si=class extends C{moderationAction="unmod";get userId(){return this[t].unmod.user_id}get userName(){return this[t].unmod.user_login}get userDisplayName(){return this[t].unmod.user_name}async getUser(){return await this._client.users.getUserById(this[t].unmod.user_id)}};Si=i([o("eventsub-base","EventSubChannelUnmodModerationEvent","broadcasterId")],Si);let Ci=class extends C{moderationAction="vip";get userId(){return this[t].vip.user_id}get userName(){return this[t].vip.user_login}get userDisplayName(){return this[t].vip.user_name}async getUser(){return await this._client.users.getUserById(this[t].vip.user_id)}};Ci=i([o("eventsub-base","EventSubChannelVipModerationEvent","broadcasterId")],Ci);let Ii=class extends C{moderationAction="unvip";get userId(){return this[t].unvip.user_id}get userName(){return this[t].unvip.user_login}get userDisplayName(){return this[t].unvip.user_name}async getUser(){return await this._client.users.getUserById(this[t].unvip.user_id)}};Ii=i([o("eventsub-base","EventSubChannelUnvipModerationEvent","broadcasterId")],Ii);let fi=class extends C{moderationAction="warn";get userId(){return this[t].warn.user_id}get userName(){return this[t].warn.user_login}get userDisplayName(){return this[t].warn.user_name}async getUser(){return await this._client.users.getUserById(this[t].warn.user_id)}get reason(){return this[t].warn.reason}get chatRulesCited(){return this[t].warn.chat_rules_cited??[]}};fi=i([o("eventsub-base","EventSubChannelWarnModerationEvent","broadcasterId")],fi);let Ei=class extends C{moderationAction="shared_chat_delete";get userId(){return this[t].shared_chat_delete.user_id}get userName(){return this[t].shared_chat_delete.user_login}get userDisplayName(){return this[t].shared_chat_delete.user_name}async getUser(){return await this._client.users.getUserById(this[t].shared_chat_delete.user_id)}get messageId(){return this[t].shared_chat_delete.message_id}get messageText(){return this[t].shared_chat_delete.message_body}};Ei=i([o("eventsub-base","EventSubChannelSharedChatDeleteModerationEvent","broadcasterId")],Ei);let xi=class extends C{moderationAction="shared_chat_ban";get userId(){return this[t].shared_chat_ban.user_id}get userName(){return this[t].shared_chat_ban.user_login}get userDisplayName(){return this[t].shared_chat_ban.user_name}async getUser(){return await this._client.users.getUserById(this[t].shared_chat_ban.user_id)}get reason(){return this[t].shared_chat_ban.reason}};xi=i([o("eventsub-base","EventSubChannelSharedChatBanModerationEvent","broadcasterId")],xi);let Ui=class extends C{moderationAction="shared_chat_timeout";get userId(){return this[t].shared_chat_timeout.user_id}get userName(){return this[t].shared_chat_timeout.user_login}get userDisplayName(){return this[t].shared_chat_timeout.user_name}async getUser(){return await this._client.users.getUserById(this[t].shared_chat_timeout.user_id)}get reason(){return this[t].shared_chat_timeout.reason}get expiryDate(){return new Date(this[t].shared_chat_timeout.expires_at)}};Ui=i([o("eventsub-base","EventSubChannelSharedChatTimeoutModerationEvent","broadcasterId")],Ui);let Bi=class extends C{moderationAction="shared_chat_unban";get userId(){return this[t].shared_chat_unban.user_id}get userName(){return this[t].shared_chat_unban.user_login}get userDisplayName(){return this[t].shared_chat_unban.user_name}async getUser(){return await this._client.users.getUserById(this[t].shared_chat_unban.user_id)}};Bi=i([o("eventsub-base","EventSubChannelSharedChatUnbanModerationEvent","broadcasterId")],Bi);let Ti=class extends C{moderationAction="shared_chat_untimeout";get userId(){return this[t].shared_chat_untimeout.user_id}get userName(){return this[t].shared_chat_untimeout.user_login}get userDisplayName(){return this[t].shared_chat_untimeout.user_name}async getUser(){return await this._client.users.getUserById(this[t].shared_chat_untimeout.user_id)}};Ti=i([o("eventsub-base","EventSubChannelSharedChatUntimeoutModerationEvent","broadcasterId")],Ti);let Ni=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`channel.moderate.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){switch(e.action){case"delete":return new ti(e,this._client._apiClient);case"clear":return new si(e,this._client._apiClient);case"timeout":return new ri(e,this._client._apiClient);case"untimeout":return new oi(e,this._client._apiClient);case"ban":return new ei(e,this._client._apiClient);case"unban":return new ai(e,this._client._apiClient);case"emoteonly":return new ui(e,this._client._apiClient);case"emoteonlyoff":return new ci(e,this._client._apiClient);case"followers":return new di(e,this._client._apiClient);case"followersoff":return new li(e,this._client._apiClient);case"uniquechat":return new hi(e,this._client._apiClient);case"uniquechatoff":return new _i(e,this._client._apiClient);case"slow":return new gi(e,this._client._apiClient);case"slowoff":return new pi(e,this._client._apiClient);case"subscribers":return new bi(e,this._client._apiClient);case"subscribersoff":return new mi(e,this._client._apiClient);case"raid":return new yi(e,this._client._apiClient);case"unraid":return new vi(e,this._client._apiClient);case"mod":return new wi(e,this._client._apiClient);case"unmod":return new Si(e,this._client._apiClient);case"vip":return new Ci(e,this._client._apiClient);case"unvip":return new Ii(e,this._client._apiClient);case"warn":return new fi(e,this._client._apiClient);case"add_blocked_term":case"add_permitted_term":case"remove_blocked_term":case"remove_permitted_term":return new ni(e,e.action,this._client._apiClient);case"approve_unban_request":case"deny_unban_request":return new ii(e,e.action,this._client._apiClient);case"shared_chat_ban":return new xi(e,this._client._apiClient);case"shared_chat_unban":return new Bi(e,this._client._apiClient);case"shared_chat_timeout":return new Ui(e,this._client._apiClient);case"shared_chat_untimeout":return new Ti(e,this._client._apiClient);case"shared_chat_delete":return new Ei(e,this._client._apiClient);default:throw new Error(`Unknown moderation action: ${e.action}`)}}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelModerateEvents(this._broadcasterId,await this._getTransportOptions()))}};Ni=i([o("eventsub-base","EventSubSubscription")],Ni);let ze=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],ze.prototype,"_client",void 0);ze=i([o("eventsub-base","EventSubChannelModeratorEvent","userId")],ze);let Di=class extends b{_userId;_cliName="add-moderator";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.moderator.add.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new ze(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelModeratorAddEvents(this._userId,await this._getTransportOptions())}};Di=i([o("eventsub-base","EventSubSubscription")],Di);let Ai=class extends b{_userId;_cliName="remove-moderator";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.moderator.remove.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new ze(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelModeratorRemoveEvents(this._userId,await this._getTransportOptions())}};Ai=i([o("eventsub-base","EventSubSubscription")],Ai);let _r=class extends l{get id(){return this[t].id}get title(){return this[t].title}};_r=i([o("eventsub-base","EventSubChannelPollBeginChoice","id")],_r);let gr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get title(){return this[t].title}get choices(){return this[t].choices.map(e=>new _r(e))}get isBitsVotingEnabled(){return this[t].bits_voting.is_enabled}get bitsPerVote(){return this[t].bits_voting.amount_per_vote}get isChannelPointsVotingEnabled(){return this[t].channel_points_voting.is_enabled}get channelPointsPerVote(){return this[t].channel_points_voting.amount_per_vote}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this[t].ends_at)}};i([h(!1)],gr.prototype,"_client",void 0);gr=i([o("eventsub-base","EventSubChannelPollBeginEvent","broadcasterId")],gr);let Mi=class extends b{_userId;_cliName="poll-begin";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.poll.begin.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new gr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelPollBeginEvents(this._userId,await this._getTransportOptions())}};Mi=i([o("eventsub-base","EventSubSubscription")],Mi);let pr=class extends _r{get channelPointsVotes(){return this[t].channel_points_votes}get totalVotes(){return this[t].votes}};pr=i([o("eventsub-base","EventSubChannelPollChoice","id")],pr);let br=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get title(){return this[t].title}get choices(){return this[t].choices.map(e=>new pr(e))}get isBitsVotingEnabled(){return this[t].bits_voting.is_enabled}get bitsPerVote(){return this[t].bits_voting.amount_per_vote}get isChannelPointsVotingEnabled(){return this[t].channel_points_voting.is_enabled}get channelPointsPerVote(){return this[t].channel_points_voting.amount_per_vote}get status(){return this[t].status}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this[t].ended_at)}};i([h(!1)],br.prototype,"_client",void 0);br=i([o("eventsub-base","EventSubChannelPollEndEvent","broadcasterId")],br);let Ri=class extends b{_userId;_cliName="poll-end";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.poll.end.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new br(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelPollEndEvents(this._userId,await this._getTransportOptions())}};Ri=i([o("eventsub-base","EventSubSubscription")],Ri);let mr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get title(){return this[t].title}get choices(){return this[t].choices.map(e=>new pr(e))}get isBitsVotingEnabled(){return this[t].bits_voting.is_enabled}get bitsPerVote(){return this[t].bits_voting.amount_per_vote}get isChannelPointsVotingEnabled(){return this[t].channel_points_voting.is_enabled}get channelPointsPerVote(){return this[t].channel_points_voting.amount_per_vote}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this[t].ends_at)}};i([h(!1)],mr.prototype,"_client",void 0);mr=i([o("eventsub-base","EventSubChannelPollProgressEvent","broadcasterId")],mr);let Pi=class extends b{_userId;_cliName="poll-progress";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.poll.progress.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new mr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelPollProgressEvents(this._userId,await this._getTransportOptions())}};Pi=i([o("eventsub-base","EventSubSubscription")],Pi);let yr=class extends l{get id(){return this[t].id}get title(){return this[t].title}get color(){return this[t].color}};yr=i([o("eventsub-base","EventSubChannelPredictionBeginOutcome","id")],yr);let vr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get title(){return this[t].title}get outcomes(){return this[t].outcomes.map(e=>new yr(e))}get startDate(){return new Date(this[t].started_at)}get lockDate(){return new Date(this[t].locks_at)}};i([h(!1)],vr.prototype,"_client",void 0);vr=i([o("eventsub-base","EventSubChannelPredictionBeginEvent","broadcasterId")],vr);let Hi=class extends b{_userId;_cliName="prediction-begin";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.prediction.begin.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new vr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelPredictionBeginEvents(this._userId,await this._getTransportOptions())}};Hi=i([o("eventsub-base","EventSubSubscription")],Hi);let wr=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get channelPointsUsed(){return this[t].channel_points_used}get channelPointsWon(){return this[t].channel_points_won}};i([h(!1)],wr.prototype,"_client",void 0);wr=i([o("eventsub-base","EventSubChannelPredictionPredictor","userId")],wr);let ce=class extends yr{_client;constructor(e,r){super(e),this._client=r}get users(){return this[t].users}get channelPoints(){return this[t].channel_points}get topPredictors(){return this[t].top_predictors.map(e=>new wr(e,this._client))}};i([h(!1)],ce.prototype,"_client",void 0);ce=i([o("eventsub-base","EventSubChannelPredictionOutcome","id")],ce);let Sr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get title(){return this[t].title}get outcomes(){return this[t].outcomes.map(e=>new ce(e,this._client))}get startDate(){return new Date(this[t].started_at)}get endDate(){return new Date(this[t].ended_at)}get status(){return this[t].status}get winningOutcomeId(){return this[t].winning_outcome_id||null}get winningOutcome(){if(!this[t].winning_outcome_id)return null;const e=this[t].outcomes.find(r=>r.id===this[t].winning_outcome_id);if(!e)throw new P("Winning outcome not found in outcomes array");return new ce(e,this._client)}};i([h(!1)],Sr.prototype,"_client",void 0);Sr=i([o("eventsub-base","EventSubChannelPredictionEndEvent","broadcasterId")],Sr);let ki=class extends b{_userId;_cliName="prediction-end";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.prediction.end.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Sr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelPredictionEndEvents(this._userId,await this._getTransportOptions())}};ki=i([o("eventsub-base","EventSubSubscription")],ki);let Cr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get title(){return this[t].title}get outcomes(){return this[t].outcomes.map(e=>new ce(e,this._client))}get startDate(){return new Date(this[t].started_at)}get lockDate(){return new Date(this[t].locked_at)}};i([h(!1)],Cr.prototype,"_client",void 0);Cr=i([o("eventsub-base","EventSubChannelPredictionLockEvent","broadcasterId")],Cr);let qi=class extends b{_userId;_cliName="prediction-lock";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.prediction.lock.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Cr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelPredictionLockEvents(this._userId,await this._getTransportOptions())}};qi=i([o("eventsub-base","EventSubSubscription")],qi);let Ir=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get title(){return this[t].title}get outcomes(){return this[t].outcomes.map(e=>new ce(e,this._client))}get startDate(){return new Date(this[t].started_at)}get lockDate(){return new Date(this[t].locks_at)}};i([h(!1)],Ir.prototype,"_client",void 0);Ir=i([o("eventsub-base","EventSubChannelPredictionProgressEvent","broadcasterId")],Ir);let Wi=class extends b{_userId;_cliName="prediction-progress";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.prediction.progress.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Ir(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelPredictionProgressEvents(this._userId,await this._getTransportOptions())}};Wi=i([o("eventsub-base","EventSubSubscription")],Wi);let fr=class extends l{_client;constructor(e,r){super(e),this._client=r}get raidingBroadcasterId(){return this[t].from_broadcaster_user_id}get raidingBroadcasterName(){return this[t].from_broadcaster_user_login}get raidingBroadcasterDisplayName(){return this[t].from_broadcaster_user_name}async getRaidingBroadcaster(){return d(await this._client.users.getUserById(this[t].from_broadcaster_user_id))}get raidedBroadcasterId(){return this[t].to_broadcaster_user_id}get raidedBroadcasterName(){return this[t].to_broadcaster_user_login}get raidedBroadcasterDisplayName(){return this[t].to_broadcaster_user_name}async getRaidedBroadcaster(){return d(await this._client.users.getUserById(this[t].to_broadcaster_user_id))}get viewers(){return this[t].viewers}};i([h(!1)],fr.prototype,"_client",void 0);fr=i([o("eventsub-base","EventSubChannelRaidEvent","raidedBroadcasterId")],fr);let Er=class extends b{_userId;_direction;_cliName="raid";constructor(e,r,s,a){super(e,r),this._userId=s,this._direction=a}get id(){return`channel.raid.${this._direction}.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new fr(e,this._client._apiClient)}async _subscribe(){return this._direction==="from"?await this._client._apiClient.eventSub.subscribeToChannelRaidEventsFrom(this._userId,await this._getTransportOptions()):await this._client._apiClient.eventSub.subscribeToChannelRaidEventsTo(this._userId,await this._getTransportOptions())}};Er=i([o("eventsub-base","EventSubSubscription")],Er);let xr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get input(){return this[t].user_input}get status(){return this[t].status}get rewardId(){return this[t].reward.id}get rewardTitle(){return this[t].reward.title}get rewardCost(){return this[t].reward.cost}get rewardPrompt(){return this[t].reward.prompt}async getReward(){return d(await this._client.channelPoints.getCustomRewardById(this[t].broadcaster_user_id,this[t].reward.id))}get redemptionDate(){return new Date(this[t].redeemed_at)}async updateStatus(e){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[t].broadcaster_user_id,this[t].reward.id,[this[t].id],e))[0]}};i([h(!1)],xr.prototype,"_client",void 0);xr=i([o("eventsub-base","EventSubChannelRedemptionAddEvent","id")],xr);let Ur=class extends b{_userId;_rewardId;_cliName="add-redemption";constructor(e,r,s,a){super(e,r),this._userId=s,this._rewardId=a}get id(){return this._rewardId==null?`channel.channel_points_custom_reward_redemption.add.${this._userId}`:`channel.channel_points_custom_reward_redemption.add.${this._userId}.${this._rewardId}`}get authUserId(){return this._userId}transformData(e){return new xr(e,this._client._apiClient)}async _subscribe(){return this._rewardId?await this._client._apiClient.eventSub.subscribeToChannelRedemptionAddEventsForReward(this._userId,this._rewardId,await this._getTransportOptions()):await this._client._apiClient.eventSub.subscribeToChannelRedemptionAddEvents(this._userId,await this._getTransportOptions())}};Ur=i([o("eventsub-base","EventSubSubscription")],Ur);let Br=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get input(){return this[t].user_input}get status(){return this[t].status}get rewardId(){return this[t].reward.id}get rewardTitle(){return this[t].reward.title}get rewardCost(){return this[t].reward.cost}get rewardPrompt(){return this[t].reward.prompt}get redemptionDate(){return new Date(this[t].redeemed_at)}};i([h(!1)],Br.prototype,"_client",void 0);Br=i([o("eventsub-base","EventSubChannelRedemptionUpdateEvent","id")],Br);let Tr=class extends b{_userId;_rewardId;_cliName="update-redemption";constructor(e,r,s,a){super(e,r),this._userId=s,this._rewardId=a}get id(){return this._rewardId==null?`channel.channel_points_custom_reward_redemption.update.${this._userId}`:`channel.channel_points_custom_reward_redemption.update.${this._userId}.${this._rewardId}`}get authUserId(){return this._userId}transformData(e){return new Br(e,this._client._apiClient)}async _subscribe(){return this._rewardId?await this._client._apiClient.eventSub.subscribeToChannelRedemptionUpdateEventsForReward(this._userId,this._rewardId,await this._getTransportOptions()):await this._client._apiClient.eventSub.subscribeToChannelRedemptionUpdateEvents(this._userId,await this._getTransportOptions())}};Tr=i([o("eventsub-base","EventSubSubscription")],Tr);let we=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get isEnabled(){return this[t].is_enabled}get isPaused(){return this[t].is_paused}get isInStock(){return this[t].is_in_stock}get title(){return this[t].title}get cost(){return this[t].cost}get prompt(){return this[t].prompt}get userInputRequired(){return this[t].is_user_input_required}get autoApproved(){return this[t].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return B(this[t].cooldown_expires_at,e=>new Date(e))}get redemptionsThisStream(){return this[t].redemptions_redeemed_current_stream}get maxRedemptionsPerStream(){return this[t].max_per_stream.is_enabled?this[t].max_per_stream.value:null}get maxRedemptionsPerUserPerStream(){return this[t].max_per_user_per_stream.is_enabled?this[t].max_per_user_per_stream.value:null}get globalCooldown(){return this[t].global_cooldown.is_enabled?this[t].global_cooldown.seconds:null}get backgroundColor(){return this[t].background_color}getImageUrl(e){const r=`url_${e}x`;return this[t].image?.[r]??this[t].default_image[r]}};i([h(!1)],we.prototype,"_client",void 0);we=i([o("eventsub-base","EventSubChannelRewardEvent","id")],we);let Oi=class extends b{_userId;_cliName="add-reward";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.channel_points_custom_reward.add.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new we(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelRewardAddEvents(this._userId,await this._getTransportOptions())}};Oi=i([o("eventsub-base","EventSubSubscription")],Oi);let Nr=class extends b{_userId;_rewardId;_cliName="remove-reward";constructor(e,r,s,a){super(e,r),this._userId=s,this._rewardId=a}get id(){return this._rewardId==null?`channel.channel_points_custom_reward.remove.${this._userId}`:`channel.channel_points_custom_reward.remove.${this._userId}.${this._rewardId}`}get authUserId(){return this._userId}transformData(e){return new we(e,this._client._apiClient)}async _subscribe(){return this._rewardId?await this._client._apiClient.eventSub.subscribeToChannelRewardRemoveEventsForReward(this._userId,this._rewardId,await this._getTransportOptions()):await this._client._apiClient.eventSub.subscribeToChannelRewardRemoveEvents(this._userId,await this._getTransportOptions())}};Nr=i([o("eventsub-base","EventSubSubscription")],Nr);let Dr=class extends b{_userId;_rewardId;_cliName="update-reward";constructor(e,r,s,a){super(e,r),this._userId=s,this._rewardId=a}get id(){return this._rewardId==null?`channel.channel_points_custom_reward.update.${this._userId}`:`channel.channel_points_custom_reward.update.${this._userId}.${this._rewardId}`}get authUserId(){return this._userId}transformData(e){return new we(e,this._client._apiClient)}async _subscribe(){return this._rewardId?await this._client._apiClient.eventSub.subscribeToChannelRewardUpdateEventsForReward(this._userId,this._rewardId,await this._getTransportOptions()):await this._client._apiClient.eventSub.subscribeToChannelRewardUpdateEvents(this._userId,await this._getTransportOptions())}};Dr=i([o("eventsub-base","EventSubSubscription")],Dr);let Ar=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get rewardType(){return this[t].reward.type}get rewardCost(){return this[t].reward.cost}get unlockedEmote(){return this[t].reward.unlocked_emote}get input(){return this[t].user_input||null}get messageText(){return this[t].message?.text??null}get emoteOffsets(){return this[t].message?new Map(Object.entries(eo(this[t].message.emotes,"id")).map(([e,r])=>[e,r.map(({begin:s,end:a})=>`${s}-${a}`)])):null}get redemptionDate(){return new Date(this[t].redeemed_at)}};i([h(!1)],Ar.prototype,"_client",void 0);Ar=i([o("eventsub-base","EventSubChannelAutomaticRewardRedemptionAddEvent","id")],Ar);let $i=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.channel_points_automatic_reward_redemption.add.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Ar(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelAutomaticRewardRedemptionAddEvents(this._userId,await this._getTransportOptions())}};$i=i([o("eventsub-base","EventSubSubscription")],$i);let Gi=class extends l{get type(){return this[t].type}get channelPoints(){return this[t].channel_points}get emote(){return this[t].emote}};Gi=i([o("eventsub-base","EventSubChannelAutomaticReward")],Gi);let Mr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get reward(){return new Gi(this[t].reward)}get messageText(){return this[t].message?.text??null}get messageParts(){return this[t].message?.fragments??[]}get redemptionDate(){return new Date(this[t].redeemed_at)}};i([h(!1)],Mr.prototype,"_client",void 0);Mr=i([o("eventsub-base","EventSubChannelAutomaticRewardRedemptionAddV2Event","id")],Mr);let Fi=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.channel_points_automatic_reward_redemption.add.v2.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Mr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelAutomaticRewardRedemptionAddV2Events(this._userId,await this._getTransportOptions())}};Fi=i([o("eventsub-base","EventSubSubscription")],Fi);let Ke=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}};i([h(!1)],Ke.prototype,"_client",void 0);Ke=i([o("eventsub-base","EventSubChannelSharedChatSessionParticipant","broadcasterId")],Ke);let Rr=class extends l{_client;constructor(e,r){super(e),this._client=r}get sessionId(){return this[t].session_id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get hostBroadcasterId(){return this[t].host_broadcaster_user_id}get hostBroadcasterName(){return this[t].host_broadcaster_user_login}get hostBroadcasterDisplayName(){return this[t].host_broadcaster_user_name}async getHostBroadcaster(){return d(await this._client.users.getUserById(this[t].host_broadcaster_user_id))}get participants(){return this[t].participants.map(e=>new Ke(e,this._client))}};i([h(!1)],Rr.prototype,"_client",void 0);Rr=i([o("eventsub-base","EventSubChannelSharedChatSessionBeginEvent","broadcasterId")],Rr);let Li=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.shared_chat.begin.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Rr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelSharedChatSessionBeginEvents(this._userId,await this._getTransportOptions())}};Li=i([o("eventsub-base","EventSubSubscription")],Li);let Pr=class extends l{_client;constructor(e,r){super(e),this._client=r}get sessionId(){return this[t].session_id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get hostBroadcasterId(){return this[t].host_broadcaster_user_id}get hostBroadcasterName(){return this[t].host_broadcaster_user_login}get hostBroadcasterDisplayName(){return this[t].host_broadcaster_user_name}async getHostBroadcaster(){return d(await this._client.users.getUserById(this[t].host_broadcaster_user_id))}get participants(){return this[t].participants.map(e=>new Ke(e,this._client))}};i([h(!1)],Pr.prototype,"_client",void 0);Pr=i([o("eventsub-base","EventSubChannelSharedChatSessionUpdateEvent","broadcasterId")],Pr);let Vi=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.shared_chat.update.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Pr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelSharedChatSessionUpdateEvents(this._userId,await this._getTransportOptions())}};Vi=i([o("eventsub-base","EventSubSubscription")],Vi);let Hr=class extends l{_client;constructor(e,r){super(e),this._client=r}get sessionId(){return this[t].session_id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get hostBroadcasterId(){return this[t].host_broadcaster_user_id}get hostBroadcasterName(){return this[t].host_broadcaster_user_login}get hostBroadcasterDisplayName(){return this[t].host_broadcaster_user_name}async getHostBroadcaster(){return d(await this._client.users.getUserById(this[t].host_broadcaster_user_id))}};i([h(!1)],Hr.prototype,"_client",void 0);Hr=i([o("eventsub-base","EventSubChannelSharedChatSessionEndEvent","broadcasterId")],Hr);let ji=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.shared_chat.end.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Hr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelSharedChatSessionEndEvents(this._userId,await this._getTransportOptions())}};ji=i([o("eventsub-base","EventSubSubscription")],ji);let kr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get startDate(){return new Date(this[t].started_at)}};i([h(!1)],kr.prototype,"_client",void 0);kr=i([o("eventsub-base","EventSubChannelShieldModeBeginEvent")],kr);let Qi=class extends b{_userId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._userId=s,this._moderatorId=a}get id(){return`channel.shield_mode.begin.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new kr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelShieldModeBeginEvents(this._userId,await this._getTransportOptions()))}};Qi=i([o("eventsub-base","EventSubSubscription")],Qi);let qr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get endDate(){return new Date(this[t].ended_at)}};i([h(!1)],qr.prototype,"_client",void 0);qr=i([o("eventsub-base","EventSubChannelShieldModeEndEvent")],qr);let zi=class extends b{_userId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._userId=s,this._moderatorId=a}get id(){return`channel.shield_mode.end.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new qr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelShieldModeEndEvents(this._userId,await this._getTransportOptions()))}};zi=i([o("eventsub-base","EventSubSubscription")],zi);let Wr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get shoutedOutBroadcasterId(){return this[t].to_broadcaster_user_id}get shoutedOutBroadcasterName(){return this[t].to_broadcaster_user_login}get shoutedOutBroadcasterDisplayName(){return this[t].to_broadcaster_user_name}async getShoutedOutBroadcaster(){return d(await this._client.users.getUserById(this[t].to_broadcaster_user_id))}get viewerCount(){return this[t].viewer_count}get startDate(){return new Date(this[t].started_at)}get cooldownEndDate(){return new Date(this[t].cooldown_ends_at)}get targetCooldownEndDate(){return new Date(this[t].target_cooldown_ends_at)}};i([h(!1)],Wr.prototype,"_client",void 0);Wr=i([o("eventsub-base","EventSubChannelShoutoutCreateEvent","shoutedOutBroadcasterId")],Wr);let Ki=class extends b{_userId;_moderatorId;_cliName="shoutout-create";constructor(e,r,s,a){super(e,r),this._userId=s,this._moderatorId=a}get id(){return`channel.shoutout.create.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Wr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelShoutoutCreateEvents(this._userId,await this._getTransportOptions()))}};Ki=i([o("eventsub-base","EventSubSubscription")],Ki);let Or=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get shoutingOutBroadcasterId(){return this[t].from_broadcaster_user_id}get shoutingOutBroadcasterName(){return this[t].from_broadcaster_user_login}get shoutingOutBroadcasterDisplayName(){return this[t].from_broadcaster_user_name}async getShoutingOutBroadcaster(){return d(await this._client.users.getUserById(this[t].from_broadcaster_user_id))}get viewerCount(){return this[t].viewer_count}get startDate(){return new Date(this[t].started_at)}};i([h(!1)],Or.prototype,"_client",void 0);Or=i([o("eventsub-base","EventSubChannelShoutoutReceiveEvent","shoutingOutBroadcasterId")],Or);let Yi=class extends b{_userId;_moderatorId;_cliName="shoutout-received";constructor(e,r,s,a){super(e,r),this._userId=s,this._moderatorId=a}get id(){return`channel.shoutout.receive.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Or(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelShoutoutReceiveEvents(this._userId,await this._getTransportOptions()))}};Yi=i([o("eventsub-base","EventSubSubscription")],Yi);let $r=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get tier(){return this[t].tier}get isGift(){return this[t].is_gift}};i([h(!1)],$r.prototype,"_client",void 0);$r=i([o("eventsub-base","EventSubChannelSubscriptionEndEvent","userId")],$r);let Ji=class extends b{_userId;_cliName="unsubscribe";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.subscription.end.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new $r(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelSubscriptionEndEvents(this._userId,await this._getTransportOptions())}};Ji=i([o("eventsub-base","EventSubSubscription")],Ji);let Gr=class extends l{_client;constructor(e,r){super(e),this._client=r}get gifterId(){return this[t].user_id}get gifterName(){return this[t].user_login}get gifterDisplayName(){return this[t].user_name}async getGifter(){const e=this[t].user_id;return e?d(await this._client.users.getUserById(e)):null}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get amount(){return this[t].total}get cumulativeAmount(){return this[t].cumulative_total}get tier(){return this[t].tier}get isAnonymous(){return this[t].is_anonymous}};i([h(!1)],Gr.prototype,"_client",void 0);Gr=i([o("eventsub-base","EventSubChannelSubscriptionGiftEvent","gifterId")],Gr);let Xi=class extends b{_userId;_cliName="gift";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.subscription.gift.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Gr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelSubscriptionGiftEvents(this._userId,await this._getTransportOptions())}};Xi=i([o("eventsub-base","EventSubSubscription")],Xi);let Fr=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get tier(){return this[t].tier}get cumulativeMonths(){return this[t].cumulative_months}get streakMonths(){return this[t].streak_months}get durationMonths(){return this[t].duration_months}get messageText(){return this[t].message.text}get emoteOffsets(){return new Map(Object.entries(eo(this[t].message.emotes??[],"id")).map(([e,r])=>[e,r.map(({begin:s,end:a})=>`${s}-${a}`)]))}};i([h(!1)],Fr.prototype,"_client",void 0);Fr=i([o("eventsub-base","EventSubChannelSubscriptionMessageEvent","userId")],Fr);let Zi=class extends b{_userId;_cliName="subscribe-message";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.subscription.message.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Fr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelSubscriptionMessageEvents(this._userId,await this._getTransportOptions())}};Zi=i([o("eventsub-base","EventSubSubscription")],Zi);let Lr=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get tier(){return this[t].tier}get isGift(){return this[t].is_gift}};i([h(!1)],Lr.prototype,"_client",void 0);Lr=i([o("eventsub-base","EventSubChannelSubscriptionEvent","userId")],Lr);let ea=class extends b{_userId;_cliName="subscribe";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.subscribe.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Lr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelSubscriptionEvents(this._userId,await this._getTransportOptions())}};ea=i([o("eventsub-base","EventSubSubscription")],ea);let Vr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get lowTrustStatus(){return this[t].low_trust_status}};i([h(!1)],Vr.prototype,"_client",void 0);Vr=i([o("eventsub-base","EventSubChannelSuspiciousUserUpdateEvent","broadcasterId")],Vr);let ta=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`channel.suspicious_user.update.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Vr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelSuspiciousUserUpdateEvents(this._broadcasterId,await this._getTransportOptions()))}};ta=i([o("eventsub-base","EventSubSubscription")],ta);let jr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get lowTrustStatus(){return this[t].low_trust_status}get sharedBanChannelIds(){return this[t].shared_ban_channel_ids??[]}get types(){return this[t].types}get banEvasionEvaluation(){return this[t].ban_evasion_evaluation}get messageId(){return this[t].message.message_id}get messageText(){return this[t].message.text}get messageParts(){return this[t].message.fragments}};i([h(!1)],jr.prototype,"_client",void 0);jr=i([o("eventsub-base","EventSubChannelSuspiciousUserMessageEvent","broadcasterId")],jr);let ra=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`channel.suspicious_user.message.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new jr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelSuspiciousUserMessageEvents(this._broadcasterId,await this._getTransportOptions()))}};ra=i([o("eventsub-base","EventSubSubscription")],ra);let Qr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get message(){return this[t].text}get creationDate(){return new Date(this[t].created_at)}};i([h(!1)],Qr.prototype,"_client",void 0);Qr=i([o("eventsub-base","EventSubChannelUnbanRequestCreateEvent","id")],Qr);let sa=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`channel.unban_request.create.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Qr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelUnbanRequestCreateEvents(this._broadcasterId,await this._getTransportOptions()))}};sa=i([o("eventsub-base","EventSubSubscription")],sa);let zr=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get resolutionMessage(){return this[t].resolution_text??null}get status(){return this[t].status}};i([h(!1)],zr.prototype,"_client",void 0);zr=i([o("eventsub-base","EventSubChannelUnbanRequestResolveEvent","id")],zr);let na=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`channel.unban_request.resolve.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new zr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelUnbanRequestResolveEvents(this._broadcasterId,await this._getTransportOptions()))}};na=i([o("eventsub-base","EventSubSubscription")],na);let Kr=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}};i([h(!1)],Kr.prototype,"_client",void 0);Kr=i([o("eventsub-base","EventSubChannelUnbanEvent","userId")],Kr);let ia=class extends b{_userId;_cliName="unban";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.unban.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Kr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelUnbanEvents(this._userId,await this._getTransportOptions())}};ia=i([o("eventsub-base","EventSubSubscription")],ia);let Yr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get streamTitle(){return this[t].title}get streamLanguage(){return this[t].language}get categoryId(){return this[t].category_id}get categoryName(){return this[t].category_name}async getGame(){return this[t].category_id?d(await this._client.games.getGameById(this[t].category_id)):null}get isMature(){return this[t].content_classification_labels.length>0}get contentClassificationLabels(){return this[t].content_classification_labels}};i([h(!1)],Yr.prototype,"_client",void 0);Yr=i([o("eventsub-base","EventSubChannelUpdateEvent","broadcasterId")],Yr);let aa=class extends b{_userId;_cliName="stream-change";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.update.v2.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Yr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelUpdateEvents(this._userId,await this._getTransportOptions())}};aa=i([o("eventsub-base","EventSubSubscription")],aa);let Ye=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],Ye.prototype,"_client",void 0);Ye=i([o("eventsub-base","EventSubChannelVipEvent","userId")],Ye);let oa=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.vip.add.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Ye(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelVipAddEvents(this._userId,await this._getTransportOptions())}};oa=i([o("eventsub-base","EventSubSubscription")],oa);let ua=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`channel.vip.remove.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new Ye(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToChannelVipRemoveEvents(this._userId,await this._getTransportOptions())}};ua=i([o("eventsub-base","EventSubSubscription")],ua);let Jr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],Jr.prototype,"_client",void 0);Jr=i([o("eventsub-base","EventSubChannelWarningAcknowledgeEvent","userId")],Jr);let ca=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`channel.warning.acknowledge.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Jr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelWarningAcknowledgeEvents(this._broadcasterId,await this._getTransportOptions()))}};ca=i([o("eventsub-base","EventSubSubscription")],ca);let Xr=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get moderatorId(){return this[t].moderator_user_id}get moderatorName(){return this[t].moderator_user_login}get moderatorDisplayName(){return this[t].moderator_user_name}async getModerator(){return d(await this._client.users.getUserById(this[t].moderator_user_id))}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get reason(){return this[t].reason}get chatRulesCited(){return this[t].chat_rules_cited??[]}};i([h(!1)],Xr.prototype,"_client",void 0);Xr=i([o("eventsub-base","EventSubChannelWarningSendEvent","userId")],Xr);let da=class extends b{_broadcasterId;_moderatorId;_cliName="";constructor(e,r,s,a){super(e,r),this._broadcasterId=s,this._moderatorId=a}get id(){return`channel.warning.send.${this._broadcasterId}.${this._moderatorId}`}get authUserId(){return this._moderatorId}transformData(e){return new Xr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.asUser(this._moderatorId,async e=>await e.eventSub.subscribeToChannelWarningSendEvents(this._broadcasterId,await this._getTransportOptions()))}};da=i([o("eventsub-base","EventSubSubscription")],da);let Zr=class extends l{_client;constructor(e,r){super(e),this._client=r}get organizationId(){return this[t].organization_id}get categoryId(){return this[t].category_id}get categoryName(){return this[t].category_name}async getCategory(){return d(await this._client.games.getGameById(this[t].category_id))}get campaignId(){return this[t].campaign_id}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get entitlementId(){return this[t].entitlement_id}get rewardId(){return this[t].benefit_id}get grantDate(){return new Date(this[t].created_at)}};i([h(!1)],Zr.prototype,"_client",void 0);Zr=i([o("eventsub-base","EventSubDropEntitlementGrantEvent","entitlementId")],Zr);let la=class extends b{_filter;_cliName="drop";authUserId=null;constructor(e,r,s){super(e,r),this._filter=s}get id(){return`drop.entitlement.grant.${this._filter.organizationId}.${this._filter.categoryId??"all"}.${this._filter.campaignId??"all"}`}transformData(e){return new Zr(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToDropEntitlementGrantEvents(this._filter,await this._getTransportOptions())}};la=i([o("eventsub-base","EventSubSubscription")],la);let es=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].id}get clientId(){return this[t].extension_client_id}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}get productName(){return this[t].product.name}get productSku(){return this[t].product.sku}get productCost(){return this[t].product.bits}get productInDevelopment(){return this[t].product.in_development}};i([h(!1)],es.prototype,"_client",void 0);es=i([o("eventsub-base","EventSubExtensionBitsTransactionCreateEvent","id")],es);let ha=class extends b{_clientId;_cliName="transaction";authUserId=null;constructor(e,r,s){super(e,r),this._clientId=s}get id(){return`extension.bits_transaction.create.${this._clientId}`}transformData(e){return new es(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToExtensionBitsTransactionCreateEvents(this._clientId,await this._getTransportOptions())}};ha=i([o("eventsub-base","EventSubSubscription")],ha);let ts=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}};i([h(!1)],ts.prototype,"_client",void 0);ts=i([o("eventsub-base","EventSubStreamOfflineEvent","broadcasterId")],ts);let _a=class extends b{_userId;_cliName="streamdown";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`stream.offline.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new ts(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToStreamOfflineEvents(this._userId,await this._getTransportOptions())}};_a=i([o("eventsub-base","EventSubSubscription")],_a);let rs=class extends l{_client;constructor(e,r){super(e),this._client=r}get broadcasterId(){return this[t].broadcaster_user_id}get broadcasterName(){return this[t].broadcaster_user_login}get broadcasterDisplayName(){return this[t].broadcaster_user_name}async getBroadcaster(){return d(await this._client.users.getUserById(this[t].broadcaster_user_id))}async getStream(){return await this._client.streams.getStreamByUserId(this[t].broadcaster_user_id)}get id(){return this[t].id}get type(){return this[t].type}get startDate(){return new Date(this[t].started_at)}};i([h(!1)],rs.prototype,"_client",void 0);rs=i([o("eventsub-base","EventSubStreamOnlineEvent","broadcasterId")],rs);let ga=class extends b{_userId;_cliName="streamup";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`stream.online.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new rs(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToStreamOnlineEvents(this._userId,await this._getTransportOptions())}};ga=i([o("eventsub-base","EventSubSubscription")],ga);let ss=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}get clientId(){return this[t].client_id}};i([h(!1)],ss.prototype,"_client",void 0);ss=i([o("eventsub-base","EventSubUserAuthorizationGrantEvent","userId")],ss);let pa=class extends b{_userId;_cliName="grant";authUserId=null;constructor(e,r,s){super(e,r),this._userId=s}get id(){return`user.authorization.grant.${this._userId}`}transformData(e){return new ss(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToUserAuthorizationGrantEvents(this._userId,await this._getTransportOptions())}};pa=i([o("eventsub-base","EventSubSubscription")],pa);let ns=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}async getUser(){return this[t].user_login==null?null:d(await this._client.users.getUserById(this[t].user_id))}get clientId(){return this[t].client_id}};i([h(!1)],ns.prototype,"_client",void 0);ns=i([o("eventsub-base","EventSubUserAuthorizationRevokeEvent","userId")],ns);let ba=class extends b{_userId;_cliName="revoke";authUserId=null;constructor(e,r,s){super(e,r),this._userId=s}get id(){return`user.authorization.revoke.${this._userId}`}transformData(e){return new ns(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToUserAuthorizationRevokeEvents(this._userId,await this._getTransportOptions())}};ba=i([o("eventsub-base","EventSubSubscription")],ba);let is=class extends l{_client;constructor(e,r){super(e),this._client=r}get userId(){return this[t].user_id}get userName(){return this[t].user_login}get userDisplayName(){return this[t].user_name}get userDescription(){return this[t].description}get userEmail(){return this[t].email??null}get userEmailIsVerified(){return this[t].email?this[t].email_verified:null}async getUser(){return d(await this._client.users.getUserById(this[t].user_id))}};i([h(!1)],is.prototype,"_client",void 0);is=i([o("eventsub-base","EventSubUserUpdateEvent","userId")],is);let ma=class extends b{_userId;_cliName="user.update";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`user.update.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new is(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToUserUpdateEvents(this._userId,await this._getTransportOptions())}};ma=i([o("eventsub-base","EventSubSubscription")],ma);let as=class extends l{_client;constructor(e,r){super(e),this._client=r}get id(){return this[t].whisper_id}get userId(){return this[t].to_user_id}get userName(){return this[t].to_user_login}get userDisplayName(){return this[t].to_user_name}async getUser(){return d(await this._client.users.getUserById(this[t].to_user_id))}get senderUserId(){return this[t].from_user_id}get senderUserName(){return this[t].from_user_login}get senderUserDisplayName(){return this[t].from_user_name}async getSenderUser(){return d(await this._client.users.getUserById(this[t].from_user_id))}get messageText(){return this[t].whisper.text}};i([h(!1)],as.prototype,"_client",void 0);as=i([o("eventsub-base","EventSubUserWhisperMessageEvent","id")],as);let ya=class extends b{_userId;_cliName="";constructor(e,r,s){super(e,r),this._userId=s}get id(){return`user.whisper.message.${this._userId}`}get authUserId(){return this._userId}transformData(e){return new as(e,this._client._apiClient)}async _subscribe(){return await this._client._apiClient.eventSub.subscribeToUserWhisperMessageEvents(this._userId,await this._getTransportOptions())}};ya=i([o("eventsub-base","EventSubSubscription")],ya);const ju=/^\d+$/;let te=class extends us{_subscriptions=new Map;_subscriptionsByTwitchId=new Map;_twitchSubscriptions=new Map;_seenEventIds=new Set;_apiClient;_logger;onRevoke=this.registerEvent();onSubscriptionCreateSuccess=this.registerEvent();onSubscriptionCreateFailure=this.registerEvent();onSubscriptionDeleteSuccess=this.registerEvent();onSubscriptionDeleteFailure=this.registerEvent();constructor(e){super(),this._apiClient=e.apiClient,this._logger=Je({name:"twurple:eventsub",...e.logger})}_dropSubscription(e){this._subscriptions.delete(e)}_dropTwitchSubscription(e){if(this._twitchSubscriptions.has(e)){const r=this._twitchSubscriptions.get(e);this._twitchSubscriptions.delete(e),this._subscriptionsByTwitchId.delete(r.id)}}_registerTwitchSubscription(e,r){this._twitchSubscriptions.set(e.id,r),this._subscriptionsByTwitchId.set(r.id,e),this.emit(this.onSubscriptionCreateSuccess,e,r)}_notifySubscriptionCreateError(e,r){this.emit(this.onSubscriptionCreateFailure,e,r)}_notifySubscriptionDeleteSuccess(e){this.emit(this.onSubscriptionDeleteSuccess,e)}_notifySubscriptionDeleteError(e,r){this.emit(this.onSubscriptionDeleteFailure,e,r)}onStreamOnline(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToStreamOnlineEvents");return this._genericSubscribe(ga,r,this,s)}onStreamOffline(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToStreamOfflineEvents");return this._genericSubscribe(_a,r,this,s)}onChannelUpdate(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelUpdateEvents");return this._genericSubscribe(aa,r,this,s)}onChannelFollow(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelFollowEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelFollowEvents");return this._genericSubscribe(Ln,s,this,a,u)}onChannelSubscription(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelSubscriptionEvents");return this._genericSubscribe(ea,r,this,s)}onChannelSubscriptionGift(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelSubscriptionGiftEvents");return this._genericSubscribe(Xi,r,this,s)}onChannelSubscriptionMessage(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelSubscriptionMessageEvents");return this._genericSubscribe(Zi,r,this,s)}onChannelSubscriptionEnd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelSubscriptionEndEvents");return this._genericSubscribe(Ji,r,this,s)}onChannelCheer(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelCheerEvents");return this._genericSubscribe(Fn,r,this,s)}onChannelCharityCampaignStart(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelCharityCampaignStartEvents");return this._genericSubscribe(_n,r,this,s)}onChannelCharityCampaignStop(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelCharityCampaignStopEvents");return this._genericSubscribe(gn,r,this,s)}onChannelCharityDonation(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelCharityDonationEvents");return this._genericSubscribe(pn,r,this,s)}onChannelCharityCampaignProgress(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelCharityCampaignProgressEvents");return this._genericSubscribe(hn,r,this,s)}onChannelBan(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelBanEvents");return this._genericSubscribe(cn,r,this,s)}onChannelUnban(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelUnbanEvents");return this._genericSubscribe(ia,r,this,s)}onChannelShieldModeBegin(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelShieldModeStartEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelShieldModeStartEvents");return this._genericSubscribe(Qi,s,this,a,u)}onChannelShieldModeEnd(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelShieldModeEndEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelShieldModeEndEvents");return this._genericSubscribe(zi,s,this,a,u)}onChannelModerate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onChannelModerate"),u=this._extractUserIdWithNumericWarning(r,"onChannelModerate");return this._genericSubscribe(Ni,s,this,a,u)}onChannelModeratorAdd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelModeratorAddEvents");return this._genericSubscribe(Di,r,this,s)}onChannelModeratorRemove(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelModeratorRemoveEvents");return this._genericSubscribe(Ai,r,this,s)}onChannelRaidFrom(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelRaidEventsFrom");return this._genericSubscribe(Er,r,this,s,"from")}onChannelRaidTo(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelRaidEventsTo");return this._genericSubscribe(Er,r,this,s,"to")}onChannelRewardAdd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelRewardAddEvents");return this._genericSubscribe(Oi,r,this,s)}onChannelRewardUpdate(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToRewardUpdateEvents");return this._genericSubscribe(Dr,r,this,s)}onChannelRewardUpdateForReward(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToRewardUpdateEvents");return this._genericSubscribe(Dr,s,this,a,r)}onChannelRewardRemove(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToRewardRemoveEvents");return this._genericSubscribe(Nr,r,this,s)}onChannelRewardRemoveForReward(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToRewardRemoveEventsForReward");return this._genericSubscribe(Nr,s,this,a,r)}onChannelRedemptionAdd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelRedemptionEvents");return this._genericSubscribe(Ur,r,this,s)}onChannelRedemptionAddForReward(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToRedemptionAddEventsForReward");return this._genericSubscribe(Ur,s,this,a,r)}onChannelRedemptionUpdate(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelRedemptionUpdateEvents");return this._genericSubscribe(Tr,r,this,s)}onChannelRedemptionUpdateForReward(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelRedemptionUpdateEventsForReward");return this._genericSubscribe(Tr,s,this,a,r)}onChannelAutomaticRewardRedemptionAdd(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelAutomaticRewardRedemptionAdd");return this._genericSubscribe($i,r,this,s)}onChannelAutomaticRewardRedemptionAddV2(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelAutomaticRewardRedemptionAddV2");return this._genericSubscribe(Fi,r,this,s)}onChannelPollBegin(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelPollBeginEvents");return this._genericSubscribe(Mi,r,this,s)}onChannelPollProgress(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelPollProgressEvents");return this._genericSubscribe(Pi,r,this,s)}onChannelPollEnd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelPollEndEvents");return this._genericSubscribe(Ri,r,this,s)}onChannelPredictionBegin(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelPredictionBeginEvents");return this._genericSubscribe(Hi,r,this,s)}onChannelPredictionProgress(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelPredictionProgressEvents");return this._genericSubscribe(Wi,r,this,s)}onChannelPredictionLock(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelPredictionLockEvents");return this._genericSubscribe(qi,r,this,s)}onChannelPredictionEnd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelPredictionEndEvents");return this._genericSubscribe(ki,r,this,s)}onChannelGoalBegin(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelGoalBeginEvents");return this._genericSubscribe(Vn,r,this,s)}onChannelGoalProgress(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelGoalProgressEvents");return this._genericSubscribe(Qn,r,this,s)}onChannelGoalEnd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelGoalEndEvents");return this._genericSubscribe(jn,r,this,s)}onChannelHypeTrainBegin(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelHypeTrainBeginEvents");return this._genericSubscribe(zn,r,this,s)}onChannelHypeTrainProgress(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelHypeTrainProgressEvents");return this._genericSubscribe(Yn,r,this,s)}onChannelHypeTrainEnd(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelHypeTrainEndEvents");return this._genericSubscribe(Kn,r,this,s)}onChannelHypeTrainBeginV2(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelHypeTrainBeginV2");return this._genericSubscribe(Jn,r,this,s)}onChannelHypeTrainProgressV2(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelHypeTrainProgressV2");return this._genericSubscribe(Xn,r,this,s)}onChannelHypeTrainEndV2(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelHypeTrainEndV2");return this._genericSubscribe(Zn,r,this,s)}onChannelShoutoutCreate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelShoutoutCreateEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelShoutoutCreateEvents");return this._genericSubscribe(Ki,s,this,a,u)}onChannelShoutoutReceive(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelShoutoutReceiveEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelShoutoutReceiveEvents");return this._genericSubscribe(Yi,s,this,a,u)}onChannelAdBreakBegin(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToChannelAdBreakBeginEvents");return this._genericSubscribe(un,r,this,s)}onChannelChatClear(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelChatClearEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelChatClearEvents");return this._genericSubscribe(bn,s,this,a,u)}onChannelChatClearUserMessages(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelChatClearUserMessagesEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelChatClearUserMessagesEvents");return this._genericSubscribe(mn,s,this,a,u)}onChannelChatMessageDelete(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelChatMessageDeleteEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelChatMessageDeleteEvents");return this._genericSubscribe(yn,s,this,a,u)}onChannelChatNotification(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelChatNotificationEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelChatNotificationEvents");return this._genericSubscribe($n,s,this,a,u)}onChannelChatMessage(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelChatMessageDeleteEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelChatMessageEvents");return this._genericSubscribe(vn,s,this,a,u)}onChannelChatSettingsUpdate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelChatSettingsUpdateEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelChatSettingsUpdateEvents");return this._genericSubscribe(Gn,s,this,a,u)}onChannelUnbanRequestCreate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelUnbanRequestCreateEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelUnbanRequestCreateEvents");return this._genericSubscribe(sa,s,this,a,u)}onChannelUnbanRequestResolve(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"subscribeToChannelUnbanRequestResolveEvents"),u=this._extractUserIdWithNumericWarning(r,"subscribeToChannelUnbanRequestResolveEvents");return this._genericSubscribe(na,s,this,a,u)}onChannelWarningAcknowledge(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onChannelWarningAcknowledge"),u=this._extractUserIdWithNumericWarning(r,"onChannelWarningAcknowledge");return this._genericSubscribe(ca,s,this,a,u)}onChannelWarningSend(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onChannelWarningSend"),u=this._extractUserIdWithNumericWarning(r,"onChannelWarningSend");return this._genericSubscribe(da,s,this,a,u)}onChannelVipAdd(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelVipAdd");return this._genericSubscribe(oa,r,this,s)}onChannelVipRemove(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelVipRemove");return this._genericSubscribe(ua,r,this,s)}onChannelSuspiciousUserUpdate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onChannelSuspiciousUserUpdate"),u=this._extractUserIdWithNumericWarning(r,"onChannelSuspiciousUserUpdate");return this._genericSubscribe(ta,s,this,a,u)}onChannelSuspiciousUserMessage(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onChannelSuspiciousUserMessage"),u=this._extractUserIdWithNumericWarning(r,"onChannelSuspiciousUserMessage");return this._genericSubscribe(ra,s,this,a,u)}onDropEntitlementGrant(e,r){return this._genericSubscribe(la,r,this,e)}onExtensionBitsTransactionCreate(e){const{clientId:r}=this._apiClient._authProvider;return this._genericSubscribe(ha,e,this,r)}onAutoModMessageHold(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onAutoModMessageHold"),u=this._extractUserIdWithNumericWarning(r,"onAutoModMessageHold");return this._genericSubscribe(Xs,s,this,a,u)}onAutoModMessageUpdate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onAutoModMessageUpdate"),u=this._extractUserIdWithNumericWarning(r,"onAutoModMessageUpdate");return this._genericSubscribe(Zs,s,this,a,u)}onAutoModMessageHoldV2(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onAutoModMessageHoldV2"),u=this._extractUserIdWithNumericWarning(r,"onAutoModMessageHoldV2");return this._genericSubscribe(tn,s,this,a,u)}onAutoModMessageUpdateV2(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onAutoModMessageUpdateV2"),u=this._extractUserIdWithNumericWarning(r,"onAutoModMessageUpdateV2");return this._genericSubscribe(rn,s,this,a,u)}onAutoModSettingsUpdate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onAutoModSettingsUpdate"),u=this._extractUserIdWithNumericWarning(r,"onAutoModSettingsUpdate");return this._genericSubscribe(sn,s,this,a,u)}onAutoModTermsUpdate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onAutoModTermsUpdate"),u=this._extractUserIdWithNumericWarning(r,"onAutoModTermsUpdate");return this._genericSubscribe(nn,s,this,a,u)}onChannelChatUserMessageHold(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onChannelChatUserMessageHold"),u=this._extractUserIdWithNumericWarning(r,"onChannelChatUserMessageHold");return this._genericSubscribe(an,s,this,a,u)}onChannelChatUserMessageUpdate(e,r,s){const a=this._extractUserIdWithNumericWarning(e,"onChannelChatUserMessageUpdate"),u=this._extractUserIdWithNumericWarning(r,"onChannelChatUserMessageUpdate");return this._genericSubscribe(on,s,this,a,u)}onChannelSharedChatSessionBegin(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelSharedChatSessionBegin");return this._genericSubscribe(Li,r,this,s)}onChannelSharedChatSessionUpdate(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelSharedChatSessionUpdate");return this._genericSubscribe(Vi,r,this,s)}onChannelSharedChatSessionEnd(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelSharedChatSessionBegin");return this._genericSubscribe(ji,r,this,s)}onChannelBitsUse(e,r){const s=this._extractUserIdWithNumericWarning(e,"onChannelBitsUse");return this._genericSubscribe(ln,r,this,s)}onUserAuthorizationGrant(e){const{clientId:r}=this._apiClient._authProvider;return this._genericSubscribe(pa,e,this,r)}onUserAuthorizationRevoke(e){const{clientId:r}=this._apiClient._authProvider;return this._genericSubscribe(ba,e,this,r)}onUserUpdate(e,r){const s=this._extractUserIdWithNumericWarning(e,"subscribeToUserUpdateEvents");return this._genericSubscribe(ma,r,this,s)}onUserWhisperMessage(e,r){const s=this._extractUserIdWithNumericWarning(e,"onUserWhisperMessage");return this._genericSubscribe(ya,r,this,s)}_getCorrectSubscriptionByTwitchId(e){return this._subscriptionsByTwitchId.get(e)}_handleSingleEventPayload(e,r,s){if(this._seenEventIds.has(s)){this._logger.debug(`Duplicate notification prevented for event: ${e.id}`);return}this._seenEventIds.add(s),setTimeout(()=>this._seenEventIds.delete(s),600*1e3),e._handleData(r).catch(a=>{this._logger.error(`Caught an unhandled error in EventSub event handler for subscription ${e.id}.
You should probably add try-catch to your handler to be able to examine it further.

Message: ${a?.message??a}`)})}_genericSubscribe(e,r,s,...a){const u=new e(r,s,...a);return this._isReadyToSubscribe(u)&&u.start(this._findTwitchSubscriptionToContinue(u)),this._subscriptions.set(u.id,u),u}_extractUserIdWithNumericWarning(e,r){const s=c(e);return ju.test(s)||this._logger.warn(`${r}: The given user is a non-numeric string. You might be sending a user name instead of a user ID.`),s}};i([h(!1)],te.prototype,"_subscriptions",void 0);i([h(!1)],te.prototype,"_subscriptionsByTwitchId",void 0);i([h(!1)],te.prototype,"_twitchSubscriptions",void 0);i([h(!1)],te.prototype,"_seenEventIds",void 0);i([h(!1)],te.prototype,"_apiClient",void 0);te=i([o("eventsub-base","EventSubBase")],te);class Qu extends us{constructor({lineBased:e,logger:r,additionalOptions:s}={}){super(),this._currentLine="",this._connecting=!1,this._connected=!1,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._lineBased=e??!1,this._logger=r,this._additionalOptions=s}get isConnecting(){return this._connecting}get isConnected(){return this._connected}sendLine(e){this._connected&&(e=e.replace(/[\0\r\n]/g,""),this.sendRaw(`${e}\r
`))}assumeExternalDisconnect(){var e;(e=this._logger)===null||e===void 0||e.trace("AbstractConnection assumeExternalDisconnect"),this._connected=!1,this._connecting=!1,this.clearSocket(),this.emit(this.onDisconnect,!1)}receiveRaw(e){var r,s;if(!this._lineBased){this.emit(this.onReceive,e);return}const a=e.split(`\r
`);if(this._currentLine+=(r=a.shift())!==null&&r!==void 0?r:"",a.length){this.emit(this.onReceive,this._currentLine),this._currentLine=(s=a.pop())!==null&&s!==void 0?s:"";for(const u of a)this.emit(this.onReceive,u)}}}class zu extends us{constructor(e,r,s={}){var a;super(),this._type=e,this._target=r,this._config=s,this._retryLimit=1/0,this._initialRetryLimit=3,this._connecting=!1,this._connectionRetryCount=0,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._retryLimit=(a=s.retryLimit)!==null&&a!==void 0?a:1/0,this._logger=s.logger}get isConnected(){var e,r;return(r=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnected)!==null&&r!==void 0?r:!1}get isConnecting(){var e,r;return(r=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnecting)!==null&&r!==void 0?r:this._connecting}get hasSocket(){var e,r;return(r=(e=this._currentConnection)===null||e===void 0?void 0:e.hasSocket)!==null&&r!==void 0?r:!1}sendLine(e){var r;(r=this._currentConnection)===null||r===void 0||r.sendLine(e)}connect(){if(this._currentConnection||this._connecting)throw new Error("Connection already present");this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(!0)}disconnect(){var e;if((e=this._logger)===null||e===void 0||e.trace(`PersistentConnection disconnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`),this._connecting=!1,this._currentConnection){const r=this._currentConnection;this._currentConnection=void 0,r.disconnect()}}assumeExternalDisconnect(){var e,r;(e=this._logger)===null||e===void 0||e.trace("PersistentConnection assumeExternalDisconnect"),(r=this._currentConnection)===null||r===void 0||r.assumeExternalDisconnect()}reconnect(){this._reconnect(!0)}acknowledgeSuccessfulReconnect(){this._previousConnection&&(this._previousConnection.disconnect(),this._previousConnection=void 0)}_startTryingToConnect(e=!1){this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(e)}_tryConnect(e=!1){var r,s;(r=this._logger)===null||r===void 0||r.trace(`PersistentConnection tryConnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`);const a=e?this._initialRetryLimit:this._retryLimit;(s=this._retryTimerGenerator)!==null&&s!==void 0||(this._retryTimerGenerator=Eo(120));const u=this._currentConnection=new this._type(fo(this._target),this._config);u.onReceive(_=>this.emit(this.onReceive,_)),u.onConnect(()=>{this.emit(this.onConnect),this._connecting=!1,this._retryTimerGenerator=void 0}),u.onDisconnect((_,g)=>{var p,m,v;if(this.emit(this.onDisconnect,_,g),_)this.emit(this.onEnd,!0),this._connecting=!1,this._retryTimerGenerator=void 0,u.disconnect(),this._currentConnection===u&&(this._currentConnection=void 0),this._previousConnection===u&&(this._previousConnection=void 0);else if(this._connecting){if((p=this._logger)===null||p===void 0||p.debug(`Connection error caught: ${(m=g?.message)!==null&&m!==void 0?m:"unknown error"}`),this._connectionRetryCount>=a)return;this._connectionRetryCount++;const T=this._retryTimerGenerator.next().value;T!==0&&((v=this._logger)===null||v===void 0||v.info(`Retrying in ${T} seconds`)),setTimeout(()=>{var M;this._connecting&&((M=this._logger)===null||M===void 0||M.info(e?"Retrying connection":"Trying to reconnect"),this._tryConnect())},T*1e3)}else this._reconnect()}),u.connect()}_reconnect(e=!1){e&&this._config.overlapManualReconnect?(this._previousConnection=this._currentConnection,this._currentConnection=void 0):this.disconnect(),this._startTryingToConnect(e)}}var he=null;typeof WebSocket<"u"?he=WebSocket:typeof MozWebSocket<"u"?he=MozWebSocket:typeof global<"u"?he=global.WebSocket||global.MozWebSocket:typeof window<"u"?he=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(he=self.WebSocket||self.MozWebSocket);class Ku extends Qu{constructor(e,r){if(super(r),this._socket=null,this._closingOnDemand=!1,e.hostName&&e.port)this._url=`ws${e.secure?"s":""}://${e.hostName}:${e.port}`;else if(e.url)this._url=e.url;else throw new Error("WebSocketConnection requires either hostName & port or url to be set")}get hasSocket(){return!!this._socket}sendRaw(e){var r;(r=this._socket)===null||r===void 0||r.send(e)}connect(){var e,r;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection connect"),this._connecting=!0,this._socket=new he(this._url,(r=this._additionalOptions)===null||r===void 0?void 0:r.wsOptions),this._socket.onopen=()=>{var s;(s=this._logger)===null||s===void 0||s.trace("WebSocketConnection onOpen"),this._connected=!0,this._connecting=!1,this._closingOnDemand=!1,this.emit(this.onConnect)},this._socket.onmessage=({data:s})=>{this.receiveRaw(s.toString())},this._socket.onerror=s=>{var a;(a=this._logger)===null||a===void 0||a.trace(`WebSocketConnection onError message:${s.message}`)},this._socket.onclose=s=>{var a;const u=this._connected,_=this._connecting;if((a=this._logger)===null||a===void 0||a.trace(`WebSocketConnection onClose wasConnected:${u.toString()} wasConnecting:${_.toString()} closingOnDemand:${this._closingOnDemand.toString()} wasClean:${s.wasClean.toString()}`),this._connected=!1,this._connecting=!1,this._closingOnDemand)this._closingOnDemand=!1,this.emit(this.onDisconnect,!0),this.emit(this.onEnd,!0);else{const g=new Error(`[${s.code}] ${s.reason}`);this.emit(this.onDisconnect,!1,g),this.emit(this.onEnd,!1,g)}this.clearSocket()}}disconnect(){var e,r;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection disconnect"),this._closingOnDemand=!0,(r=this._socket)===null||r===void 0||r.close()}clearSocket(){this._socket&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onerror=null,this._socket.onclose=null,this._socket=null)}}class Ia{_listener;_userId;_connection;_sessionId;_initialUrl;_reconnectInProgress=!1;_reconnectUrl;_keepaliveTimeout;_keepaliveTimer;_logger;_readyToSubscribe=!1;constructor(e,r,s,a){this._listener=e,this._userId=r,this._logger=Je({name:`twurple:eventsub:ws:${r}`,...a}),this._initialUrl=s,this._keepaliveTimeout=null,this._keepaliveTimer=null,this._connection=new zu(Ku,()=>({url:this._reconnectUrl??this._initialUrl}),{overlapManualReconnect:!0}),this._connection.onConnect(()=>{this._reconnectInProgress||this._listener._notifySocketConnect(this)}),this._connection.onDisconnect((u,_)=>{if(this._reconnectInProgress)this._reconnectInProgress=!1;else{this._listener._notifySocketDisconnect(this,_),this._readyToSubscribe=!1,this._clearKeepaliveTimer(),this._keepaliveTimeout=null;for(const g of this._listener._getSubscriptionsForUser(this._userId))g._droppedByTwitch()}}),this._connection.onReceive(u=>{this._logger.debug(`Received data: ${u.trim()}`);const{metadata:_,payload:g}=JSON.parse(u);switch(_.message_type){case"session_welcome":{if(this._logger.info(this._reconnectInProgress?"Reconnect: new connection established":"Connection established"),this._sessionId=g.session.id,this._readyToSubscribe=!0,!this._reconnectInProgress){const p=this._listener._getSubscriptionsForUser(this._userId);if(!p.length){this._logger.debug(`Stopping socket for user ${this._userId} because no subscriptions are active`),this.stop();break}for(const m of p)m.start()}this._initializeKeepaliveTimeout(g.session.keepalive_timeout_seconds),this._reconnectUrl=void 0,this._connection.acknowledgeSuccessfulReconnect();break}case"session_keepalive":{this._restartKeepaliveTimer();break}case"session_reconnect":{this._logger.info("Reconnect message received; initiating new connection"),this._reconnectInProgress=!0,this._reconnectUrl=g.session.reconnect_url,this._connection.reconnect();break}case"notification":{this._restartKeepaliveTimer();const p=g,{id:m}=p.subscription,v=this._listener._getCorrectSubscriptionByTwitchId(m);if(!v){this._logger.error(`Notification from unknown event received: ${m}`);break}if(new Date(_.message_timestamp).getTime()<Date.now()-600*1e3){this._logger.debug(`Old notification(s) prevented for event: ${m}`);break}if("events"in p)for(const T of p.events)this._listener._handleSingleEventPayload(v,T.data,T.id);else this._listener._handleSingleEventPayload(v,p.event,_.message_id);break}case"revocation":{const{id:p,status:m}=g.subscription,v=this._listener._getCorrectSubscriptionByTwitchId(p);if(!v){this._logger.error(`Revocation from unknown event received: ${p}`);break}this._listener._dropSubscription(v.id),this._listener._dropTwitchSubscription(v.id),this._listener._handleSubscriptionRevoke(v,m),this._logger.debug(`Subscription revoked by Twitch for event: ${p}`);break}default:this._logger.warn(`Unknown message type encountered: ${_.message_type}`)}})}start(){!this._connection.isConnected&&!this._connection.isConnecting&&this._connection.connect()}stop(){(this._connection.isConnected||this._connection.isConnecting)&&this._connection.disconnect()}get readyToSubscribe(){return this._readyToSubscribe}get sessionId(){return this._sessionId}get userId(){return this._userId}_initializeKeepaliveTimeout(e){this._keepaliveTimeout=e,this._restartKeepaliveTimer()}_clearKeepaliveTimer(){this._keepaliveTimer&&(clearTimeout(this._keepaliveTimer),this._keepaliveTimer=null)}_restartKeepaliveTimer(){this._clearKeepaliveTimer(),this._keepaliveTimeout&&(this._keepaliveTimer=setTimeout(()=>this._handleKeepaliveTimeout(),this._keepaliveTimeout*1200))}_handleKeepaliveTimeout(){this._keepaliveTimer=null,this._connection.assumeExternalDisconnect()}}i([h(!1)],Ia.prototype,"_connection",void 0);i([h(!1)],Ia.prototype,"_sessionId",void 0);let Ja=class extends te{_sockets=new Map;_initialUrl;_accepting=!1;_loggerOptions;_mockApiPort;onUserSocketConnect=this.registerEvent();onUserSocketDisconnect=this.registerEvent();constructor(e){super(e),this._mockApiPort=no(),this._initialUrl=this._mockApiPort?`ws://127.0.0.1:${this._mockApiPort}/ws`:e.url??"wss://eventsub.wss.twitch.tv/ws",this._loggerOptions=e.logger}start(){this._accepting=!0;const e=new Set([...this._subscriptions.values()].map(r=>r.authUserId));for(const r of e)this._createSocketForUser(r)}stop(){this._accepting=!1;for(const e of this._sockets.values())e.stop();this._sockets.clear()}get isActive(){return this._accepting}async _getCliTestCommandForSubscription(e){if(!this._mockApiPort)throw new Error("You must use the mock server from the Twitch CLI to be able to test WebSocket events.\n			\nTo do so, set the `TWURPLE_MOCK_API_PORT` environment variable to the port the mock server runs on (usually 8080).");const{authUserId:r}=e;if(!r)throw new Error("Can not test a WebSocket subscription for a topic without user authentication");if(!e._twitchId)throw new Error("Subscription must be registered with the mock server before being able to use this method");const s=this._sockets.get(r);if(!s)throw new P(`Can not get appropriate socket for user ${r}`);if(!s.sessionId)throw new P(`Socket for user ${r} does not have a session ID yet`);return`twitch event trigger ${e._cliName} -T websocket --session ${s.sessionId} -u ${e._twitchId}`}_isReadyToSubscribe(e){const{authUserId:r}=e;if(!r)throw new Error("Can not create a WebSocket subscription for a topic without user authentication");return this._sockets.get(r)?.readyToSubscribe??!1}async _getTransportOptionsForSubscription(e){const{authUserId:r}=e;if(!r)throw new Error("Can not create a WebSocket subscription for a topic without user authentication");const s=this._sockets.get(r);if(!s?.sessionId)throw new P(`Socket for user ${r} is not connected or does not have a session ID yet`);return{method:"websocket",session_id:s.sessionId}}_getSubscriptionsForUser(e){return[...this._subscriptions.values()].filter(r=>r.authUserId===e)}_handleSubscriptionRevoke(e,r){this.emit(this.onRevoke,e,r)}_notifySocketConnect(e){this.emit(this.onUserSocketConnect,e.userId)}_notifySocketDisconnect(e,r){this.emit(this.onUserSocketDisconnect,e.userId,r)}_genericSubscribe(e,r,s,...a){const u=super._genericSubscribe(e,r,s,...a),{authUserId:_}=u;if(!_)throw new P("WS subscription created without user ID");return this._accepting&&(this._sockets.has(_)?this._sockets.get(_).start():this._createSocketForUser(_)),u}_findTwitchSubscriptionToContinue(){}_createSocketForUser(e){const r=new Ia(this,e,this._initialUrl,this._loggerOptions);this._sockets.set(e,r),r.start()}};Ja=i([o("eventsub-ws","EventSubWsListener")],Ja);export{Ya as A,Ja as E,tt as S};
