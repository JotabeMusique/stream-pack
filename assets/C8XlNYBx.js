import{M as B,B as I,a as x,G as g,P as S,c as l,b as k}from"./B6qJfXvl.js";import{p as M,t as p,h as T,m as b}from"./ChUo-eeL.js";const P=[{title:"Twitch",description:"Retrouvez mes cours de piano gratuitement les samedis sur Twitch. Connaissez-vous Twitch Prime ?",url:"/jotabemusique",icon:"twitch.svg",color:"#9146ff"},{title:"Discord",description:"Tu veux rejoindre les cours gratuitement ? Tape <b>!discord</b> dans le chat ou clique sur le lien dans la description.",url:"",icon:"discord.svg",color:"#5865F2"},{title:"YouTube",description:"Retrouve toutes les VODs des cours et bien plus sur ma chaine YouTube",url:"@JotabeMusique",icon:"youtube.svg",color:"#ee0f0f"},{title:"Bluesky",description:"Suis mon actualité sur Bluesky pour te tenir au courant de mes autres activités musicales",url:"@jotabemusique.bsky.social",icon:"bluesky.svg",color:"#1185FE"},{title:"Instagram",description:"Retrouve mes stories et extraits d'émissions sur mon Instagram",url:"@JotabeMusique",icon:"instagram.svg",color:"#C13584"},{title:"Patreon",description:"L'existence de ces cours dépend aussi de votre contribution, les dons récurrents permettent de pérenniser leur gratuité",url:"@JotabeMusique",icon:"patreon.svg",color:"#000000"},{title:"PayPal",description:"Vous pouvez aussi faire un don ponctuel via PayPal pour me soutenir",url:"paypal.me/@JotabeMusique",icon:"paypal.svg",color:"#0551b5"}];let y=0,E=null,h=null,f=!1;function L(n,e=document.body){if(e&&n in l){const s=l[n];e.style.setProperty("--base-text",s.base?.text??l.default.base.text),e.style.setProperty("--base-background",s.base?.background??l.default.base.background),e.style.setProperty("--primary-text",s.primary?.text??l.default.primary.text),e.style.setProperty("--primary-background",s.primary?.background??l.default.primary.background),e.style.setProperty("--secondary-text",s.secondary?.text??l.default.secondary.text),e.style.setProperty("--secondary-background",s.secondary?.background??l.default.secondary.background),e.style.setProperty("--accent-text",s.accent?.text??l.default.accent.text),e.style.setProperty("--accent-background",s.accent?.background??l.default.accent.background),e.style.setProperty("--neutral-text",s.neutral?.text??l.default.neutral.text),e.style.setProperty("--neutral-background",s.neutral?.background??l.default.neutral.background)}}async function m(n){return new Promise(e=>setTimeout(e,n))}function H(n){if(!n)return"";const[e,...t]=n.split(" - ");return t.length?`<p>${e}</p><p>${t.join(" - ")}</p>`:`<p>${e}</p>`}async function v(n,e={}){if(f)return!1;const t=n.category;if(t){const s=S.find(r=>t.match(r.regex));if(s||e.forcePresentation){e.beforePresentation&&e.beforePresentation();const r=s?.stinger||"stinger-default",i=document.getElementById(r);if(i){const o=document.getElementById("presentation"),a=document.getElementById("presentationTitle"),c=document.getElementById("presentationSubtitle"),u=document.getElementById("presentationCategory");u.innerText=p(n.category||""),a.innerHTML=T(n.title),c.innerHTML=H(n.subtitle),f=!0,i.classList.add("--play"),i.play();const d=b(t);return L(d,o),await m(1333),o?.classList.add("--show"),await m(2e3),e.afterPresentation&&e.afterPresentation(),await m(k-2e3),i.currentTime=0,i.play(),await m(1333),o?.classList.remove("--show"),$(),f=!1,!0}return e.afterPresentation&&e.afterPresentation(),!1}}return!1}async function D(n={}){if(!h)return;const e=M(h);await v(e,n)}async function A(n,e={}){const t=M(n);let s=!1;const r=(t.category??"").toLocaleLowerCase();!e.skipTransition&&r!==E&&(s=await v(t,e));const i=document.getElementById("heading"),o=document.getElementById("category"),a=document.getElementById("title"),c=document.getElementById("subtitle");if(E=r,h=n,e.skipTransition){o&&(o.innerHTML=p(t.category??"")),a&&(a.innerHTML=T(t.title)??""),c&&(c.innerHTML=t.subtitle??""),t.subtitle?i?.classList.add("--withSubtitle"):i?.classList.remove("--withSubtitle");const u=b(t.category);L(u);return}s||(o&&o.innerHTML!==(t.category??"")&&i?.classList.add("--hidingCategory"),(a&&a.innerHTML!==(t.title??"")||c&&c.innerHTML!==(t.subtitle??""))&&i?.classList.add("--hidingTitle")),setTimeout(()=>{o&&(o.innerHTML=p(t.category??"")),a&&(a.innerHTML=T(t.title)??""),c&&(c.innerHTML=t.subtitle??""),t.subtitle?i?.classList.add("--withSubtitle"):i?.classList.remove("--withSubtitle");const u=b(t.category);L(u),i?.classList.remove("--hidingCategory"),i?.classList.remove("--hidingTitle")},s?0:750)}function R(n){const e=document.getElementById("broadcaster");if(e)if(n&&n.length){const t=document.getElementById("guests"),s=document.getElementById("guestTemplate");if(!s||!t)return;t.textContent="";const r=n.length>g?[...n.slice(0,g-2),`+${n.length-g+2}`]:n;r.forEach(i=>{const o=document.importNode(s.content,!0),a=o.querySelector(".guestName"),c=o.querySelector(".guestAvatar"),u=o.querySelector(".guestProfilePicture");if(typeof i=="string")c&&(c.textContent=i);else{a&&(a.textContent=i.displayName),u&&(u.src=i.profilePictureUrl);const d=Date.now();u.addEventListener("load",()=>{Date.now()-d<=250&&c.classList.add("--fast"),c.classList.add("--loaded")})}t.appendChild(o)}),r.length>3?t.classList.add("--hideNames"):t.classList.remove("--hideNames"),e.classList.add("--withGuests"),e.classList.add("--withGuests")}else e.classList.remove("--withGuests")}function w(n){const e=document.getElementById("socials"),t=document.getElementById("socialTitle"),s=document.getElementById("socialDescription"),r=document.getElementById("socialLink"),i=document.getElementById("socialIcon");e?.classList.add("--hiding"),setTimeout(()=>{t&&(t.innerHTML=n.title??""),s&&(s.innerHTML=n.description??""),r&&(r.innerHTML=n.url??""),i&&(i.innerHTML=`<img src="../assets/${n.icon}" />`),e?.classList.remove("--hiding"),e?.style.setProperty("--socialColor",n.color),e?.style.setProperty("--linkColor",n.linkColor??n.color)},750)}function G(){y=(y+1)%P.length,w(P[y])}function O(){const n=new Date,e=document.getElementById("datetime");if(!e)return;const t=document.getElementById("time"),s=document.getElementById("timeDay"),r=document.getElementById("timeMonth");t&&(t.innerHTML=n.getHours().toString().padStart(2,"0")+":"+n.getMinutes().toString().padStart(2,"0")),s&&(s.innerHTML=n.getDate().toString()),r&&(r.innerHTML=B[n.getMonth()]),e.classList.remove("--none")}function _(n,e){const t=document.getElementById(n);if(!t)return;const s=t.querySelector(".tile-value");if(s){if(e===null){t.classList.add("--none"),s.innerHTML="0";return}s.innerHTML=e,t.classList.remove("--none")}}function U(n,e,t,s=!1){const r=document.getElementById(n);if(!r)return;const i=r.querySelector(".tile-value");if(!i)return;const o=r.querySelector(".tile-user");if(!o)return;const a=r.querySelector(".tile-price"),c=r.querySelector(".tile-blindText");if(!c)return;if(e===null){r.classList.add("--none");return}else if(s||r.classList.contains("--none")){o.innerHTML=e,a&&t&&(a.innerHTML=t),r.classList.remove("--none");return}const u=i.getBoundingClientRect();i.style.setProperty("--previousWidth",Math.max(c.scrollWidth+24,u.width)+"px"),i.style.setProperty("--newWidth","auto"),r.classList.add("--blinded"),setTimeout(()=>{o.innerHTML=e,a&&t&&(a.innerHTML=t),r.classList.remove("--blinded"),r.classList.add("--hiding");const d=i.getBoundingClientRect();i.style.setProperty("--newWidth",d.width+"px"),r.classList.remove("--hiding")},3e3)}function C(){return"../backgrounds/Piano"+Math.floor(Math.random()*I).toFixed(0).padStart(x,"0")+".jpg"}function $(){const n=document.getElementById("presentationBackgroundImage");n.src=C()}export{G as a,U as b,_ as c,R as d,L as e,D as f,$ as p,O as r,A as s};
